---
phase: 42-effects-animation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/effects/noise-texture.tsx
  - src/components/effects/chromatic-aberration.tsx
  - src/components/effects/index.ts
autonomous: true

must_haves:
  truths:
    - "NoiseTexture renders an inline SVG feTurbulence filter as a positioned overlay"
    - "Multiple NoiseTexture instances on the same page use unique filter IDs (React useId)"
    - "ChromaticAberration wraps content with configurable RGB split text-shadow"
    - "Both components are aria-hidden and pointer-events-none for accessibility"
  artifacts:
    - path: "src/components/effects/noise-texture.tsx"
      provides: "SVG noise texture overlay component"
      exports: ["NoiseTexture", "NoiseTextureProps"]
    - path: "src/components/effects/chromatic-aberration.tsx"
      provides: "CSS chromatic aberration effect component"
      exports: ["ChromaticAberration", "ChromaticAberrationProps"]
    - path: "src/components/effects/index.ts"
      provides: "Barrel exports for all effects"
      contains: "NoiseTexture"
  key_links:
    - from: "src/components/effects/index.ts"
      to: "src/components/effects/noise-texture.tsx"
      via: "re-export"
      pattern: "export.*NoiseTexture"
---

<objective>
Create NoiseTexture and ChromaticAberration effect components.

Purpose: Add decorative effect primitives matching Raycast's premium glass aesthetic. NoiseTexture provides subtle grain via SVG feTurbulence. ChromaticAberration provides optional RGB split for decorative surfaces. Covers GLS-06 and GLS-07.
Output: New effects/ directory with two components and barrel exports.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/42-effects-animation/42-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create NoiseTexture component</name>
  <files>src/components/effects/noise-texture.tsx</files>
  <action>
Create `src/components/effects/noise-texture.tsx`:

1. "use client" directive at top.

2. Props interface `NoiseTextureProps`:
   - `opacity?: number` — default 0.03 (Raycast subtlety)
   - `baseFrequency?: number` — default 0.65 (SVG feTurbulence)
   - `numOctaves?: number` — default 3
   - `className?: string` — additional classes

3. Implementation:
   - Use `React.useId()` to generate a unique filter ID (avoids collisions with multiple instances).
   - Render an absolutely positioned overlay div (`pointer-events-none absolute inset-0 z-[1]`).
   - Inside, render an SVG with `<filter id={filterId}>` containing `<feTurbulence type="fractalNoise" baseFrequency={baseFrequency} numOctaves={numOctaves} stitchTiles="stitch" />`.
   - Add `<rect width="100%" height="100%" filter={`url(#${filterId})`} />`.
   - Set `aria-hidden="true"` on the outer div.
   - Apply opacity via inline style.
   - Use cn() for className merging.

4. Export both the component and the props type.

Follow the existing component pattern: functional component, explicit return type, JSDoc with @example showing usage inside a GlassPanel.
  </action>
  <verify>Run `pnpm build` — compiles without errors. The file exists at the expected path. The component exports NoiseTexture and NoiseTextureProps.</verify>
  <done>NoiseTexture component renders SVG noise overlay with unique filter IDs, configurable opacity/frequency, and proper accessibility attributes.</done>
</task>

<task type="auto">
  <name>Task 2: Create ChromaticAberration component + effects barrel</name>
  <files>src/components/effects/chromatic-aberration.tsx, src/components/effects/index.ts</files>
  <action>
**Part A: Create `src/components/effects/chromatic-aberration.tsx`:**

1. "use client" directive at top.

2. Props interface `ChromaticAberrationProps`:
   - `children: React.ReactNode`
   - `offset?: number` — default 1 (pixel offset for RGB split)
   - `intensity?: number` — default 0.15 (opacity of color channels, 0-1)
   - `className?: string`
   - `as?: "div" | "span"` — default "div"

3. Implementation:
   - For text content: Apply `textShadow` with RGB channel split:
     ```
     textShadow: `-${offset}px 0 rgba(255, 0, 0, ${intensity}), ${offset}px 0 rgba(0, 255, 255, ${intensity})`
     ```
   - The component wraps children in the chosen element and applies the text-shadow via inline style.
   - Set `aria-hidden` to false (this wraps visible content).
   - Use cn() for className merging.
   - Add JSDoc documenting that this effect is decorative and optional — use sparingly on glass surfaces only, NOT on body text.

4. Export both the component and the props type.

**Part B: Create `src/components/effects/index.ts`:**

Barrel export file:
```typescript
export { NoiseTexture } from "./noise-texture";
export type { NoiseTextureProps } from "./noise-texture";

export { ChromaticAberration } from "./chromatic-aberration";
export type { ChromaticAberrationProps } from "./chromatic-aberration";
```
  </action>
  <verify>Run `pnpm build` — compiles without errors. All three files exist. The barrel index re-exports both components and their types.</verify>
  <done>ChromaticAberration component applies RGB split text-shadow. Effects barrel index exports both NoiseTexture and ChromaticAberration with types.</done>
</task>

</tasks>

<verification>
- `pnpm build` passes
- `src/components/effects/` directory exists with 3 files
- NoiseTexture uses React.useId() for unique filter IDs
- ChromaticAberration applies text-shadow with configurable offset and intensity
- Both components have "use client" directive
- Effects barrel exports all components and types
</verification>

<success_criteria>
NoiseTexture and ChromaticAberration components available as decorative effect primitives. Both follow established patterns (cn(), props interface, JSDoc). GLS-06 and GLS-07 requirements satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/42-effects-animation/42-02-SUMMARY.md`
</output>
