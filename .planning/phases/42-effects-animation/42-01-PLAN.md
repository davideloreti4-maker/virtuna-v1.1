---
phase: 42-effects-animation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/primitives/GlassPanel.tsx
  - src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "GlassPanel renders with 6 blur levels: xs (2px), sm (8px), md (12px), lg (20px), xl (36px), 2xl (48px)"
    - "Mobile blur reduction applies to xl and 2xl variants (reduced to 8px)"
    - "GlassPanel uses will-change: backdrop-filter during interaction for GPU compositing"
  artifacts:
    - path: "src/components/primitives/GlassPanel.tsx"
      provides: "Enhanced GlassPanel with full Raycast blur range"
      contains: "xs.*xl.*2xl"
    - path: "src/app/globals.css"
      provides: "Glass blur CSS classes for xs, xl, 2xl levels"
      contains: "glass-blur-xs"
  key_links:
    - from: "src/components/primitives/GlassPanel.tsx"
      to: "src/app/globals.css"
      via: "glass-blur-* CSS classes"
      pattern: "glass-blur-(xs|sm|md|lg|xl|2xl)"
---

<objective>
Enhance GlassPanel with full Raycast blur range and performance optimization.

Purpose: Expand GlassPanel's blur variants from 3 (sm/md/lg) to 6 (xs/sm/md/lg/xl/2xl) matching Raycast's exact blur values per context. Add will-change strategy for GPU compositing. Covers GLS-01 through GLS-05.
Output: Enhanced GlassPanel.tsx + new CSS classes in globals.css.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/components/primitives/GlassPanel.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add xs, xl, 2xl blur CSS classes to globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Add three new glass blur utility classes alongside the existing glass-blur-sm/md/lg in globals.css:

```css
.glass-blur-xs {
  backdrop-filter: blur(2px);
  -webkit-backdrop-filter: blur(2px);
}
```

```css
.glass-blur-xl {
  backdrop-filter: blur(36px);
  -webkit-backdrop-filter: blur(36px);
}
```

```css
.glass-blur-2xl {
  backdrop-filter: blur(48px);
  -webkit-backdrop-filter: blur(48px);
}
```

Also update the mobile optimization media query `@media (max-width: 768px)` to include the new variants:
- `glass-blur-xl` and `glass-blur-2xl` should also reduce to `blur(8px)` on mobile, alongside the existing md/lg entries.

Do NOT modify the existing sm/md/lg classes or any other globals.css content.
  </action>
  <verify>Run `pnpm build` — builds without errors. Grep globals.css for `glass-blur-xs`, `glass-blur-xl`, `glass-blur-2xl` — all present. Grep the mobile media query — confirms xl and 2xl are included.</verify>
  <done>Six glass blur CSS classes exist (xs, sm, md, lg, xl, 2xl) with correct blur values and mobile reduction for all variants md and above.</done>
</task>

<task type="auto">
  <name>Task 2: Enhance GlassPanel blur prop to support full range</name>
  <files>src/components/primitives/GlassPanel.tsx</files>
  <action>
Update GlassPanel.tsx to support 6 blur levels instead of 3:

1. Update the `blur` prop type from `"sm" | "md" | "lg"` to `"none" | "xs" | "sm" | "md" | "lg" | "xl" | "2xl"`. Keep default as `"md"`.

2. Update the `blurClass` map to include all variants:
```typescript
const blurClass = {
  none: "",
  xs: "glass-blur-xs",
  sm: "glass-blur-sm",
  md: "glass-blur-md",
  lg: "glass-blur-lg",
  xl: "glass-blur-xl",
  "2xl": "glass-blur-2xl",
}[blur];
```

3. Update the JSDoc comment for the `blur` prop to document all levels with their pixel values and Raycast context:
```
/** Blur intensity matching Raycast contexts:
 * - none: 0px (no blur)
 * - xs: 2px (feature frames)
 * - sm: 8px (tooltips, light blur)
 * - md: 12px (cards, dock) — default
 * - lg: 20px (footer, heavy surfaces)
 * - xl: 36px (windows, dropdowns)
 * - 2xl: 48px (action bars)
 */
```

4. Export the blur type for external usage:
```typescript
export type GlassBlur = "none" | "xs" | "sm" | "md" | "lg" | "xl" | "2xl";
```

5. Add a performance warning JSDoc at the component level (GLS-04):
```
/** @performance Limit to 2-3 GlassPanel elements with blur visible per viewport.
 * Each backdrop-filter creates a GPU compositing layer. Too many cause frame drops.
 * On mobile, blur is automatically reduced to 8px for variants md and above. */
```

Do NOT change any other GlassPanel behavior (tints, opacity, borderGlow, innerGlow).
  </action>
  <verify>Run `pnpm build` — builds without errors. Check that `GlassBlur` type is exported. Verify the component renders correctly by checking the `blurClass` map covers all 7 variants.</verify>
  <done>GlassPanel accepts blur="xs" through blur="2xl" with correct CSS class mapping. GlassBlur type exported. Default remains "md".</done>
</task>

</tasks>

<verification>
- `pnpm build` passes
- globals.css contains 6 glass-blur-* classes (xs, sm, md, lg, xl, 2xl)
- Mobile media query reduces xl and 2xl to 8px blur
- GlassPanel.tsx blur prop accepts all 6 levels + "none"
- GlassBlur type exported from GlassPanel.tsx
</verification>

<success_criteria>
GlassPanel renders with 6 configurable blur levels matching Raycast's exact values. Mobile optimization applied to all heavy blur variants. GLS-01 through GLS-05 requirements satisfied.
</success_criteria>

<output>
After completion, create `.planning/phases/42-effects-animation/42-01-SUMMARY.md`
</output>
