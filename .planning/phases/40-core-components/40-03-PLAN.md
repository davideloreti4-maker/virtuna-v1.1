---
phase: 40-core-components
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/input.tsx
  - src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Input renders text, password, and search types correctly"
    - "Input shows focus ring with accent color"
    - "Input shows error state with red border and error message"
    - "Input shows disabled state with reduced opacity"
    - "InputField renders label above input"
    - "InputField renders helper text below input"
    - "InputField renders error message below input"
  artifacts:
    - path: "src/components/ui/input.tsx"
      provides: "Input and InputField components"
      exports: ["Input", "InputField", "InputProps", "InputFieldProps"]
      contains: "aria-invalid"
  key_links:
    - from: "src/components/ui/input.tsx"
      to: "src/app/globals.css"
      via: "semantic tokens"
      pattern: "border-error|text-foreground|bg-surface"
---

<objective>
Enhance Input component with full states and add InputField wrapper with label/helper/error

Purpose: Create production-ready form inputs matching Raycast styling with proper accessibility and field labeling
Output: Enhanced input.tsx with Input (base) and InputField (with label/helper/error) components
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-core-components/40-CONTEXT.md
@.planning/phases/40-core-components/40-RESEARCH.md
@src/components/ui/input.tsx
@src/components/primitives/GlassInput.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance Input with all states and types</name>
  <files>src/components/ui/input.tsx</files>
  <action>
Rewrite input.tsx with enhanced Input and new InputField components:

**Input (base component):**
- Supports types: text, password, search, email, number, tel, url
- Height: `h-11` (44px) for touch target compliance
- Styling: `bg-surface border border-border rounded-md px-3 text-foreground placeholder:text-foreground-muted`

**States:**
- Default: `border-border`
- Hover: `hover:border-border-hover`
- Focus: `focus:outline-none focus:ring-2 focus:ring-accent/50 focus:border-accent`
- Error: `border-error focus:ring-error/50` - use semantic token, not red-500
- Disabled: `disabled:opacity-50 disabled:cursor-not-allowed`

**InputProps:**
```typescript
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  /** Error state */
  error?: boolean;
}
```

**InputField (wrapper component with label/helper/error):**
```typescript
interface InputFieldProps extends InputProps {
  /** Label text displayed above input */
  label?: string;
  /** Helper text displayed below input */
  helperText?: string;
  /** Error message - when string, displays as error message and sets error state */
  error?: string | boolean;
}
```

**InputField structure:**
```tsx
<div className="space-y-1.5">
  {label && <label className="text-sm font-medium text-foreground">{label}</label>}
  <Input error={!!error} aria-describedby={...} />
  {helperText && !error && <p className="text-sm text-foreground-muted">{helperText}</p>}
  {typeof error === "string" && <p className="text-sm text-error" role="alert">{error}</p>}
</div>
```

**Accessibility:**
- `aria-invalid={error}` on Input when error state
- `aria-describedby` linking to helper/error text
- `id` auto-generated if not provided (for label association)
- Label uses `htmlFor` to associate with input

**TypeScript:**
- Export InputProps and InputFieldProps interfaces
- forwardRef on both Input and InputField

**JSDoc:**
- Examples for text, password, search input types
- Examples for InputField with label, helper, error states
  </action>
  <verify>
Run TypeScript check: `npx tsc --noEmit src/components/ui/input.tsx`
Verify InputField export: `grep "InputField" src/components/ui/input.tsx`
Verify accessibility: `grep "aria-invalid" src/components/ui/input.tsx`
  </verify>
  <done>
Input has all states (default, hover, focus, error, disabled), InputField has label/helper/error, proper aria attributes present, 44px height for touch targets
  </done>
</task>

<task type="auto">
  <name>Task 2: Update UI index exports for Input</name>
  <files>src/components/ui/index.ts</files>
  <action>
Update index.ts to export InputField and types:

```typescript
export { Input, InputField } from "./input";
export type { InputProps, InputFieldProps } from "./input";
```
  </action>
  <verify>
Run: `grep "InputField" src/components/ui/index.ts` - should show export
  </verify>
  <done>
InputField and InputFieldProps properly exported from index.ts
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. InputField exists: `grep "export.*InputField" src/components/ui/input.tsx`
3. Error state uses semantic token: `grep "border-error" src/components/ui/input.tsx`
4. Accessibility: `grep "aria-invalid" src/components/ui/input.tsx`
5. Label association: `grep "htmlFor" src/components/ui/input.tsx`
6. 44px height: `grep "h-11" src/components/ui/input.tsx`
</verification>

<success_criteria>
- Input handles text, password, search types
- Focus ring uses accent color (coral)
- Error state shows red border using semantic token (not hardcoded red-500)
- InputField shows label above input
- InputField shows helper text or error message (mutually exclusive)
- Proper aria-invalid and aria-describedby attributes
- 44px minimum height for touch targets
</success_criteria>

<output>
After completion, create `.planning/phases/40-core-components/40-03-SUMMARY.md`
</output>
