---
phase: 40-core-components
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/badge.tsx
  - src/components/ui/typography.tsx
  - src/components/ui/spinner.tsx
  - src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Badge renders default, success, warning, error, info variants"
    - "Badge renders sm and md sizes"
    - "Heading renders h1-h6 with correct semantic tags"
    - "Text and Caption render with appropriate sizes"
    - "Spinner shows indeterminate animation"
    - "Spinner shows determinate progress when value provided"
  artifacts:
    - path: "src/components/ui/badge.tsx"
      provides: "Badge component with semantic color variants"
      exports: ["Badge", "badgeVariants", "BadgeProps"]
      contains: "success"
    - path: "src/components/ui/typography.tsx"
      provides: "Typography components"
      exports: ["Heading", "Text", "Caption", "Code"]
      contains: "h1.*h2.*h3"
    - path: "src/components/ui/spinner.tsx"
      provides: "Spinner/Loader component"
      exports: ["Spinner", "SpinnerProps"]
      contains: "animate-spin"
  key_links:
    - from: "src/components/ui/badge.tsx"
      to: "src/app/globals.css"
      via: "semantic status colors"
      pattern: "bg-success|bg-warning|bg-error|bg-info"
---

<objective>
Create Badge, Typography, and Spinner components for Phase 40 component library

Purpose: Complete the foundational component set with status badges, semantic typography, and loading indicators
Output: New badge.tsx, typography.tsx, and spinner.tsx files with full TypeScript types
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-core-components/40-CONTEXT.md
@.planning/phases/40-core-components/40-RESEARCH.md
@src/components/primitives/GlassBadge.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Badge component</name>
  <files>src/components/ui/badge.tsx</files>
  <action>
Create badge.tsx with CVA-based Badge component:

**Variants (5 semantic colors):**
- `default`: `bg-surface text-foreground-secondary border border-border`
- `success`: `bg-success/10 text-success border border-success/20`
- `warning`: `bg-warning/10 text-warning border border-warning/20`
- `error`: `bg-error/10 text-error border border-error/20`
- `info`: `bg-info/10 text-info border border-info/20`

**Sizes:**
- `sm`: `h-5 px-2 text-[10px]` (20px height)
- `md`: `h-6 px-2.5 text-xs` (24px height)

**Base styles:**
- `inline-flex items-center justify-center rounded-full font-medium`
- NO interactive styles (badges are display-only)

**CVA structure:**
```typescript
const badgeVariants = cva(
  "inline-flex items-center justify-center rounded-full font-medium",
  {
    variants: {
      variant: { default, success, warning, error, info },
      size: { sm, md }
    },
    defaultVariants: { variant: "default", size: "md" }
  }
);
```

**TypeScript:**
```typescript
interface BadgeProps extends React.HTMLAttributes<HTMLSpanElement>,
  VariantProps<typeof badgeVariants> {}
```

**JSDoc with examples for each variant**
  </action>
  <verify>
Run: `npx tsc --noEmit src/components/ui/badge.tsx`
Verify variants: `grep -E "success|warning|error|info" src/components/ui/badge.tsx`
  </verify>
  <done>
Badge component created with 5 semantic variants and 2 sizes using CVA
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Typography components</name>
  <files>src/components/ui/typography.tsx</files>
  <action>
Create typography.tsx with semantic typography components:

**Heading component:**
```typescript
interface HeadingProps extends React.HTMLAttributes<HTMLHeadingElement> {
  /** Heading level (1-6), renders as h1-h6 */
  level: 1 | 2 | 3 | 4 | 5 | 6;
  /** Visual size override (defaults to level) */
  size?: 1 | 2 | 3 | 4 | 5 | 6;
}
```

**Heading sizes (from extraction):**
- 1: `text-5xl font-semibold leading-tight tracking-tight font-display` (48px)
- 2: `text-4xl font-semibold leading-tight tracking-tight font-display` (36px)
- 3: `text-2xl font-medium leading-snug` (24px)
- 4: `text-xl font-medium leading-snug` (20px)
- 5: `text-lg font-medium` (18px)
- 6: `text-base font-medium` (16px)

**Text component:**
```typescript
interface TextProps extends React.HTMLAttributes<HTMLParagraphElement> {
  /** Size variant */
  size?: "sm" | "base" | "lg";
  /** Muted color */
  muted?: boolean;
}
```
- sm: `text-sm` (14px)
- base: `text-base` (16px) - default
- lg: `text-lg` (18px)
- muted: `text-foreground-muted`

**Caption component:**
- Small, muted text for captions/labels
- `text-xs text-foreground-muted`

**Code component:**
- Inline code styling
- `font-mono text-sm bg-surface px-1.5 py-0.5 rounded`

All components should use forwardRef and have proper TypeScript types.
  </action>
  <verify>
Run: `npx tsc --noEmit src/components/ui/typography.tsx`
Verify exports: `grep -E "export.*(Heading|Text|Caption|Code)" src/components/ui/typography.tsx`
  </verify>
  <done>
Typography components created with Heading (h1-h6), Text, Caption, Code all using semantic sizing from extraction data
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Spinner component</name>
  <files>src/components/ui/spinner.tsx</files>
  <action>
Create spinner.tsx with loading indicator:

**Props:**
```typescript
interface SpinnerProps extends React.SVGAttributes<SVGSVGElement> {
  /** Size in pixels */
  size?: "sm" | "md" | "lg";
  /** Determinate progress (0-100), undefined for indeterminate */
  value?: number;
  /** Accessible label */
  label?: string;
}
```

**Size mapping:**
- sm: 16px
- md: 24px
- lg: 32px

**Implementation:**
- Use SVG circle for spinner
- Indeterminate: CSS `animate-spin` with dashed stroke
- Determinate: stroke-dasharray/dashoffset based on value
- Color: `text-current` (inherits from parent) or `text-foreground-muted` default

**Indeterminate spinner SVG:**
```tsx
<svg className="animate-spin" viewBox="0 0 24 24">
  <circle
    cx="12" cy="12" r="10"
    stroke="currentColor"
    strokeWidth="3"
    fill="none"
    strokeDasharray="60 40"
    strokeLinecap="round"
  />
</svg>
```

**Determinate spinner:**
- Calculate circumference: 2 * PI * radius
- stroke-dashoffset = circumference * (1 - value/100)
- No animate-spin class

**Accessibility:**
- `role="progressbar"`
- `aria-valuenow={value}` for determinate
- `aria-valuemin="0" aria-valuemax="100"` for determinate
- `aria-label={label}` for screen readers

**JSDoc with examples for indeterminate and determinate modes**
  </action>
  <verify>
Run: `npx tsc --noEmit src/components/ui/spinner.tsx`
Verify animation: `grep "animate-spin" src/components/ui/spinner.tsx`
Verify accessibility: `grep "progressbar" src/components/ui/spinner.tsx`
  </verify>
  <done>
Spinner component created with indeterminate (spinning) and determinate (progress) modes, proper accessibility attributes
  </done>
</task>

</tasks>

<verification>
1. All files compile: `npx tsc --noEmit`
2. Badge has 5 variants: `grep -c "variant" src/components/ui/badge.tsx`
3. Typography has 4 components: Heading, Text, Caption, Code
4. Spinner has both modes: indeterminate animation and determinate value
5. All use semantic tokens from globals.css
</verification>

<success_criteria>
- Badge renders all 5 semantic variants with correct colors
- Badge renders sm and md sizes
- Heading renders h1-h6 with correct semantic HTML tags
- Text and Caption render with appropriate sizes
- Code renders with monospace font and background
- Spinner animates in indeterminate mode
- Spinner shows progress in determinate mode
- All components have TypeScript interfaces and JSDoc
</success_criteria>

<output>
After completion, create `.planning/phases/40-core-components/40-04-SUMMARY.md`
</output>
