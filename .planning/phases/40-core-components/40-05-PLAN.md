---
phase: 40-core-components
plan: 05
type: execute
wave: 2
depends_on: ["40-01", "40-02", "40-03", "40-04"]
files_modified:
  - src/components/ui/icon.tsx
  - src/components/ui/index.ts
autonomous: false

must_haves:
  truths:
    - "Icon component renders Phosphor icons with consistent sizing"
    - "Icon component supports accessible labels"
    - "All Phase 40 components render correctly in browser"
    - "All interactive elements meet 44x44px touch target"
  artifacts:
    - path: "src/components/ui/icon.tsx"
      provides: "Icon wrapper component"
      exports: ["Icon", "IconProps"]
      contains: "aria-label"
    - path: "src/components/ui/index.ts"
      provides: "Complete UI component exports"
      exports: ["Button", "Card", "GlassCard", "Input", "InputField", "Badge", "Heading", "Text", "Spinner", "Icon"]
  key_links:
    - from: "src/components/ui/icon.tsx"
      to: "@phosphor-icons/react"
      via: "icon type"
      pattern: "Icon.*PhosphorIcon"
---

<objective>
Create Icon system integration pattern and visually verify all Phase 40 components

Purpose: Complete the component library with consistent icon handling and verify visual accuracy
Output: Icon component + visual verification that all components render correctly
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/40-core-components/40-CONTEXT.md
@.planning/phases/40-core-components/40-RESEARCH.md
@src/components/ui/index.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Icon wrapper component</name>
  <files>src/components/ui/icon.tsx</files>
  <action>
Create icon.tsx with Icon wrapper for consistent sizing and accessibility:

**Props:**
```typescript
import type { Icon as PhosphorIcon } from "@phosphor-icons/react";

interface IconProps {
  /** Phosphor icon component to render */
  icon: PhosphorIcon;
  /** Size in pixels */
  size?: 16 | 20 | 24 | 32;
  /** Icon weight (Phosphor-specific) */
  weight?: "thin" | "light" | "regular" | "bold" | "fill" | "duotone";
  /** Accessible label - REQUIRED for meaningful icons, omit for decorative */
  label?: string;
  /** Additional className */
  className?: string;
}
```

**Implementation:**
```tsx
export function Icon({
  icon: IconComponent,
  size = 20,
  weight = "regular",
  label,
  className
}: IconProps) {
  return (
    <IconComponent
      size={size}
      weight={weight}
      className={className}
      aria-hidden={!label}
      aria-label={label}
      role={label ? "img" : undefined}
    />
  );
}
```

**Accessibility:**
- If `label` provided: `aria-label={label}`, `role="img"`
- If no label (decorative): `aria-hidden="true"`

**JSDoc examples:**
```tsx
// Decorative icon (hidden from AT)
<Icon icon={MagnifyingGlass} />

// Meaningful icon with label
<Icon icon={Warning} label="Warning" className="text-warning" />

// Icon button usage
<Button size="icon" aria-label="Search">
  <Icon icon={MagnifyingGlass} size={20} />
</Button>
```
  </action>
  <verify>
Run: `npx tsc --noEmit src/components/ui/icon.tsx`
Verify accessibility: `grep "aria-hidden" src/components/ui/icon.tsx`
  </verify>
  <done>
Icon component created with consistent sizing, weight support, and proper accessibility attributes
  </done>
</task>

<task type="auto">
  <name>Task 2: Update complete UI index exports</name>
  <files>src/components/ui/index.ts</files>
  <action>
Update index.ts to export all Phase 40 components:

```typescript
// Button
export { Button, buttonVariants } from "./button";
export type { ButtonProps } from "./button";

// Input
export { Input, InputField } from "./input";
export type { InputProps, InputFieldProps } from "./input";

// Card
export { Card, GlassCard, CardHeader, CardContent, CardFooter } from "./card";
export type { CardProps, GlassCardProps } from "./card";

// Badge
export { Badge, badgeVariants } from "./badge";
export type { BadgeProps } from "./badge";

// Typography
export { Heading, Text, Caption, Code } from "./typography";
export type { HeadingProps, TextProps } from "./typography";

// Spinner
export { Spinner } from "./spinner";
export type { SpinnerProps } from "./spinner";

// Icon
export { Icon } from "./icon";
export type { IconProps } from "./icon";

// Skeleton (existing)
export { Skeleton } from "./skeleton";

// Accordion (existing)
export {
  AccordionRoot,
  AccordionItem,
  AccordionTrigger,
  AccordionContent,
} from "./accordion";
```
  </action>
  <verify>
Run: `grep -E "export.*(Button|Card|GlassCard|Input|Badge|Heading|Spinner|Icon)" src/components/ui/index.ts`
  </verify>
  <done>
All Phase 40 components properly exported from index.ts
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete Phase 40 component library: Button, Card, GlassCard, Input, InputField, Badge, Typography (Heading/Text/Caption/Code), Spinner, Icon</what-built>
  <how-to-verify>
1. Start dev server: `npm run dev`
2. Visit http://localhost:3000/primitives-showcase (or create a test page)
3. Verify each component visually:

**Button:**
- [ ] Primary variant has coral background
- [ ] Secondary variant has surface background with border (this should be default)
- [ ] Ghost variant is transparent
- [ ] Destructive variant is red
- [ ] All sizes visible, md/lg buttons should feel at least 44px tall

**Card & GlassCard:**
- [ ] Card has dark surface background
- [ ] GlassCard shows blur effect (visible when content behind it)
- [ ] GlassCard has subtle inner glow on border

**Input & InputField:**
- [ ] Input has coral focus ring
- [ ] InputField shows label above
- [ ] InputField shows error message in red when error state

**Badge:**
- [ ] All 5 variants render with correct colors
- [ ] Success is green, error is red, warning is yellow, info is blue

**Typography:**
- [ ] Heading h1 is largest, h6 is smallest
- [ ] Text renders at readable sizes
- [ ] Code has monospace font and background

**Spinner:**
- [ ] Spins smoothly in indeterminate mode
- [ ] Shows progress arc in determinate mode
  </how-to-verify>
  <resume-signal>Type "approved" if all components render correctly, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
1. All files compile: `npx tsc --noEmit`
2. All exports present in index.ts
3. Dev server runs without errors
4. Visual inspection confirms styling matches Raycast aesthetic
5. Touch targets meet 44x44px on interactive elements
</verification>

<success_criteria>
- Icon component handles Phosphor icons with consistent sizing
- Icon has proper accessibility (aria-hidden or aria-label)
- All Phase 40 components exported from index.ts
- Visual verification confirms all components render correctly
- Button default is secondary (not coral primary)
- All interactive elements have adequate touch targets
</success_criteria>

<output>
After completion, create `.planning/phases/40-core-components/40-05-SUMMARY.md`
</output>
