---
phase: 40-core-components
plan: 06
type: gap_closure
wave: 1
depends_on: []
files_modified:
  - src/components/ui/card.tsx
  - src/app/globals.css
autonomous: true
gap_closure: true
source: 40-UAT.md
gaps: [4, 8, 13]
created: 2026-02-05

must_haves:
  truths:
    - "Card component uses rounded-xl (16px) corners, not rounded-lg"
    - "Card background shows top-to-bottom gradient, not flat bg-surface"
    - "Card has subtle white inset highlight on top edge"
    - "Body background is clean dark solid with no dot grid pattern"
  artifacts:
    - path: "src/components/ui/card.tsx"
      provides: "Card with gradient bg, rounded-xl, inner highlight"
      contains: "rounded-xl"
    - path: "src/app/globals.css"
      provides: "Clean body background without dot grid"
  key_links:
    - from: "src/components/ui/card.tsx"
      to: "globals.css --gradient-card-bg"
      via: "inline style referencing CSS variable"
      pattern: "gradient-card-bg"
---

<objective>
Close 3 UAT gaps from Phase 40 visual testing. Two require code changes (Card styling, dot grid removal), one is documented as accepted divergence (H1 font personality).

Purpose: Bring Card and body background to 1:1 Raycast visual match.
Output: Updated card.tsx and globals.css matching Raycast reference.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@src/components/ui/card.tsx
@src/app/globals.css
@src/app/(marketing)/ui-showcase/page.tsx
</context>

<gaps_addressed>

### UAT #4 — Card gradient + rounded-xl (minor, CODE FIX)
Card uses `rounded-lg` and flat `bg-surface`. Raycast cards have gradient background (top lighter, bottom darker), `rounded-xl` corners, and subtle inner highlight on top edge.

### UAT #8 — H1 Funnel Display vs Raycast Inter (cosmetic, ACCEPTED DIVERGENCE)
Funnel Display was intentionally chosen for Virtuna brand identity. No code change. Document in summary as accepted.

### UAT #13 — Body dot grid pattern (minor, CODE FIX)
Body has `radial-gradient` dot grid at 15% opacity that Raycast doesn't use. Raycast has clean dark solid background. Remove the dot grid.

</gaps_addressed>

<tasks>

<task type="auto">
  <name>Task 1: Fix Card gradient, corners, and inner highlight</name>
  <files>src/components/ui/card.tsx</files>
  <action>
Update the Card component (line 51-62) to match Raycast card styling:

1. Change `rounded-lg` to `rounded-xl` in the className
2. Remove `bg-surface` from className (gradient replaces it)
3. Apply the existing `--gradient-card-bg` token as inline style background:
   `style={{ background: 'var(--gradient-card-bg)', ...style }}`
4. Add subtle inner highlight via inline boxShadow:
   `boxShadow: 'inset 0 1px 0 0 rgba(255, 255, 255, 0.06)'`

To support the style prop, update CardProps to extend with style support (HTMLAttributes already includes style, so no type change needed). Update the component to accept and spread `style` from props, merging with the gradient and box-shadow.

Final Card render should look like:
```tsx
const Card = React.forwardRef<HTMLDivElement, CardProps>(
  ({ className, style, ...props }, ref) => (
    <div
      ref={ref}
      className={cn(
        "border border-border rounded-xl",
        className
      )}
      style={{
        background: "var(--gradient-card-bg)",
        boxShadow: "inset 0 1px 0 0 rgba(255, 255, 255, 0.06)",
        ...style,
      }}
      {...props}
    />
  )
);
```

Do NOT touch GlassCard, CardHeader, CardContent, or CardFooter.
  </action>
  <verify>
Run `pnpm build` (or `npm run build`) to confirm no TypeScript errors. Visually inspect at /ui-showcase — Card should show gradient background (lighter top, darker bottom), 16px corners, and subtle top-edge highlight.
  </verify>
  <done>Card uses rounded-xl, gradient-card-bg background, and inset highlight. No regression in GlassCard or sub-components.</done>
</task>

<task type="auto">
  <name>Task 2: Remove body dot grid pattern</name>
  <files>src/app/globals.css</files>
  <action>
Remove the dot grid pattern from the body rule (lines 347-351 in globals.css).

Delete (or comment out) the entire second `body` block:
```css
body {
  /* Dot grid pattern - matching raycast aesthetic */
  background-image: radial-gradient(rgba(255, 255, 255, 0.15) 1px, transparent 1px);
  background-size: 24px 24px;
}
```

The `html, body` block above (lines 341-345) already applies `bg-background` which provides the correct clean dark background via gray-950.

Do NOT remove or modify the `html, body` block, keyframes, utility classes, or any @theme tokens. Only remove the standalone `body` dot-grid block.
  </action>
  <verify>
Run `pnpm build` to confirm no CSS errors. Visually inspect at /ui-showcase — background should be clean solid dark without visible dot pattern.
  </verify>
  <done>Body background is clean dark solid. No dot grid visible. All other styles intact.</done>
</task>

</tasks>

<notes>
**UAT #8 (H1 font):** Accepted divergence. Funnel Display is an intentional Virtuna brand choice. Document in SUMMARY as accepted — no code change required.
</notes>

<verification>
1. `pnpm build` passes with zero errors
2. Visit /ui-showcase — Card section shows gradient background with lighter top edge, rounded-xl corners
3. Visit /ui-showcase — page background is clean solid dark, no dot pattern
4. GlassCard, Button, Input, Badge, Typography, Spinner, Icon sections unchanged
</verification>

<success_criteria>
- Card matches Raycast card styling: gradient bg, rounded-xl, inner highlight
- Body background is clean dark solid without dot grid
- H1 font divergence documented as accepted
- Zero regressions in other components
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/40-core-components/40-06-SUMMARY.md`
</output>
