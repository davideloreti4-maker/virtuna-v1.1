---
phase: 53-font-color-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/app/(app)/layout.tsx
  - src/app/(marketing)/layout.tsx
  - src/types/design-tokens.ts
autonomous: true

must_haves:
  truths:
    - "Every page renders text in Inter font family with no Funnel Display or Satoshi visible"
    - "Body text has line-height 1.5 and letter-spacing 0.2px"
    - "All gray scale tokens in globals.css use exact hex values (no oklch)"
    - "Card gradient uses 137deg angle with correct Raycast color stops"
    - "Glass gradient and button-secondary shadow tokens exist with Raycast-accurate values"
    - "Satoshi woff2 font files are deleted from the repository"
  artifacts:
    - path: "src/app/globals.css"
      provides: "All design tokens (fonts, colors, gradients, shadows)"
      contains: "--font-sans: var(--font-inter)"
    - path: "src/app/(app)/layout.tsx"
      provides: "App route group font loading"
      contains: "Inter"
    - path: "src/app/(marketing)/layout.tsx"
      provides: "Marketing route group font loading"
      contains: "Inter"
    - path: "src/types/design-tokens.ts"
      provides: "FontFamilyToken type without 'display'"
      contains: "FontFamilyToken"
  key_links:
    - from: "src/app/(app)/layout.tsx"
      to: "src/app/globals.css"
      via: "--font-inter CSS variable set on html, consumed by --font-sans in @theme"
      pattern: "inter\\.variable"
    - from: "src/app/(marketing)/layout.tsx"
      to: "src/app/globals.css"
      via: "--font-inter CSS variable set on html, consumed by --font-sans in @theme"
      pattern: "inter\\.variable"
---

<objective>
Replace Satoshi + Funnel Display fonts with Inter via next/font/google, correct all color tokens in globals.css to match Raycast extraction, and delete legacy font files.

Purpose: Establishes the typographic and color foundation that every component in the design system depends on. All subsequent Phase 53 work (component updates) requires these tokens to be correct first.

Output: Updated globals.css with correct font tokens, gray hex values, Raycast-accurate gradients, and new shadow tokens. Both layout.tsx files loading Inter. Satoshi font files deleted.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/53-font-color-foundation/53-RESEARCH.md

Key source files:
@src/app/globals.css
@src/app/(app)/layout.tsx
@src/app/(marketing)/layout.tsx
@src/types/design-tokens.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite font loading in both layout files to use Inter</name>
  <files>
    src/app/(app)/layout.tsx
    src/app/(marketing)/layout.tsx
  </files>
  <action>
In BOTH layout files, make identical font loading changes:

1. Remove imports:
   - Remove `import localFont from "next/font/local";`
   - Remove `import { Funnel_Display } from "next/font/google";`

2. Add import:
   - `import { Inter } from "next/font/google";`

3. Replace the `satoshi` and `funnelDisplay` const declarations with a single `inter` declaration:
```typescript
const inter = Inter({
  subsets: ["latin"],
  display: "swap",
  variable: "--font-inter",
});
```

4. Update the `<html>` element className:
   - FROM: `${satoshi.variable} ${funnelDisplay.variable}`
   - TO: `${inter.variable}`

5. Keep everything else identical (metadata, body className, children rendering).

The (app)/layout.tsx wraps children in `<AppShell>`, the (marketing)/layout.tsx renders `<Header />` above children. These structural differences remain unchanged.
  </action>
  <verify>
Run `npx tsc --noEmit` to verify no TypeScript errors from removed imports.
Run `grep -r "satoshi\|Satoshi\|Funnel_Display\|funnelDisplay\|funnel-display\|font-funnel" src/app/` to confirm no stale font references in layout files.
  </verify>
  <done>Both layout.tsx files import only Inter from next/font/google, set --font-inter CSS variable on html element, and contain zero references to Satoshi or Funnel Display.</done>
</task>

<task type="auto">
  <name>Task 2: Overhaul globals.css tokens (fonts, colors, gradients, shadows, body styles)</name>
  <files>
    src/app/globals.css
  </files>
  <action>
Make the following changes to globals.css:

**A) Font family tokens in @theme (lines ~101-105):**
Replace the 3 font-family lines with:
```css
  /* --- Font Families --- */
  /* Source: raycast.com - Inter for all text (matching Raycast 1:1) */
  --font-sans: var(--font-inter), ui-sans-serif, system-ui, sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, "JetBrains Mono", monospace;
```
Remove `--font-display` entirely. Do NOT keep it as an alias.

**B) Gray scale tokens (lines ~26-29) - convert oklch to hex:**
Replace:
```css
  --color-gray-50: oklch(0.98 0 0);
  --color-gray-100: oklch(0.96 0 0);
  --color-gray-200: oklch(0.90 0 0);
  --color-gray-300: oklch(0.80 0 0);
```
With:
```css
  --color-gray-50: #f9f9f9;   /* oklch(0.98 0 0) → hex */
  --color-gray-100: #f2f2f2;  /* oklch(0.96 0 0) → hex */
  --color-gray-200: #e0e0e0;  /* oklch(0.90 0 0) → hex */
  --color-gray-300: #c6c6c6;  /* oklch(0.80 0 0) → hex */
```

**C) Card gradient (line ~191) - fix angle and stops:**
Replace:
```css
  --gradient-card-bg: linear-gradient(180deg, #222326, #141517);
```
With:
```css
  --gradient-card-bg: linear-gradient(137deg, #111214 4.87%, #0c0d0f 75.88%);
```

**D) Add glass gradient token (after --gradient-navbar line ~194):**
Add new token:
```css
  --gradient-glass: linear-gradient(137deg, rgba(17, 18, 20, 0.75) 4.87%, rgba(12, 13, 15, 0.9) 75.88%);
```

**E) Add button-secondary shadow token (after --shadow-button line ~146):**
Add new token:
```css
  --shadow-button-secondary: rgba(0, 0, 0, 0.5) 0px 0px 0px 1px, rgba(255, 255, 255, 0.06) 0px 1px 0px 0px inset, rgba(0, 0, 0, 0.15) 0px 1px 2px 0px;
```

**F) Body styles (lines ~404-418) - fix line-height and remove h1/h2 rule:**
Change `line-height: 1.15;` to `line-height: 1.5;` (TYPO-02).
`letter-spacing: 0.2px;` is already correct (TYPO-03) -- leave as-is.

Remove the entire `h1, h2 { @apply font-display; }` block (lines ~415-418). This rule will cause a build error since `--font-display` no longer exists.

**Important:** Do NOT change any other tokens. Coral scale, semantic colors, borders, spacing, radius, z-index, animations, etc. all remain unchanged.
  </action>
  <verify>
Run `grep "oklch" src/app/globals.css` and confirm oklch only appears in coral scale, semantic status colors, shadow scale, glow intensities, legacy gradient colors, and :root aliases -- NOT in any gray scale tokens.
Run `grep "font-display" src/app/globals.css` and confirm zero matches.
Run `grep "line-height: 1.5" src/app/globals.css` and confirm the body line-height is updated.
Run `grep "gradient-card-bg" src/app/globals.css` and confirm 137deg angle.
Run `grep "gradient-glass" src/app/globals.css` and confirm the new token exists.
Run `grep "shadow-button-secondary" src/app/globals.css` and confirm the new token exists.
  </verify>
  <done>globals.css @theme has: (1) --font-sans pointing to --font-inter with no --font-display, (2) all gray tokens in hex, (3) card gradient at 137deg with Raycast stops, (4) new --gradient-glass token, (5) new --shadow-button-secondary token, (6) body line-height 1.5, (7) no h1/h2 font-display rule.</done>
</task>

<task type="auto">
  <name>Task 3: Delete Satoshi font files and update FontFamilyToken type</name>
  <files>
    src/fonts/Satoshi-Regular.woff2
    src/fonts/Satoshi-Medium.woff2
    src/fonts/Satoshi-Bold.woff2
    src/types/design-tokens.ts
  </files>
  <action>
1. Delete the three Satoshi font files:
```bash
rm src/fonts/Satoshi-Regular.woff2 src/fonts/Satoshi-Medium.woff2 src/fonts/Satoshi-Bold.woff2
```
If the `src/fonts/` directory is now empty, delete it too:
```bash
rmdir src/fonts/ 2>/dev/null
```

2. Update `src/types/design-tokens.ts` line 67:
   - FROM: `export type FontFamilyToken = 'display' | 'sans' | 'mono';`
   - TO: `export type FontFamilyToken = 'sans' | 'mono';`

3. In the same file, update `GradientToken` (line 106) to include new tokens:
   - FROM: `export type GradientToken = 'coral' | 'card-bg' | 'overlay' | 'glow-coral';`
   - TO: `export type GradientToken = 'coral' | 'card-bg' | 'overlay' | 'glow-coral' | 'navbar' | 'glass';`

4. Update `ShadowToken` (line 42) to include the new button-secondary shadow:
   - FROM: `export type ShadowToken = 'sm' | 'md' | 'lg' | 'xl' | 'glass' | 'glow-accent';`
   - TO: `export type ShadowToken = 'sm' | 'md' | 'lg' | 'xl' | 'glass' | 'glow-accent' | 'button' | 'button-secondary';`
  </action>
  <verify>
Run `ls src/fonts/ 2>/dev/null || echo "fonts directory removed"` to confirm font files are gone.
Run `npx tsc --noEmit` to verify no TypeScript errors from the type changes.
Run `grep "'display'" src/types/design-tokens.ts` to confirm 'display' is removed from FontFamilyToken.
  </verify>
  <done>Satoshi woff2 files deleted, src/fonts/ directory removed (if empty), FontFamilyToken no longer includes 'display', GradientToken includes 'navbar' and 'glass', ShadowToken includes 'button' and 'button-secondary'.</done>
</task>

</tasks>

<verification>
After all 3 tasks complete:

1. `npx tsc --noEmit` passes with no errors
2. `grep -r "Satoshi\|satoshi\|Funnel_Display\|funnelDisplay\|font-funnel" src/app/ src/fonts/` returns zero results
3. `grep "oklch" src/app/globals.css | grep "gray"` returns zero results
4. `grep "font-display" src/app/globals.css` returns zero results
5. `grep "137deg" src/app/globals.css` returns matches for gradient-card-bg and gradient-glass
6. `ls src/fonts/ 2>/dev/null` shows empty or directory doesn't exist

NOTE: The build will have warnings/errors from 11 component files that still reference `font-display` class. This is expected -- those files are fixed in Plan 02. Run `npx next build 2>&1 | head -50` to see the scope but do NOT fix component files in this plan.
</verification>

<success_criteria>
- Both layout.tsx files load Inter via next/font/google with --font-inter CSS variable
- globals.css @theme has --font-sans pointing to --font-inter, no --font-display
- All 4 gray oklch tokens converted to exact hex values
- gradient-card-bg uses 137deg with Raycast color stops (#111214, #0c0d0f)
- New --gradient-glass and --shadow-button-secondary tokens present
- Body line-height is 1.5 (not 1.15)
- h1/h2 font-display CSS rule removed
- Satoshi font files deleted
- TypeScript types updated to reflect token changes
</success_criteria>

<output>
After completion, create `.planning/phases/53-font-color-foundation/53-01-SUMMARY.md`
</output>
