---
phase: 01-infrastructure-setup
plan: 02
type: execute
wave: 2
depends_on: ["01-01"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "App builds without errors"
    - "App runs locally on dev server"
    - "Vercel deployment succeeds"
    - "Homepage displays in browser"
  artifacts: []
  key_links:
    - from: "Vercel"
      to: "GitHub"
      via: "Auto-deploy on push"
      pattern: "git push triggers build"
---

<objective>
Verify the infrastructure works end-to-end: local build, dev server, and Vercel deployment.

Purpose: Confirm Phase 1 success criteria are met - app deploys to Vercel on push.

Output:
- Verified local build
- Verified dev server runs
- Verified Vercel deployment
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/01-infrastructure-setup/01-01-SUMMARY.md

Key context:
- GitHub: https://github.com/davideloreti4-maker/virtuna-v1.1
- Vercel: https://virtuna-v11.vercel.app
- Supabase: https://qyxvxleheckijapurisj.supabase.co
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run local build and type check</name>
  <files></files>
  <action>
Execute build and type check commands:

1. Run TypeScript type check: `npx tsc --noEmit`
2. Run Next.js build: `npm run build`
3. Capture any errors or warnings

If build fails:
- Read error messages carefully
- Fix any issues in the source files
- Re-run build until successful
  </action>
  <verify>
`npm run build` exits with code 0
Build output shows "Compiled successfully" or similar
  </verify>
  <done>
Local build passes without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Commit and push to trigger Vercel deploy</name>
  <files></files>
  <action>
Commit the new src/ directory and push to GitHub:

1. Stage all new files: `git add src/`
2. Commit with message: `feat(01): recreate src directory with Next.js App Router`
3. Push to main: `git push origin main`

The push will trigger Vercel auto-deploy.
  </action>
  <verify>
`git push` completes successfully
  </verify>
  <done>
Changes pushed to GitHub, Vercel deployment triggered
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete infrastructure setup with Next.js App Router, Supabase utilities, and Vercel deployment</what-built>
  <how-to-verify>
1. Visit https://virtuna-v11.vercel.app
2. Verify the page loads (should show "Virtuna v1.1" heading)
3. Check browser console for any errors
4. Check Vercel dashboard for deployment status: https://vercel.com/dashboard

Expected: Page displays "Virtuna v1.1" heading with "Building..." text
  </how-to-verify>
  <resume-signal>Type "approved" if deployment works, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit` passes
2. Build succeeds: `npm run build` exits 0
3. Git push succeeds to GitHub
4. Vercel deployment completes and site is accessible
</verification>

<success_criteria>
- Local build passes without errors
- Changes pushed to GitHub
- Vercel deployment succeeds
- Site accessible at https://virtuna-v11.vercel.app
- Homepage renders correctly
</success_criteria>

<output>
After completion, create `.planning/phases/01-infrastructure-setup/01-02-SUMMARY.md`
</output>
