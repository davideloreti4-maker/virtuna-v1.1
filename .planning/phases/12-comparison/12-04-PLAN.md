---
phase: 12-comparison
plan: 04
type: execute
wave: 2
depends_on: ["12-01", "12-02", "12-03"]
files_modified:
  - .planning/phases/12-comparison/DISCREPANCY-REPORT.md
  - .planning/phases/12-comparison/DISCREPANCIES.json
autonomous: true

must_haves:
  truths:
    - "All discrepancies from Plans 01-03 consolidated into single report"
    - "Global IDs renumbered sequentially (D-001 through D-XXX)"
    - "Summary statistics calculated"
    - "JSON export created for Phase 13 automation"
  artifacts:
    - path: ".planning/phases/12-comparison/DISCREPANCY-REPORT.md"
      provides: "Consolidated discrepancy report with all findings"
      contains: "Total discrepancies:"
    - path: ".planning/phases/12-comparison/DISCREPANCIES.json"
      provides: "Structured JSON export of all discrepancies"
      contains: "\"discrepancies\":"
  key_links:
    - from: "DISCREPANCY-REPORT.md"
      to: "discrepancies/*.md"
      via: "consolidation of individual reports"
      pattern: "D-\\d{3}"
---

<objective>
Consolidate all discrepancy findings from Plans 01-03 into a single prioritized report.

Purpose: Create a single source of truth for all visual discrepancies to guide Phase 13 refinement work.
Output: Consolidated DISCREPANCY-REPORT.md and DISCREPANCIES.json for structured access.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/12-comparison/12-RESEARCH.md
@.planning/phases/12-comparison/12-CONTEXT.md

# Load all discrepancy reports from Plans 01-03
@.planning/phases/12-comparison/discrepancies/dashboard-navigation.md
@.planning/phases/12-comparison/discrepancies/forms-selectors.md
@.planning/phases/12-comparison/discrepancies/modals-results.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Consolidate and renumber discrepancies</name>
  <files>.planning/phases/12-comparison/DISCREPANCY-REPORT.md</files>
  <action>
Read all discrepancy reports from Plans 01-03 and consolidate into single report.

**Input files:**
- `discrepancies/dashboard-navigation.md` (Plan 01)
- `discrepancies/forms-selectors.md` (Plan 02)
- `discrepancies/modals-results.md` (Plan 03)

**Consolidation steps:**

1. **Renumber all IDs** sequentially:
   - D-001 through D-XXX
   - Order: Dashboard/Navigation first, then Selectors, then Forms, then Modals, then Results

2. **Group by priority** in report sections:
   - Critical issues first (layout breaks, missing elements)
   - Major issues second (colors, spacing, typography, animations)
   - Minor issues last (1-2px decorative differences)

3. **Calculate summary statistics:**
   - Total discrepancies
   - By severity: Critical | Major | Minor
   - By type: Spacing | Color | Typography | Layout | Animation

**Create `.planning/phases/12-comparison/DISCREPANCY-REPORT.md`:**

```markdown
# Discrepancy Report â€” Phase 12

**Generated:** [date]
**Reference:** app.societies.io (via extraction/screenshots/desktop-fullpage/)
**Clone:** Virtuna (localhost:3000)
**Viewport:** 1440x900

## Executive Summary

| Metric | Count |
|--------|-------|
| Total Discrepancies | XX |
| Critical | XX |
| Major | XX |
| Minor | XX |

### By Type
| Type | Count | % |
|------|-------|---|
| Spacing | XX | XX% |
| Color | XX | XX% |
| Typography | XX | XX% |
| Layout | XX | XX% |
| Animation | XX | XX% |

### By Component
| Component | Discrepancies |
|-----------|---------------|
| Sidebar | XX |
| Society Selector | XX |
| View Selector | XX |
| Test Type Selector | XX |
| Forms | XX |
| Modals | XX |
| Results Panel | XX |

---

## Critical Issues (Must Fix)

| ID | Component | Element | Issue | Type | File Path | Fix Hint |
|----|-----------|---------|-------|------|-----------|----------|
[Critical issues here]

---

## Major Issues (Should Fix)

| ID | Component | Element | Issue | Type | File Path | Fix Hint |
|----|-----------|---------|-------|------|-----------|----------|
[Major issues here]

---

## Minor Issues (Nice to Have)

| ID | Component | Element | Issue | Type | File Path | Fix Hint |
|----|-----------|---------|-------|------|-----------|----------|
[Minor issues here]

---

## Detailed Findings by Screen

### Dashboard & Navigation
[Copy from dashboard-navigation.md with updated IDs]

### Selectors
[Copy selector sections from forms-selectors.md with updated IDs]

### Forms
[Copy form sections from forms-selectors.md with updated IDs]

### Modals
[Copy from modals-results.md with updated IDs]

### Results
[Copy from modals-results.md with updated IDs]

---

## Phase 13 Action Items

Based on this analysis, Phase 13 refinement should:
1. Fix all Critical issues first (blocking for 98% accuracy)
2. Fix all Major issues (required for 98% accuracy)
3. Address Minor issues if time permits

## Appendix: Screenshot Inventory

### Reference Screenshots
[List all reference files used]

### Virtuna Screenshots
[List all captured Virtuna files]
```
  </action>
  <verify>
- DISCREPANCY-REPORT.md exists
- All IDs are sequential (D-001, D-002...)
- Summary statistics are accurate
- All discrepancies from Plans 01-03 included
  </verify>
  <done>Consolidated report created with renumbered IDs and complete statistics</done>
</task>

<task type="auto">
  <name>Task 2: Create JSON export for Phase 13</name>
  <files>.planning/phases/12-comparison/DISCREPANCIES.json</files>
  <action>
Create structured JSON export of all discrepancies for programmatic access in Phase 13.

**Create `.planning/phases/12-comparison/DISCREPANCIES.json`:**

```json
{
  "metadata": {
    "generated": "[ISO date]",
    "reference": "app.societies.io",
    "clone": "Virtuna",
    "viewport": "1440x900",
    "total": XX
  },
  "summary": {
    "by_severity": {
      "critical": XX,
      "major": XX,
      "minor": XX
    },
    "by_type": {
      "spacing": XX,
      "color": XX,
      "typography": XX,
      "layout": XX,
      "animation": XX
    }
  },
  "discrepancies": [
    {
      "id": "D-001",
      "component": "Sidebar",
      "element": "background",
      "issue": "Color mismatch",
      "type": "color",
      "severity": "major",
      "reference_value": "#0f0f10",
      "current_value": "#171717",
      "fix_hint": "bg-[#0f0f10]",
      "file_path": "src/components/app/sidebar.tsx",
      "line": 15,
      "status": "open"
    }
  ]
}
```

**Field definitions:**
- `id`: Global ID (D-001 format)
- `component`: UI component name
- `element`: Specific element within component
- `issue`: Human-readable description
- `type`: spacing | color | typography | layout | animation
- `severity`: critical | major | minor
- `reference_value`: Expected value from reference
- `current_value`: Actual value in Virtuna
- `fix_hint`: Suggested CSS/Tailwind fix
- `file_path`: Source file to modify
- `line`: Line number if known (optional)
- `status`: open | fixed (for Phase 13 tracking)
  </action>
  <verify>
- DISCREPANCIES.json is valid JSON (parse test)
- All discrepancies from markdown report included
- IDs match between .md and .json
  </verify>
  <done>JSON export created with all discrepancies in structured format</done>
</task>

</tasks>

<verification>
- [ ] DISCREPANCY-REPORT.md exists with complete content
- [ ] DISCREPANCIES.json exists and is valid JSON
- [ ] All discrepancies from Plans 01-03 consolidated
- [ ] IDs renumbered sequentially (D-001 through D-XXX)
- [ ] Summary statistics calculated and accurate
- [ ] Priority grouping matches criteria (critical/major/minor)
- [ ] JSON structure matches specification
</verification>

<success_criteria>
1. Single consolidated DISCREPANCY-REPORT.md created
2. All discrepancies from Plans 01-03 included
3. Sequential ID numbering (D-001 through D-XXX)
4. Accurate summary statistics
5. Valid DISCREPANCIES.json for Phase 13 consumption
6. Report ready to guide Phase 13 refinement work
</success_criteria>

<output>
After completion, create `.planning/phases/12-comparison/12-04-SUMMARY.md`
</output>
