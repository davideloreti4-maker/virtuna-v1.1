---
phase: 06-test-type-selector-forms
plan: 02
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/components/app/content-form.tsx
  - src/components/app/index.ts
autonomous: true

must_haves:
  truths:
    - "User sees textarea with type-specific placeholder"
    - "Textarea auto-expands as user types"
    - "User can click 'Upload Images' button (UI only)"
    - "User can click 'Help Me Craft' button with sparkles (UI only)"
    - "User sees 'Simulate' primary button"
    - "User can change test type via type selector button"
  artifacts:
    - path: "src/components/app/content-form.tsx"
      provides: "Shared content form for 10 test types"
      exports: ["ContentForm"]
  key_links:
    - from: "src/components/app/content-form.tsx"
      to: "src/lib/test-types.ts"
      via: "imports placeholder text"
      pattern: "TEST_TYPES"
---

<objective>
Build shared content form component used by 10 test types (all except Survey)

Purpose: Provide consistent form structure for Article, Website Content, Advertisement, LinkedIn Post, Instagram Post, X Post, TikTok Script, Email Subject Line, Email, and Product Proposition
Output: ContentForm component with auto-expanding textarea, helper buttons, and submit
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-test-type-selector-forms/06-CONTEXT.md
@src/types/test.ts
@src/lib/test-types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build ContentForm component</name>
  <files>
    - src/components/app/content-form.tsx
    - src/components/app/index.ts
  </files>
  <action>
**MANDATORY: Use v0 MCP to match societies.io pixel-perfect**

1. Query v0 MCP with prompt: "Create a content test form for societies.io. Dark theme form with large auto-expanding textarea, a type selector button showing current type with chevron, 'Upload Images' button with image icon, 'Help Me Craft' button with sparkles icon, and a primary 'Simulate' submit button. Form should have zinc-800/900 styling with rounded corners."

2. Create `src/components/app/content-form.tsx`:
   - Props interface:
     ```typescript
     interface ContentFormProps {
       testType: TestType;
       onChangeType: () => void;  // Opens type selector
       onSubmit: (content: string) => void;
       className?: string;
     }
     ```
   - Local state: content (string)

3. Component structure:
   - Type selector button (shows current type icon + name + chevron, calls onChangeType)
   - Auto-expanding textarea:
     - Placeholder from TEST_TYPES[testType].placeholder
     - Use ref + useEffect to auto-resize on content change
     - min-height: 120px, resize: none
   - Action buttons row:
     - "Upload Images" button (ImageIcon from Lucide, onClick: console.log('Upload images clicked'))
     - "Help Me Craft" button (Sparkles icon, onClick: console.log('Help me craft clicked'))
   - Submit button: "Simulate" (primary style, disabled if content empty)

4. Styling:
   - Textarea: bg-zinc-900, border border-zinc-800, rounded-xl, text-white, placeholder:text-zinc-600
   - Type selector button: flex items-center gap-2, text-sm text-zinc-400, hover:text-white
   - Action buttons: text-xs text-zinc-500, hover:text-zinc-300, flex items-center gap-1
   - Submit button: bg-white text-zinc-900, rounded-xl, px-6 py-3, hover:bg-zinc-200

5. Add export to `src/components/app/index.ts`
  </action>
  <verify>
    - `npm run build` passes
    - TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>ContentForm renders with auto-expanding textarea, shows correct placeholder per type, action buttons present</done>
</task>

</tasks>

<verification>
- Build succeeds
- ContentForm exported from @/components/app
- Placeholder changes based on testType prop
- Textarea auto-expands when content grows
- Action buttons render (Upload Images, Help Me Craft)
- Submit button disabled when empty, enabled when content present
</verification>

<success_criteria>
- ContentForm component complete matching TEST-04
- Placeholders match TEST-05 (loaded from TEST_TYPES config)
- Help Me Craft and Upload Images buttons present (UI only per TEST-04)
- Simulate button present and functional
</success_criteria>

<output>
After completion, create `.planning/phases/06-test-type-selector-forms/06-02-SUMMARY.md`
</output>
