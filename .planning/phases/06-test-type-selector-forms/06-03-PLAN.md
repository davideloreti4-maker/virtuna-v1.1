---
phase: 06-test-type-selector-forms
plan: 03
type: execute
wave: 2
depends_on: ["06-01"]
files_modified:
  - src/components/app/survey-form.tsx
  - src/components/app/index.ts
autonomous: true

must_haves:
  truths:
    - "User sees question textarea"
    - "User can select question type (Single Select, Open Response)"
    - "User sees dynamic options list for Single Select"
    - "User can add/remove/reorder options"
    - "User can click 'Ask' submit button"
  artifacts:
    - path: "src/components/app/survey-form.tsx"
      provides: "Survey form with unique structure"
      exports: ["SurveyForm"]
  key_links:
    - from: "src/components/app/survey-form.tsx"
      to: "src/types/test.ts"
      via: "uses TestType"
      pattern: "TestType"
---

<objective>
Build survey form component with unique structure (question + question type + dynamic options)

Purpose: Surveys have a different structure than content forms - they need question type selection and dynamic option management
Output: SurveyForm component with question textarea, type dropdown, and option management
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-test-type-selector-forms/06-CONTEXT.md
@src/types/test.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build SurveyForm component</name>
  <files>
    - src/components/app/survey-form.tsx
    - src/components/app/index.ts
  </files>
  <action>
**MANDATORY: Use v0 MCP to match societies.io pixel-perfect**

1. Query v0 MCP with prompt: "Create a survey form for societies.io. Dark theme with question textarea, a dropdown to select question type (Single Select or Open Response), and when Single Select is chosen, show a list of option inputs with add/remove/drag-to-reorder functionality. Include an 'Ask' primary submit button. Zinc-800/900 styling."

2. Create `src/components/app/survey-form.tsx`:
   - Props interface:
     ```typescript
     interface SurveyFormProps {
       onChangeType: () => void;  // Opens type selector
       onSubmit: (data: SurveySubmission) => void;
       className?: string;
     }

     interface SurveySubmission {
       question: string;
       questionType: 'single-select' | 'open-response';
       options?: string[];  // Only for single-select
     }
     ```
   - Local state:
     - question: string
     - questionType: 'single-select' | 'open-response'
     - options: string[] (default 2 empty strings)

3. Component structure:
   - Type selector button (shows "Survey" with icon, calls onChangeType)
   - Question textarea:
     - Placeholder: "What would you like to ask?"
     - Auto-expanding (same pattern as ContentForm)
   - Question type dropdown:
     - Use Radix DropdownMenu or simple select
     - Options: "Single Select", "Open Response"
     - Label: "Question type"
   - Options list (only visible when questionType === 'single-select'):
     - Map over options array, each with:
       - Drag handle (GripVertical icon) - UI only, no actual drag
       - Input field for option text
       - Remove button (X icon, disabled if only 2 options)
     - "Add option" button (Plus icon)
   - Submit button: "Ask" (primary style, disabled if question empty)

4. Option management:
   - addOption: push empty string to options
   - removeOption(index): filter out, min 2 options
   - updateOption(index, value): update specific option

5. Styling:
   - Match ContentForm styling for consistency
   - Options: flex gap-2, option inputs with zinc-900 bg
   - Drag handle: text-zinc-600, cursor-grab (visual only)
   - Add option button: text-zinc-500, hover:text-zinc-300

6. Add export to `src/components/app/index.ts`
  </action>
  <verify>
    - `npm run build` passes
    - TypeScript compiles: `npx tsc --noEmit`
  </verify>
  <done>SurveyForm renders with question textarea, question type dropdown, dynamic options for single select, Ask button</done>
</task>

</tasks>

<verification>
- Build succeeds
- SurveyForm exported from @/components/app
- Question type dropdown toggles between Single Select and Open Response
- Options list visible only for Single Select
- Can add options (no max limit)
- Can remove options (min 2)
- Ask button disabled when question empty
</verification>

<success_criteria>
- SurveyForm component complete matching TEST-06
- Question textarea present
- Question type dropdown works (Single Select, Open Response)
- Dynamic options list with add/remove for Single Select
- Ask submit button present
</success_criteria>

<output>
After completion, create `.planning/phases/06-test-type-selector-forms/06-03-SUMMARY.md`
</output>
