---
phase: 03-trending-page
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(app)/trending/page.tsx
  - src/app/(app)/trending/trending-client.tsx
autonomous: true

must_haves:
  truths:
    - "Trending page displays a full redesigned layout with header, category tabs, and video card grid"
    - "Page shows meaningful mock content -- video cards with thumbnails, titles, creators, view counts, and trend indicators"
    - "Category tabs filter between content categories (All, Dance, Comedy, Education, Music, Food)"
    - "Trending page is reachable via sidebar 'Trending' link and renders without errors"
    - "All visual elements follow brand bible patterns (6% borders, 12px card radius, Inter font, coral accents)"
  artifacts:
    - path: "src/app/(app)/trending/page.tsx"
      provides: "Server component wrapper with metadata"
      contains: "TrendingClient"
    - path: "src/app/(app)/trending/trending-client.tsx"
      provides: "Full trending page UI with mock data, category tabs, video card grid"
      min_lines: 150
  key_links:
    - from: "src/app/(app)/trending/page.tsx"
      to: "src/app/(app)/trending/trending-client.tsx"
      via: "default import"
      pattern: "import.*TrendingClient"
    - from: "src/components/app/sidebar.tsx"
      to: "/trending"
      via: "router.push"
      pattern: "router\\.push\\(\"/trending\"\\)"
---

<objective>
Redesign the trending page from a bare "coming soon" placeholder into a complete, content-rich page with a TikTok-style trending feed.

Purpose: TREND-01 through TREND-04 -- the trending page needs a real UI with meaningful mock data, category navigation, and brand-consistent design. This is the only page in the app that is still a placeholder.

Output: A fully designed trending page with category tabs, video card grid (mock data), trend metrics, and brand bible styling.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@BRAND-BIBLE.md
@src/app/(app)/trending/page.tsx
@src/app/(app)/layout.tsx
@src/components/app/app-shell.tsx
@src/components/ui/card.tsx
@src/components/ui/tabs.tsx
@src/components/ui/category-tabs.tsx
@src/components/ui/badge.tsx
@src/components/ui/skeleton.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create trending page client component with mock data and full layout</name>
  <files>src/app/(app)/trending/trending-client.tsx</files>
  <action>
Create `trending-client.tsx` as a "use client" component that renders the full trending page.

**Page structure (top to bottom):**

1. **Page header** -- `max-w-6xl mx-auto px-4 py-6 sm:p-6`
   - `h1` "Trending" in `text-3xl font-bold text-foreground`
   - Subtitle: "Discover what's trending on TikTok right now" in `text-foreground-muted text-sm mt-1`

2. **Category tabs** -- Use the existing `CategoryTabs` component from `@/components/ui/category-tabs`
   - Categories: All, Dance, Comedy, Education, Music, Food
   - Each category has a count (from filtered mock data length)
   - Default to "all"
   - Use `onValueChange` to filter the displayed videos

3. **Video card grid** -- `grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mt-6`
   - Each card uses the existing `Card` component from `@/components/ui/card`
   - Card inner structure:
     - **Thumbnail area**: `aspect-video rounded-t-[12px] bg-surface` with a gradient placeholder (use CSS gradients that differ per card -- e.g., `bg-gradient-to-br from-coral-900/30 to-surface` with variations). Add a small play icon overlay (Phosphor `Play` icon) centered with `absolute inset-0 flex items-center justify-center`.
     - **Content area**: `p-4` with:
       - Video title: `text-sm font-medium text-foreground line-clamp-2`
       - Creator: `text-xs text-foreground-muted mt-1` with `@creatorname`
       - **Metrics row**: `flex items-center gap-3 mt-3 text-xs text-foreground-muted`
         - Views: format with K/M suffix (e.g., "1.2M views")
         - Likes: heart icon + count
         - Trend indicator: Use `Badge` component -- `variant="accent"` for hot/rising, `variant="success"` for steady. Show arrow + percentage (e.g., "+42%")
       - **Category pill**: `Badge variant="default" size="sm"` showing the content category

4. **Empty state** -- If category filter yields no results (shouldn't happen with mock data but good practice):
   - Centered text: "No trending content in this category yet"

**Mock data** -- Define a `TRENDING_VIDEOS` array of 12 objects at the top of the file:

```ts
interface TrendingVideo {
  id: string;
  title: string;
  creator: string;
  views: number;
  likes: number;
  trendPercent: number;
  trendDirection: "up" | "steady";
  category: "dance" | "comedy" | "education" | "music" | "food";
  thumbnailGradient: string; // Tailwind gradient classes
}
```

Create 12 diverse entries spanning all 5 categories with realistic TikTok-style titles like:
- "POV: When the beat drops perfectly" (dance, 2.4M views)
- "Things your teacher never told you about space" (education, 890K views)
- "5-minute pasta that changed my life" (food, 1.1M views)
- etc.

Each entry gets a unique `thumbnailGradient` using combos from: `from-coral-900/20`, `from-purple-900/20`, `from-blue-900/20`, `from-emerald-900/20`, `from-amber-900/20` -- all `to-surface`.

**Format helpers** -- Create a `formatCount(n: number)` function that returns "1.2M", "890K", "42" etc.

**Imports from Phosphor:** `Play`, `Heart`, `TrendUp`, `ArrowUp`

**Brand bible compliance:**
- Cards: `border border-border rounded-[12px]` with `bg-transparent` and inset shadow (use Card component which handles this)
- All text uses foreground/muted tokens, no hardcoded colors
- Spacing follows 8px base grid
- Hover on cards: `hover:bg-white/[0.02]` (Card component handles this)
  </action>
  <verify>
Run `npx tsc --noEmit` -- no type errors in trending-client.tsx. Visually verify that the file is well-structured and follows established patterns.
  </verify>
  <done>
trending-client.tsx exists with: 12 mock videos across 5 categories, CategoryTabs for filtering, responsive 3-column grid of Card-based video cards with thumbnails/metrics/badges, formatCount helper, all using brand bible tokens.
  </done>
</task>

<task type="auto">
  <name>Task 2: Wire server component and verify page renders</name>
  <files>src/app/(app)/trending/page.tsx</files>
  <action>
Replace the current placeholder `page.tsx` with a server component wrapper that imports and renders `TrendingClient`.

```tsx
import type { Metadata } from "next";
import { TrendingClient } from "./trending-client";

export const metadata: Metadata = {
  title: "Trending | Virtuna",
  description: "Discover trending content and sounds on TikTok.",
};

export default function TrendingPage() {
  return <TrendingClient />;
}
```

This follows the same pattern as the dashboard page (`page.tsx` server wrapper + `dashboard-client.tsx` client component).

After writing, verify:
1. `npx tsc --noEmit` passes with no errors
2. Start dev server (`pnpm dev`) and navigate to `/trending` -- page loads without errors
3. Category tabs switch and filter the video grid
4. Cards display with correct brand styling (borders, radius, inset shadow, spacing)
  </action>
  <verify>
`npx tsc --noEmit` passes. Dev server loads `/trending` without console errors. Page shows header, category tabs, and 12 video cards in a responsive grid.
  </verify>
  <done>
Trending page at /trending renders the full redesigned layout with mock content, category filtering works, and navigation from sidebar reaches the page correctly.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- zero TypeScript errors
2. Navigate to `/trending` via sidebar -- page loads with full UI
3. Category tabs filter video cards correctly (All shows 12, individual categories show subset)
4. Cards have: 12px border-radius, 6% white border, transparent bg, inset shadow, hover state
5. Text uses `text-foreground`, `text-foreground-muted`, `text-foreground-secondary` tokens only
6. Layout is responsive: 1 col mobile, 2 col sm, 3 col lg
7. Badge components render for trend indicators and category pills
</verification>

<success_criteria>
- Trending page is a fully designed UI, not a placeholder
- 12 mock videos with titles, creators, views, likes, trend %, and categories
- CategoryTabs provide working category filtering
- Every visual element uses brand bible tokens (no hardcoded colors)
- Page integrates with sidebar navigation (already wired from Phase 1)
- All 4 requirements covered: TREND-01 (layout), TREND-02 (content), TREND-03 (navigation), TREND-04 (brand patterns)
</success_criteria>

<output>
After completion, create `.planning/phases/03-trending-page/03-01-SUMMARY.md`
</output>
