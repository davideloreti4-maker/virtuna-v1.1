---
phase: 10-final-qa
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/app/sidebar.tsx
  - src/components/app/network-visualization.tsx
  - src/components/app/context-bar.tsx
  - src/components/app/society-selector.tsx
  - src/components/app/view-selector.tsx
  - src/components/app/filter-pills.tsx
  - src/components/app/legend-pills.tsx
  - .planning/phases/10-final-qa/discrepancies/dashboard-shell.md
autonomous: false

must_haves:
  truths:
    - "App dashboard sidebar matches societies.io at 1440px"
    - "Network visualization canvas matches societies.io styling"
    - "Context bar matches societies.io positioning and content"
    - "Society selector modal matches societies.io layout"
    - "View selector dropdown matches societies.io styling"
  artifacts:
    - path: ".planning/phases/10-final-qa/discrepancies/dashboard-shell.md"
      provides: "Documented discrepancies and fixes"
  key_links:
    - from: "src/components/app/sidebar.tsx"
      to: "societies.io reference"
      via: "visual comparison"
---

<objective>
Perform pixel-perfect visual QA on the app dashboard shell components at 1440px desktop viewport.

Purpose: Ensure the app dashboard core structure (sidebar, network visualization, context bar, selectors) matches societies.io reference exactly.

Output: Either verified match or documented discrepancies with fixes applied.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-final-qa/10-CONTEXT.md
@.planning/phases/10-final-qa/10-RESEARCH.md
@src/components/app/sidebar.tsx
@src/components/app/network-visualization.tsx
@src/components/app/context-bar.tsx
@src/components/app/society-selector.tsx
@src/components/app/view-selector.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Capture Reference and Compare Dashboard Shell with v0 MCP</name>
  <files>.planning/phases/10-final-qa/discrepancies/dashboard-shell.md</files>
  <action>
Use Playwright MCP and v0 MCP tools to perform systematic pixel-perfect comparison:

**STEP 1: Capture societies.io Reference Screenshot**
```
# Use Playwright MCP to capture reference
mcp__playwright__browser_navigate: url="https://societies.io/dashboard"
mcp__playwright__browser_resize: width=1440, height=900
mcp__playwright__browser_screenshot: filename="societies-dashboard-shell.png"
```
Save screenshot to `.planning/phases/10-final-qa/screenshots/societies-dashboard-shell.png`

**STEP 2: Analyze societies.io Screenshot with v0**
```
# Use v0 to extract exact styling specs from societies.io screenshot
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-dashboard-shell.png"
```
v0 will output detailed styling specs including:
- Exact colors (hex values)
- Font sizes, weights, line-heights
- Spacing (padding, margins, gaps)
- Border radii, shadows
- Icon sizes

Save v0's output as the "source of truth" in the discrepancy doc.

**STEP 3: Capture Virtuna Screenshot**
```
# Navigate to Virtuna dashboard and capture
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_resize: width=1440, height=900
mcp__playwright__browser_screenshot: filename="virtuna-dashboard-shell.png"
```
Save to `.planning/phases/10-final-qa/screenshots/virtuna-dashboard-shell.png`

**STEP 4: Analyze Virtuna Screenshot with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-dashboard-shell.png"
```
This gives you Virtuna's current styling specs.

**STEP 5: Compare v0 Outputs and Document Discrepancies**
For each component (Sidebar, Network Viz, Context Bar, Society Selector, View Selector):
- Compare the v0 outputs side-by-side
- Document differences in structured markdown table:

```markdown
# Dashboard Shell Discrepancies

## Source of Truth (from v0 analysis of societies.io)
[Paste v0 output for societies.io here]

## Sidebar
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |
|---------|----------|-------------------|--------------|-------------|--------|
| nav-item | font-size | 14px | 16px | -2px | Pending |
| nav-item | padding | 12px 16px | 8px 12px | Different | Pending |
| sidebar | width | 240px | 256px | -16px | Pending |
| sidebar | bg-color | #0f0f10 | #171717 | Different hex | Pending |

## Network Visualization
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |
...
```

**STEP 6: Use v0 Chat for Specific Styling Questions**
For any unclear discrepancies, query v0:
```
mcp__v0__v0_chat_complete:
  message="The societies.io sidebar uses bg-color #0f0f10. What Tailwind class gives this exact color? Current class is bg-zinc-900."
```

**STEP 7: Capture Modal Screenshots**
```
# Open Society Selector modal
mcp__playwright__browser_click: selector="[data-testid='society-selector-trigger']"
mcp__playwright__browser_screenshot: filename="societies-society-modal.png"

# Do same for Virtuna
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_click: selector="[data-testid='society-selector-trigger']"
mcp__playwright__browser_screenshot: filename="virtuna-society-modal.png"

# Analyze both with v0
mcp__v0__v0_generate_from_image: image_path="...societies-society-modal.png"
mcp__v0__v0_generate_from_image: image_path="...virtuna-society-modal.png"
```

Repeat for View Selector dropdown.
  </action>
  <verify>
1. Screenshots exist: `ls .planning/phases/10-final-qa/screenshots/*.png | wc -l` shows at least 4 files
2. Discrepancy doc exists with tables: `grep -c "| Status |" .planning/phases/10-final-qa/discrepancies/dashboard-shell.md` > 0
3. All 5 components documented: `grep -E "^## (Sidebar|Network Visualization|Context Bar|Society Selector|View Selector)" .planning/phases/10-final-qa/discrepancies/dashboard-shell.md | wc -l` = 5
  </verify>
  <done>All dashboard shell components analyzed with v0 MCP and discrepancies documented with exact values from societies.io</done>
</task>

<task type="auto">
  <name>Task 2: Fix Dashboard Shell Discrepancies Using v0 Recommendations</name>
  <files>
    src/components/app/sidebar.tsx
    src/components/app/network-visualization.tsx
    src/components/app/context-bar.tsx
    src/components/app/society-selector.tsx
    src/components/app/view-selector.tsx
    src/components/app/filter-pills.tsx
    src/components/app/legend-pills.tsx
  </files>
  <action>
For each discrepancy identified in Task 1, use v0 to get exact Tailwind fixes:

**STEP 1: Get Tailwind Class Recommendations from v0**
For each discrepancy row, query v0:
```
mcp__v0__v0_chat_complete:
  message="I need to match this exact styling in Tailwind:
  - Background color: #0f0f10
  - Font size: 14px
  - Padding: 12px 16px
  - Border radius: 8px
  What are the exact Tailwind classes? If no exact match exists, what's the closest or how do I use arbitrary values?"
```

v0 will respond with something like:
- `bg-[#0f0f10]` for exact color
- `text-sm` for 14px (or `text-[14px]` if exact needed)
- `px-4 py-3` for padding (or `p-[12px_16px]`)
- `rounded-lg` for 8px radius

**STEP 2: Apply Fixes Component by Component**

For each component file, apply the v0-recommended Tailwind classes:

**Sidebar (src/components/app/sidebar.tsx):**
- Update width class (e.g., `w-60` -> `w-[240px]`)
- Update background color (e.g., `bg-zinc-900` -> `bg-[#0f0f10]`)
- Update nav item padding, font-size, hover states

**Network Visualization (src/components/app/network-visualization.tsx):**
- Update dot colors
- Update line opacity
- Update canvas dimensions

**Context Bar (src/components/app/context-bar.tsx):**
- Update height, background
- Update filter pills styling
- Update legend positioning

**Society Selector (src/components/app/society-selector.tsx):**
- Update modal width, padding
- Update card layout, hover states
- Update gradient backgrounds

**View Selector (src/components/app/view-selector.tsx):**
- Update dropdown width
- Update checkmark positioning
- Update role color badges

**STEP 3: Verify Each Fix with Playwright Screenshot**
After fixing each component:
```
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_resize: width=1440, height=900
mcp__playwright__browser_screenshot: filename="virtuna-dashboard-shell-fixed.png"

# Analyze with v0 to confirm match
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-dashboard-shell-fixed.png"
```

Compare v0's new output against societies.io source of truth.

**STEP 4: Update Discrepancy Doc**
For each fixed item, update Status column from "Pending" to "Fixed".

**DO NOT CHANGE:**
- Content text (mock data can differ)
- Functionality (just styling)
- Component structure (only className changes)
  </action>
  <verify>
1. Build passes: `npm run build` exits 0
2. No TypeScript errors: build output has no type errors
3. All discrepancies marked fixed: `grep -c "| Fixed |" .planning/phases/10-final-qa/discrepancies/dashboard-shell.md` equals total discrepancy count
  </verify>
  <done>All sidebar, network viz, context bar, society selector, view selector discrepancies fixed with v0-recommended Tailwind classes</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Human Verification of Dashboard Shell</name>
  <what-built>Fixed dashboard shell components to match societies.io using v0 MCP analysis</what-built>
  <how-to-verify>
1. Open https://virtuna-v11.vercel.app/dashboard at 1440x900 viewport
2. Open societies.io dashboard side-by-side (or use PerfectPixel overlay)
3. Verify:
   - Sidebar looks identical (width, colors, spacing, icons)
   - Network visualization matches (dot sizes, colors, animation)
   - Context bar matches (height, filter pills, legend)
4. Click Society Selector - verify modal matches
5. Click View Selector - verify dropdown matches
6. Test hover states on all interactive elements
  </how-to-verify>
  <resume-signal>Type "approved" if shell matches, or describe remaining discrepancies</resume-signal>
</task>

</tasks>

<verification>
- Dashboard shell components visually match societies.io at 1440px
- No regression in functionality
- Build passes without errors
</verification>

<success_criteria>
- Sidebar width, colors, typography match societies.io
- Network visualization styling matches
- Context bar and filter pills match
- Society selector modal matches
- View selector dropdown matches
- Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/10-final-qa/10-01-SUMMARY.md`
</output>
