---
phase: 10-final-qa
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/app/content-form.tsx
  - src/components/app/survey-form.tsx
  - src/components/app/test-type-selector.tsx
  - src/components/app/simulation/loading-phases.tsx
  - src/components/app/simulation/results-panel.tsx
  - src/components/app/simulation/impact-score.tsx
  - src/components/app/simulation/attention-breakdown.tsx
  - src/components/app/simulation/variants-section.tsx
  - src/components/app/simulation/insights-section.tsx
  - src/components/app/simulation/themes-section.tsx
  - src/components/app/test-history-list.tsx
  - src/components/app/test-history-item.tsx
  - src/components/app/delete-test-modal.tsx
  - .planning/phases/10-final-qa/discrepancies/dashboard-content.md
autonomous: false

must_haves:
  truths:
    - "Test creation forms match societies.io styling at 1440px"
    - "Simulation loading phases match societies.io animations"
    - "Results panel matches societies.io layout and colors"
    - "Test history list matches societies.io sidebar styling"
  artifacts:
    - path: ".planning/phases/10-final-qa/discrepancies/dashboard-content.md"
      provides: "Documented discrepancies and fixes for forms/results"
  key_links:
    - from: "src/components/app/content-form.tsx"
      to: "societies.io reference"
      via: "visual comparison"
    - from: "src/components/app/simulation/results-panel.tsx"
      to: "societies.io reference"
      via: "visual comparison"
---

<objective>
Perform pixel-perfect visual QA on app dashboard content: test forms, simulation loading, results panel, and history list.

Purpose: Ensure the core app functionality screens (form input, simulation, results display, history) match societies.io reference exactly.

Output: Either verified match or documented discrepancies with fixes applied.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/10-final-qa/10-CONTEXT.md
@.planning/phases/10-final-qa/10-RESEARCH.md
@src/components/app/content-form.tsx
@src/components/app/survey-form.tsx
@src/components/app/test-type-selector.tsx
@src/components/app/simulation/loading-phases.tsx
@src/components/app/simulation/results-panel.tsx
@src/components/app/simulation/impact-score.tsx
@src/components/app/simulation/attention-breakdown.tsx
@src/components/app/simulation/variants-section.tsx
@src/components/app/simulation/insights-section.tsx
@src/components/app/simulation/themes-section.tsx
@src/components/app/test-history-list.tsx
@src/components/app/test-history-item.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compare Forms, Simulation, and Results with v0 MCP</name>
  <files>.planning/phases/10-final-qa/discrepancies/dashboard-content.md</files>
  <action>
Use Playwright MCP and v0 MCP tools to perform systematic comparison:

**STEP 1: Capture Test Type Selector Modal**
```
# societies.io
mcp__playwright__browser_navigate: url="https://societies.io/dashboard"
mcp__playwright__browser_resize: width=1440, height=900
mcp__playwright__browser_click: selector="[data-testid='new-test-button']"
mcp__playwright__browser_wait: ms=500  # Wait for modal animation
mcp__playwright__browser_screenshot: filename="societies-test-selector.png"

# Virtuna
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_click: selector="[data-testid='new-test-button']"
mcp__playwright__browser_wait: ms=500
mcp__playwright__browser_screenshot: filename="virtuna-test-selector.png"
```

**STEP 2: Analyze Test Selector with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-test-selector.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-test-selector.png"
```
Compare v0 outputs for: modal width, category tabs, type card grid, icon sizes, hover states, typography, colors.

**STEP 3: Capture Content Form State**
```
# Select a test type to show the form
# societies.io
mcp__playwright__browser_click: selector="[data-testid='test-type-tiktok']"
mcp__playwright__browser_wait: ms=300
mcp__playwright__browser_screenshot: filename="societies-content-form.png"

# Virtuna
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_click: selector="[data-testid='new-test-button']"
mcp__playwright__browser_click: selector="[data-testid='test-type-tiktok']"
mcp__playwright__browser_screenshot: filename="virtuna-content-form.png"
```

**STEP 4: Analyze Forms with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-content-form.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-content-form.png"
```
Compare: textarea styling, placeholder text color, action buttons, border colors, focus states.

**STEP 5: Capture Results Panel**
```
# Navigate to a completed test result
# societies.io
mcp__playwright__browser_navigate: url="https://societies.io/dashboard/test/[test-id]"
mcp__playwright__browser_screenshot: filename="societies-results-panel.png"

# Virtuna
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard/test/[test-id]"
mcp__playwright__browser_screenshot: filename="virtuna-results-panel.png"
```

**STEP 6: Analyze Results Panel with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-results-panel.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-results-panel.png"
```
Compare each section:
- Impact Score: label positioning, score display, color coding
- Attention Breakdown: bar colors (red/amber/gray), percentages
- Variants Section: card layout, variant labels
- Insights: bullet styling, text formatting
- Themes: accordion behavior, theme tags

**STEP 7: Capture Test History Sidebar**
```
# Focus on sidebar area
mcp__playwright__browser_screenshot:
  filename="societies-test-history.png"
  clip={x: 0, y: 0, width: 300, height: 900}  # Left sidebar area

mcp__playwright__browser_screenshot:
  filename="virtuna-test-history.png"
  clip={x: 0, y: 0, width: 300, height: 900}
```

**STEP 8: Analyze History with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-test-history.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-test-history.png"
```
Compare: item padding, icon sizes, date formatting, hover states, active item indicator.

**STEP 9: Document All Discrepancies**
Create structured markdown with v0 outputs as source of truth:

```markdown
# Dashboard Content Discrepancies

## Source of Truth (v0 analysis of societies.io)

### Test Type Selector
[Paste v0 output]

### Content Form
[Paste v0 output]

### Results Panel
[Paste v0 output]

### Test History
[Paste v0 output]

---

## Test Type Selector Discrepancies
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |
|---------|----------|-------------------|--------------|-------------|--------|

## Content Form Discrepancies
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |

## Results Panel Discrepancies
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |

## Test History Discrepancies
| Element | Property | societies.io (v0) | Virtuna (v0) | Discrepancy | Status |
```
  </action>
  <verify>
1. Screenshots exist: `ls .planning/phases/10-final-qa/screenshots/*content*.png .planning/phases/10-final-qa/screenshots/*form*.png .planning/phases/10-final-qa/screenshots/*results*.png .planning/phases/10-final-qa/screenshots/*history*.png 2>/dev/null | wc -l` >= 6
2. Discrepancy doc has tables: `grep -c "| Status |" .planning/phases/10-final-qa/discrepancies/dashboard-content.md` >= 4
3. All sections documented: `grep -E "^## (Test Type Selector|Content Form|Results Panel|Test History)" .planning/phases/10-final-qa/discrepancies/dashboard-content.md | wc -l` = 4
  </verify>
  <done>All dashboard content components (type selector, forms, results, history) analyzed with v0 MCP and discrepancies documented</done>
</task>

<task type="auto">
  <name>Task 2: Fix Dashboard Content Discrepancies Using v0 Recommendations</name>
  <files>
    src/components/app/content-form.tsx
    src/components/app/survey-form.tsx
    src/components/app/test-type-selector.tsx
    src/components/app/simulation/loading-phases.tsx
    src/components/app/simulation/results-panel.tsx
    src/components/app/simulation/impact-score.tsx
    src/components/app/simulation/attention-breakdown.tsx
    src/components/app/simulation/variants-section.tsx
    src/components/app/simulation/insights-section.tsx
    src/components/app/simulation/themes-section.tsx
    src/components/app/test-history-list.tsx
    src/components/app/test-history-item.tsx
    src/components/app/delete-test-modal.tsx
  </files>
  <action>
For each discrepancy, use v0 to get exact Tailwind fixes:

**STEP 1: Query v0 for Tailwind Recommendations**
For each discrepancy category, batch query v0:

```
mcp__v0__v0_chat_complete:
  message="I need to match these exact societies.io styles in Tailwind:

  Test Type Selector Modal:
  - Modal width: 640px
  - Card padding: 16px
  - Icon size: 24px
  - Border radius: 12px
  - Background: #1a1a1a

  What are the exact Tailwind classes for each?"
```

```
mcp__v0__v0_chat_complete:
  message="For a textarea form input matching societies.io:
  - Border color: #333
  - Focus border: #10b981 (emerald)
  - Placeholder color: #666
  - Padding: 16px
  - Border radius: 8px

  What Tailwind classes match this exactly?"
```

```
mcp__v0__v0_chat_complete:
  message="For attention breakdown bars in a results panel:
  - Hook bar: red #ef4444
  - Retain bar: amber #f59e0b
  - Action bar: zinc #71717a
  - Bar height: 8px
  - Border radius: 4px

  What Tailwind classes should I use?"
```

**STEP 2: Apply Fixes by Component**

**Test Type Selector (src/components/app/test-type-selector.tsx):**
- Modal container width and padding
- Category tab styling
- Type card grid layout
- Icon sizes and colors
- Hover state transitions

**Content Form (src/components/app/content-form.tsx):**
- Textarea border and focus states
- Placeholder text styling
- Submit button positioning
- Character counter styling

**Survey Form (src/components/app/survey-form.tsx):**
- Same form styling as content form

**Results Panel Components:**
- `impact-score.tsx`: Score circle colors, label positioning
- `attention-breakdown.tsx`: Bar colors (red/amber/zinc), percentage labels
- `variants-section.tsx`: Card layout, variant badges
- `insights-section.tsx`: Bullet point styling, text sizes
- `themes-section.tsx`: Accordion expand/collapse, tag styling

**Test History (src/components/app/test-history-list.tsx, test-history-item.tsx):**
- Item padding and spacing
- Icon sizes
- Date formatting color
- Active item left border
- Hover background

**Delete Modal (src/components/app/delete-test-modal.tsx):**
- Modal styling consistent with other modals

**STEP 3: Verify Each Fix with Screenshot Comparison**
After fixing each component group:
```
mcp__playwright__browser_navigate: url="http://localhost:3000/dashboard"
mcp__playwright__browser_screenshot: filename="virtuna-content-fixed.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-content-fixed.png"
```
Compare new v0 output against societies.io source of truth.

**STEP 4: Update Discrepancy Doc**
Mark each fixed item: Status = "Fixed"

**DO NOT CHANGE:**
- Content/data (can differ)
- Functionality
- Component logic
  </action>
  <verify>
1. Build passes: `npm run build` exits 0
2. No TypeScript errors
3. Discrepancies marked fixed: `grep -c "| Fixed |" .planning/phases/10-final-qa/discrepancies/dashboard-content.md` matches total row count
  </verify>
  <done>All form, simulation, results, and history discrepancies fixed with v0-recommended Tailwind classes</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Human Verification of Dashboard Content</name>
  <what-built>Fixed dashboard content components (forms, results, history) using v0 MCP analysis</what-built>
  <how-to-verify>
1. Open Virtuna dashboard at 1440x900
2. Open Test Type Selector - verify modal matches societies.io
3. Select TikTok test - verify form styling matches
4. Type content and submit - verify loading animation matches
5. View results - verify Impact Score, Attention Breakdown, Variants, Insights, Themes all match
6. Check sidebar history list styling
7. Open delete modal via three-dot menu - verify modal matches
  </how-to-verify>
  <resume-signal>Type "approved" if content matches, or describe remaining discrepancies</resume-signal>
</task>

</tasks>

<verification>
- Dashboard content components visually match societies.io at 1440px
- Complete test flow works (type select -> form -> simulate -> results -> history)
- Build passes without errors
</verification>

<success_criteria>
- Test type selector modal matches societies.io
- Content/Survey forms match societies.io
- Simulation loading phases match
- Results panel (all sections) matches
- Test history list matches
- Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/10-final-qa/10-02-SUMMARY.md`
</output>
