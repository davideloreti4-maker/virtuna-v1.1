---
phase: 10-final-qa
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/app/settings/settings-page.tsx
  - src/components/app/settings/profile-section.tsx
  - src/components/app/settings/account-section.tsx
  - src/components/app/settings/notifications-section.tsx
  - src/components/app/settings/team-section.tsx
  - src/components/app/settings/billing-section.tsx
  - src/components/app/leave-feedback-modal.tsx
  - .planning/phases/10-final-qa/discrepancies/settings.md
autonomous: false

must_haves:
  truths:
    - "Settings page layout matches societies.io design language at 1440px"
    - "All 5 settings tabs styled consistently"
    - "Form inputs and buttons match app-wide styling"
    - "Modals (feedback, delete account) match societies.io patterns"
  artifacts:
    - path: ".planning/phases/10-final-qa/discrepancies/settings.md"
      provides: "Documented discrepancies and fixes for settings"
  key_links:
    - from: "src/components/app/settings/settings-page.tsx"
      to: "societies.io design language"
      via: "visual comparison"
---

<objective>
Perform visual QA on the settings page to ensure it matches societies.io design language.

Purpose: Settings is a custom screen (societies.io may not have exact equivalent), so ensure it uses the same design patterns, colors, spacing, and typography as the rest of the app.

Output: Either verified design language match or documented discrepancies with fixes applied.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/10-final-qa/10-CONTEXT.md
@.planning/phases/10-final-qa/10-RESEARCH.md
@src/components/app/settings/settings-page.tsx
@src/components/app/settings/profile-section.tsx
@src/components/app/settings/account-section.tsx
@src/components/app/settings/notifications-section.tsx
@src/components/app/settings/team-section.tsx
@src/components/app/settings/billing-section.tsx
@src/components/app/leave-feedback-modal.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Compare Settings Against Design Language with v0 MCP</name>
  <files>.planning/phases/10-final-qa/discrepancies/settings.md</files>
  <action>
Use Playwright MCP and v0 MCP to establish design language patterns and compare settings:

**STEP 1: Capture societies.io Design Patterns Reference**
Capture key UI patterns from societies.io dashboard that settings should follow:
```
# Capture form inputs pattern
mcp__playwright__browser_navigate: url="https://societies.io/dashboard"
mcp__playwright__browser_resize: width=1440, height=900
# Find a form/input area in dashboard
mcp__playwright__browser_screenshot: filename="societies-form-patterns.png"

# Capture button patterns
mcp__playwright__browser_screenshot: filename="societies-button-patterns.png"

# Capture modal patterns (if visible)
mcp__playwright__browser_click: selector="[data-testid='settings-trigger']"  # or similar
mcp__playwright__browser_screenshot: filename="societies-modal-pattern.png"
```

**STEP 2: Analyze societies.io Design Language with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/societies-form-patterns.png"
```

Extract and document the design language specs:
- Input field styling: border color, focus state, padding, border-radius
- Button styling: primary/secondary variants, padding, colors, hover states
- Card styling: background, border, shadow, border-radius
- Typography: heading sizes, body text, label text
- Spacing patterns: section padding, element gaps
- Color palette: backgrounds, borders, text colors

**STEP 3: Capture Virtuna Settings - All Tabs**
```
# Profile tab
mcp__playwright__browser_navigate: url="http://localhost:3000/settings"
mcp__playwright__browser_resize: width=1440, height=900
mcp__playwright__browser_screenshot: filename="virtuna-settings-profile.png"

# Account tab
mcp__playwright__browser_click: selector="[data-testid='settings-tab-account']"
mcp__playwright__browser_screenshot: filename="virtuna-settings-account.png"

# Notifications tab
mcp__playwright__browser_click: selector="[data-testid='settings-tab-notifications']"
mcp__playwright__browser_screenshot: filename="virtuna-settings-notifications.png"

# Team tab
mcp__playwright__browser_click: selector="[data-testid='settings-tab-team']"
mcp__playwright__browser_screenshot: filename="virtuna-settings-team.png"

# Billing tab
mcp__playwright__browser_click: selector="[data-testid='settings-tab-billing']"
mcp__playwright__browser_screenshot: filename="virtuna-settings-billing.png"
```

**STEP 4: Analyze Each Settings Tab with v0**
```
mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-profile.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-account.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-notifications.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-team.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-billing.png"
```

**STEP 5: Query v0 for Design Language Consistency Check**
```
mcp__v0__v0_chat_complete:
  message="Compare these two UI analyses. The first is the design language from societies.io, the second is Virtuna's settings page. Identify any inconsistencies in:
  - Input field styling
  - Button styling
  - Card styling
  - Typography
  - Spacing
  - Colors

  societies.io design language:
  [paste v0 output from Step 2]

  Virtuna settings:
  [paste v0 output from Step 4]"
```

**STEP 6: Capture Leave Feedback Modal**
```
mcp__playwright__browser_click: selector="[data-testid='leave-feedback-button']"
mcp__playwright__browser_wait: ms=300
mcp__playwright__browser_screenshot: filename="virtuna-feedback-modal.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-feedback-modal.png"
```

**STEP 7: Document Design Language Comparison**
```markdown
# Settings Page Design Language Comparison

## Source of Truth: societies.io Design Language (from v0)
[Paste v0 output with design specs]

### Input Fields
- Border: [value]
- Focus border: [value]
- Padding: [value]
- Border radius: [value]

### Buttons
- Primary: [colors, padding, radius]
- Secondary: [colors, padding, radius]

### Cards
- Background: [value]
- Border: [value]
- Shadow: [value]

### Typography
- Headings: [sizes, weights]
- Body: [size, line-height]
- Labels: [size, color]

---

## Profile Section
| Element | Design Language | Virtuna | Consistent? | Status |
|---------|-----------------|---------|-------------|--------|
| Avatar container | [spec] | [actual] | Yes/No | Pending |
| Name input | [spec] | [actual] | Yes/No | Pending |
| Save button | [spec] | [actual] | Yes/No | Pending |

## Account Section
| Element | Design Language | Virtuna | Consistent? | Status |

## Notifications Section
| Element | Design Language | Virtuna | Consistent? | Status |

## Team Section
| Element | Design Language | Virtuna | Consistent? | Status |

## Billing Section
| Element | Design Language | Virtuna | Consistent? | Status |

## Leave Feedback Modal
| Element | Design Language | Virtuna | Consistent? | Status |
```
  </action>
  <verify>
1. Screenshots exist: `ls .planning/phases/10-final-qa/screenshots/virtuna-settings-*.png | wc -l` >= 5
2. Design language documented: `grep "## Source of Truth" .planning/phases/10-final-qa/discrepancies/settings.md`
3. All tabs documented: `grep -E "^## (Profile|Account|Notifications|Team|Billing|Leave Feedback)" .planning/phases/10-final-qa/discrepancies/settings.md | wc -l` = 6
  </verify>
  <done>Settings design language comparison completed for all 5 tabs plus Leave Feedback modal with v0 analysis</done>
</task>

<task type="auto">
  <name>Task 2: Fix Settings Design Language Inconsistencies Using v0</name>
  <files>
    src/components/app/settings/settings-page.tsx
    src/components/app/settings/profile-section.tsx
    src/components/app/settings/account-section.tsx
    src/components/app/settings/notifications-section.tsx
    src/components/app/settings/team-section.tsx
    src/components/app/settings/billing-section.tsx
    src/components/app/leave-feedback-modal.tsx
  </files>
  <action>
For each design language inconsistency, use v0 to get exact Tailwind fixes:

**STEP 1: Query v0 for Unified Design System Classes**
```
mcp__v0__v0_chat_complete:
  message="Based on societies.io design language, give me a Tailwind class reference for a consistent settings page:

  Design language specs:
  - Input border: #333, focus: emerald-500
  - Input padding: 12px 16px
  - Input radius: 8px
  - Button primary: emerald-600, hover: emerald-500, padding: 10px 20px
  - Button secondary: zinc-800, hover: zinc-700
  - Card bg: zinc-900, border: zinc-800, radius: 12px
  - Section heading: text-lg font-semibold
  - Label: text-sm text-zinc-400

  Provide exact Tailwind classes for each element type."
```

**STEP 2: Apply Consistent Styling to Each Section**

**Settings Page Container (settings-page.tsx):**
- Tab navigation styling (match sidebar nav items from dashboard)
- Content area padding and max-width
- Section spacing

**Profile Section (profile-section.tsx):**
- Avatar component: border, size, background
- Input fields: Use design language input classes
- Save button: Use design language primary button

**Account Section (account-section.tsx):**
- Email/password inputs: Same as profile inputs
- Danger zone: red-500/10 background, red-500 border
- Delete button: red variant button

**Notifications Section (notifications-section.tsx):**
- Toggle switches: emerald-500 when on, zinc-700 when off
- Toggle labels: design language label styling
- Section groups: design language card styling

**Team Section (team-section.tsx):**
- Member cards: design language card styling
- Role badges: owner=amber-500, admin=blue-500, member=zinc-500
- Invite input: design language input styling

**Billing Section (billing-section.tsx):**
- Credits bar: emerald gradient (from-emerald-600 to-emerald-400)
- Plan cards: design language card styling
- Stripe button: design language secondary button

**Leave Feedback Modal (leave-feedback-modal.tsx):**
- Modal container: match other app modals
- Textarea: design language input styling
- Submit button: design language primary button

**STEP 3: Verify with v0 After Fixes**
```
# Re-capture settings after fixes
mcp__playwright__browser_navigate: url="http://localhost:3000/settings"
mcp__playwright__browser_screenshot: filename="virtuna-settings-fixed.png"

mcp__v0__v0_generate_from_image:
  image_path=".planning/phases/10-final-qa/screenshots/virtuna-settings-fixed.png"

# Ask v0 to verify consistency
mcp__v0__v0_chat_complete:
  message="Does this settings page now match the societies.io design language? Check:
  - Input styling consistency
  - Button styling consistency
  - Card styling consistency
  - Typography consistency

  [paste new v0 output]"
```

**STEP 4: Update Discrepancy Doc**
Mark Consistent? = "Yes" and Status = "Fixed" for each resolved item.

**DO NOT CHANGE:**
- Functionality
- Content structure
- Tab organization
  </action>
  <verify>
1. Build passes: `npm run build` exits 0
2. No TypeScript errors
3. All items marked consistent: `grep -c "| Yes |" .planning/phases/10-final-qa/discrepancies/settings.md` should be high
4. All items fixed: `grep -c "| Fixed |" .planning/phases/10-final-qa/discrepancies/settings.md` matches inconsistency count
  </verify>
  <done>Settings page uses consistent design language with rest of app, verified by v0</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 3: Human Verification of Settings</name>
  <what-built>Settings page aligned to societies.io design language using v0 MCP analysis</what-built>
  <how-to-verify>
1. Open Virtuna settings page at 1440x900 (/settings)
2. Check each tab:
   - Profile: Avatar, form fields, save button
   - Account: Email/password, danger zone
   - Notifications: Toggle switches, labels
   - Team: Member cards, role badges
   - Billing: Credits bar, plan info
3. Open Leave Feedback modal (sidebar) - verify styling
4. Compare overall feel to dashboard - should feel like same app
  </how-to-verify>
  <resume-signal>Type "approved" if settings matches design language, or describe inconsistencies</resume-signal>
</task>

</tasks>

<verification>
- Settings uses consistent design language with app
- All tabs functional and styled consistently
- Build passes without errors
</verification>

<success_criteria>
- Settings tabs use same styling patterns as dashboard
- Form inputs match app-wide input styling
- Buttons match app button variants
- Modals match app modal patterns
- Human verification approved
</success_criteria>

<output>
After completion, create `.planning/phases/10-final-qa/10-03-SUMMARY.md`
</output>
