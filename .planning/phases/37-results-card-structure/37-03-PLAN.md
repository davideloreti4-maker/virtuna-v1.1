---
phase: 35-results-card-structure
plan: 03
type: execute
wave: 2
depends_on: ["35-01", "35-02"]
files_modified:
  - src/components/viral-results/ViralResultsCard.tsx
  - src/components/viral-results/ConfidenceBadge.tsx
  - src/components/viral-results/RemixCTA.tsx
  - src/components/viral-results/index.ts
  - src/app/(marketing)/viral-results-showcase/page.tsx
autonomous: false

must_haves:
  truths:
    - "Results card displays hero score with ring animation"
    - "Factor breakdown renders below score with expandable cards"
    - "Sticky CTA button for Remix stays visible on scroll"
    - "Confidence badge shows data quality indicator"
    - "Showcase page demonstrates full component composition"
  artifacts:
    - path: "src/components/viral-results/ViralResultsCard.tsx"
      provides: "Complete results card composition"
      min_lines: 100
    - path: "src/components/viral-results/ConfidenceBadge.tsx"
      provides: "Confidence level indicator"
      min_lines: 20
    - path: "src/components/viral-results/RemixCTA.tsx"
      provides: "Sticky remix button with selection summary"
      min_lines: 40
    - path: "src/app/(marketing)/viral-results-showcase/page.tsx"
      provides: "Visual showcase for verification"
      min_lines: 60
  key_links:
    - from: "src/components/viral-results/ViralResultsCard.tsx"
      to: "src/components/viral-results/ViralScoreRing.tsx"
      via: "imports and renders ViralScoreRing"
      pattern: "ViralScoreRing"
    - from: "src/components/viral-results/ViralResultsCard.tsx"
      to: "src/components/viral-results/FactorsList.tsx"
      via: "imports and renders FactorsList"
      pattern: "FactorsList"
    - from: "src/components/viral-results/ViralResultsCard.tsx"
      to: "src/components/viral-results/RemixCTA.tsx"
      via: "renders sticky CTA at bottom"
      pattern: "RemixCTA"
---

<objective>
Compose all viral results components into the complete ViralResultsCard and create a visual showcase for verification.

Purpose: Assemble the final "wow moment" results card that users see after viral prediction analysis
Output: ViralResultsCard component with sticky CTA, confidence badge, and full visual showcase
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/35-results-card-structure/35-CONTEXT.md
@.planning/phases/35-results-card-structure/35-01-SUMMARY.md (if exists)
@.planning/phases/35-results-card-structure/35-02-SUMMARY.md (if exists)
@src/components/viral-results/ViralScoreRing.tsx
@src/components/viral-results/FactorsList.tsx
@src/components/primitives/GlassPanel.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ConfidenceBadge component</name>
  <files>src/components/viral-results/ConfidenceBadge.tsx</files>
  <action>
Create a small badge component showing confidence level:

**Props interface:**
```typescript
interface ConfidenceBadgeProps {
  confidence: ConfidenceLevel;  // "High" | "Medium" | "Low"
  reason?: string;              // Optional tooltip/explanation
  className?: string;
}
```

**Implementation:**
- Small pill/badge shape
- Color coding:
  - High: green tint (bg-emerald-500/20 text-emerald-400)
  - Medium: yellow tint (bg-yellow-500/20 text-yellow-400)
  - Low: red tint (bg-red-500/20 text-red-400)
- Shows text like "High confidence" or just "High"
- Optional info icon with tooltip for `reason`
- Size: small (text-xs or text-sm, px-2 py-1)

**Example:**
```tsx
<span className={cn(
  "inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",
  confidence === "High" && "bg-emerald-500/20 text-emerald-400",
  confidence === "Medium" && "bg-yellow-500/20 text-yellow-400",
  confidence === "Low" && "bg-red-500/20 text-red-400",
)}>
  {confidence} confidence
  {reason && <Info className="h-3 w-3 opacity-70" />}
</span>
```
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>ConfidenceBadge renders with appropriate color and optional reason tooltip</done>
</task>

<task type="auto">
  <name>Task 2: Create RemixCTA component</name>
  <files>src/components/viral-results/RemixCTA.tsx</files>
  <action>
Create the sticky call-to-action button for the remix flow:

**Props interface:**
```typescript
interface RemixCTAProps {
  selectedFactorIds: Set<string>;
  totalFactors: number;
  onRemix: () => void;
  disabled?: boolean;
  className?: string;
}
```

**Implementation:**

1. **Visual structure:**
   - Full-width container with glass background
   - Selection summary: "X factors selected" or "Select factors to remix"
   - Large primary button: "Create your version" or "Remix this content"
   - Button uses accent color (orange or gradient)

2. **Selection summary:**
   - Shows count when factors selected: "3 of 6 factors selected"
   - Hint text when none selected: "Select factors to carry into remix"
   - Subtle styling (text-secondary)

3. **Button styling:**
   - Matches hero CTA button style from landing page
   - Full width on mobile, auto width on desktop
   - Hover state with brightness/scale effect
   - Disabled state when no factors selected (optional, or enable anyway)

4. **Sticky positioning:**
   - Container uses `sticky bottom-0`
   - Glass blur background to separate from content above
   - Border top for visual separation
   - Padding for touch targets

**Example structure:**
```tsx
<div className={cn(
  "sticky bottom-0 z-10",
  "border-t border-white/10",
  "bg-surface/80 backdrop-blur-md",
  "p-4",
  className
)}>
  <div className="flex flex-col gap-3">
    <p className="text-sm text-text-secondary text-center">
      {selectedFactorIds.size > 0
        ? `${selectedFactorIds.size} of ${totalFactors} factors selected`
        : "Select factors to carry into remix"
      }
    </p>
    <button
      onClick={onRemix}
      disabled={disabled}
      className={cn(
        "w-full py-3 px-6 rounded-xl",
        "bg-gradient-to-r from-orange-500 to-pink-500",
        "text-white font-semibold",
        "hover:brightness-110 transition-all",
        "disabled:opacity-50 disabled:cursor-not-allowed"
      )}
    >
      Create your version
    </button>
  </div>
</div>
```
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>RemixCTA renders sticky at bottom with selection summary and prominent button</done>
</task>

<task type="auto">
  <name>Task 3: Create ViralResultsCard composition</name>
  <files>src/components/viral-results/ViralResultsCard.tsx</files>
  <action>
Create the complete viral results card that composes all sub-components:

**Props interface:**
```typescript
interface ViralResultsCardProps {
  result: ViralResult;
  onRemix?: (selectedFactorIds: string[]) => void;
  showRemixCTA?: boolean;
  className?: string;
}
```

**Implementation:**

1. **Container structure:**
   - GlassPanel wrapper or equivalent glass styling
   - Max height with scroll (similar to existing ResultsPanel)
   - Rounded corners, shadow-elevated

2. **Header section:**
   - Title: "Viral Analysis" or "Analysis Results"
   - ConfidenceBadge showing result.confidence
   - Timestamp or generated date (optional)

3. **Hero score section:**
   - ViralScoreRing centered
   - Tier label displayed by the ring component
   - Generous vertical padding/margin

4. **Breakdown section:**
   - Section header: "Factor Breakdown" or "What makes it viral"
   - FactorsList with result.factors
   - Selectable mode when onRemix provided

5. **Sticky CTA section:**
   - RemixCTA at bottom (sticky)
   - Only shown when `showRemixCTA={true}` or `onRemix` provided
   - Passes selection state from FactorsList

6. **State management:**
   - `useState` for selectedFactorIds (Set<string>)
   - Pass to FactorsList and RemixCTA
   - Handle remix button click: call onRemix with array of selected IDs

7. **Animation orchestration:**
   - Score ring animates first (auto on mount)
   - Factors reveal with stagger after ring settles (~1.5s delay)
   - CTA fades in last

**Layout structure:**
```tsx
<GlassPanel className="max-h-[80vh] flex flex-col overflow-hidden">
  {/* Header - fixed */}
  <div className="flex items-center justify-between p-4 border-b border-white/10">
    <h2 className="text-lg font-semibold text-text-primary">Viral Analysis</h2>
    <ConfidenceBadge confidence={result.confidence} reason={result.confidenceReason} />
  </div>

  {/* Scrollable content */}
  <div className="flex-1 overflow-y-auto p-6 space-y-8">
    {/* Hero score */}
    <div className="flex justify-center">
      <ViralScoreRing score={result.overallScore} tier={result.tier} />
    </div>

    {/* Breakdown */}
    <div className="space-y-4">
      <h3 className="text-sm font-medium text-text-secondary">Factor Breakdown</h3>
      <FactorsList
        factors={result.factors}
        selectable={showRemixCTA}
        selectedIds={selectedIds}
        onSelectionChange={setSelectedIds}
      />
    </div>
  </div>

  {/* Sticky CTA */}
  {showRemixCTA && (
    <RemixCTA
      selectedFactorIds={selectedIds}
      totalFactors={result.factors.length}
      onRemix={handleRemix}
    />
  )}
</GlassPanel>
```
  </action>
  <verify>TypeScript compiles and component renders with all sub-components</verify>
  <done>
ViralResultsCard composes:
- Header with confidence badge
- Centered score ring with animation
- Scrollable factor breakdown
- Sticky remix CTA at bottom
  </done>
</task>

<task type="auto">
  <name>Task 4: Create showcase page and update exports</name>
  <files>src/app/(marketing)/viral-results-showcase/page.tsx, src/components/viral-results/index.ts</files>
  <action>
1. **Update barrel export:**
```typescript
// src/components/viral-results/index.ts
export { ViralScoreRing } from './ViralScoreRing';
export { FactorCard } from './FactorCard';
export { FactorProgressBar } from './FactorProgressBar';
export { FactorsList } from './FactorsList';
export { ConfidenceBadge } from './ConfidenceBadge';
export { RemixCTA } from './RemixCTA';
export { ViralResultsCard } from './ViralResultsCard';

// Export types
export type { ViralScoreRingProps } from './ViralScoreRing';
export type { FactorCardProps } from './FactorCard';
export type { FactorsListProps } from './FactorsList';
export type { ViralResultsCardProps } from './ViralResultsCard';
```

2. **Create comprehensive showcase page:**
```typescript
// src/app/(marketing)/viral-results-showcase/page.tsx
"use client";

import { useState } from 'react';
import { ViralResultsCard } from '@/components/viral-results';
import type { ViralResult } from '@/types/viral-results';

// Mock data with realistic factors
const mockHighResult: ViralResult = {
  id: "1",
  overallScore: 87,
  tier: "Viral Ready",
  confidence: "High",
  confidenceReason: "Based on 15+ similar viral videos analyzed",
  factors: [
    {
      id: "hook",
      name: "Hook Strength",
      score: 9,
      maxScore: 10,
      description: "Exceptional opening that stops the scroll",
      details: "Your hook uses the 'pattern interrupt' technique - starting mid-action creates immediate curiosity. The first frame is visually striking and the audio hook reinforces the visual.",
      tips: ["Consider A/B testing a question-based hook", "The current hook works great for entertainment niches"],
    },
    {
      id: "emotional",
      name: "Emotional Triggers",
      score: 8,
      maxScore: 10,
      description: "Strong emotional resonance detected",
      details: "Content hits aspiration and curiosity triggers effectively. The transformation element creates investment in the outcome.",
      tips: ["Adding a relatable struggle moment could boost engagement", "Consider showing the 'before' state longer"],
    },
    {
      id: "shareability",
      name: "Shareability Factor",
      score: 9,
      maxScore: 10,
      description: "High likelihood of shares and saves",
      details: "The content has clear 'I need to show this to someone' moments. The surprise element and practical value drive share behavior.",
    },
    {
      id: "format",
      name: "Format Optimization",
      score: 8,
      maxScore: 10,
      description: "Well-suited for platform algorithms",
      details: "Video length, aspect ratio, and pacing align with current TikTok algorithm preferences. Caption placement doesn't obstruct key visuals.",
      tips: ["Current length (47s) is optimal", "Consider adding on-screen text for sound-off viewing"],
    },
    {
      id: "trend",
      name: "Trend Alignment",
      score: 7,
      maxScore: 10,
      description: "Moderate alignment with current trends",
      details: "Content taps into the transformation trend but could leverage current sounds or challenges for additional reach.",
      tips: ["Trending sound could boost discovery 20-40%", "Consider the 'POV:' format for broader appeal"],
    },
    {
      id: "cta",
      name: "Call-to-Action",
      score: 8,
      maxScore: 10,
      description: "Effective engagement prompts",
      details: "Natural CTA integration that doesn't feel forced. Comment-driving question at end encourages interaction.",
    },
  ],
  generatedAt: new Date(),
};

const mockLowResult: ViralResult = {
  id: "2",
  overallScore: 34,
  tier: "Low Potential",
  confidence: "Medium",
  confidenceReason: "Limited comparison data for this niche",
  factors: [
    {
      id: "hook",
      name: "Hook Strength",
      score: 3,
      maxScore: 10,
      description: "Hook doesn't stop the scroll effectively",
      details: "Opening takes 4+ seconds before anything interesting happens. Users typically decide within 1-2 seconds.",
      tips: ["Start with the most interesting moment", "Add a verbal hook in first second", "Use pattern interrupt technique"],
    },
    // ... more factors
  ],
  generatedAt: new Date(),
};

export default function ViralResultsShowcasePage() {
  const [selectedFactors, setSelectedFactors] = useState<string[]>([]);

  const handleRemix = (factorIds: string[]) => {
    console.log("Remix with factors:", factorIds);
    alert(`Remixing with ${factorIds.length} factors selected`);
  };

  return (
    <div className="min-h-screen bg-bg-base p-4 md:p-8">
      <div className="max-w-4xl mx-auto space-y-12">
        <div>
          <h1 className="text-3xl font-bold text-text-primary mb-2">Viral Results Card Showcase</h1>
          <p className="text-text-secondary">The "wow moment" analysis breakdown</p>
        </div>

        {/* High score example */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-text-primary">High Score (Viral Ready)</h2>
          <ViralResultsCard
            result={mockHighResult}
            showRemixCTA
            onRemix={handleRemix}
          />
        </section>

        {/* Low score example */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-text-primary">Low Score (Low Potential)</h2>
          <ViralResultsCard
            result={mockLowResult}
            showRemixCTA
            onRemix={handleRemix}
          />
        </section>

        {/* Mobile simulation */}
        <section className="space-y-4">
          <h2 className="text-xl font-semibold text-text-primary">Mobile View (375px)</h2>
          <div className="max-w-[375px] mx-auto border border-white/10 rounded-xl overflow-hidden">
            <ViralResultsCard
              result={mockHighResult}
              showRemixCTA
              onRemix={handleRemix}
            />
          </div>
        </section>
      </div>
    </div>
  );
}
```

Ensure all mock factors have meaningful descriptions and some have tips arrays.
  </action>
  <verify>
Build passes: `npm run build`
Showcase page loads at /viral-results-showcase
Both high and low score examples render
Animations play (ring fills, factors stagger in)
CTA sticky at bottom
  </verify>
  <done>
Showcase page displays:
- High score viral result card with all animations
- Low score example showing different tier
- Mobile width simulation
All components exported from barrel
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete viral results card system with:
- Animated score ring (gradient fill, count-up)
- Factor breakdown with accordion expansion
- Sticky remix CTA with selection
- Confidence badge
- Full visual showcase
  </what-built>
  <how-to-verify>
1. Run dev server: `npm run dev`
2. Navigate to http://localhost:3000/viral-results-showcase
3. Verify:
   - Score ring animates with gradient fill (1.5-2s)
   - Score number counts up
   - Tier label appears with correct color
   - Factor cards stagger in after score settles
   - Progress bars animate fill with color coding
   - Clicking factor card expands accordion
   - Checkboxes select factors for remix
   - CTA shows selection count
   - CTA button is sticky on scroll
   - Mobile view (375px simulation) works
   - Overall "screenshot-worthy" premium feel
4. Test reduced motion:
   - Enable "Reduce motion" in system preferences
   - Reload page
   - Verify instant states (no animation)
  </how-to-verify>
  <resume-signal>Type "approved" if the results card looks premium and screenshot-worthy, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. All components exported from @/components/viral-results
3. Showcase page renders at /viral-results-showcase
4. Score ring animation: gradient fill 1.5-2s, count-up number
5. Factor cards: stagger reveal, accordion expand, progress bars animate
6. Sticky CTA: stays visible on scroll, shows selection count
7. Confidence badge: displays with appropriate color
8. Mobile responsive: works at 375px width
9. Reduced motion: instant states, no animations
10. Visual quality: premium, screenshot-worthy appearance
</verification>

<success_criteria>
- ViralResultsCard composes score ring, factors, and CTA
- Animations create anticipation and delight
- Information hierarchy clear: Verdict -> Breakdown -> Actionable
- Sticky CTA impossible to miss
- Factor selection flows into remix action
- Human verification approves visual quality
</success_criteria>

<output>
After completion, create `.planning/phases/35-results-card-structure/35-03-SUMMARY.md`
</output>
