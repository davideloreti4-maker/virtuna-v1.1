---
phase: 02-design-system
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/globals.css
  - src/lib/utils.ts
  - src/app/layout.tsx
  - src/fonts/Satoshi-Regular.woff2
  - src/fonts/Satoshi-Medium.woff2
  - src/fonts/Satoshi-Bold.woff2
autonomous: true

must_haves:
  truths:
    - "Design tokens generate valid Tailwind utilities"
    - "cn() utility merges classes correctly"
    - "Fonts load without flash on page load"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Design tokens via @theme directive"
      contains: "@theme"
    - path: "src/lib/utils.ts"
      provides: "cn() utility function"
      exports: ["cn"]
    - path: "src/app/layout.tsx"
      provides: "Font configuration"
      contains: "font-satoshi"
  key_links:
    - from: "src/app/globals.css"
      to: "Tailwind utilities"
      via: "@theme directive"
      pattern: "--color-background"
    - from: "src/app/layout.tsx"
      to: "CSS variables"
      via: "font class variables"
      pattern: "className.*font"
---

<objective>
Set up design system foundation: design tokens, cn() utility, and fonts.

Purpose: Creates the foundational layer that all other components depend on. Without tokens and utilities, components cannot be styled consistently.
Output: Working design tokens in globals.css, cn() utility in lib/utils.ts, and proper font loading with Funnel Display + Satoshi.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system/02-RESEARCH.md
@.reference/design-tokens.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create cn() utility and design tokens</name>
  <files>
    src/lib/utils.ts
    src/app/globals.css
  </files>
  <action>
1. Create src/lib/utils.ts with the cn() utility:
   - Import clsx and tailwind-merge
   - Export cn function that combines clsx + twMerge
   - Type it correctly with ClassValue from clsx

2. Update src/app/globals.css with @theme directive for Tailwind v4:
   - Keep existing @import "tailwindcss"
   - Add @theme block with all design tokens from .reference/design-tokens.md:

   Colors:
   - --color-background: #0D0D0D
   - --color-background-elevated: #1A1A1A
   - --color-foreground: #FFFFFF
   - --color-foreground-secondary: #F5F5F5
   - --color-foreground-muted: #CCCCCC
   - --color-accent: #E57850
   - --color-border: rgba(255, 255, 255, 0.1)
   - --color-slate: #708090

   Font families (CSS variables - actual fonts loaded in layout.tsx):
   - --font-display: var(--font-funnel-display), sans-serif
   - --font-sans: var(--font-satoshi), ui-sans-serif, system-ui, sans-serif

   Custom font sizes (matching societies.io):
   - --text-hero: 52px
   - --text-section: 40px
   - --text-card-title: 18px

   Border radius:
   - --radius-sm: 4px
   - --radius-md: 8px

   Easing functions:
   - --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1)
   - --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1)

3. Add base styles after @theme:
   - body: bg-background text-foreground font-sans
   - h1, h2: font-display
  </action>
  <verify>
    - npm run build passes
    - Check that Tailwind generates utility classes (bg-background, text-accent, etc.)
  </verify>
  <done>
    - cn() utility exported from src/lib/utils.ts
    - Design tokens defined in globals.css @theme block
    - Build succeeds with tokens generating valid utilities
  </done>
</task>

<task type="auto">
  <name>Task 2: Setup fonts with next/font</name>
  <files>
    src/app/layout.tsx
    src/fonts/Satoshi-Regular.woff2
    src/fonts/Satoshi-Medium.woff2
    src/fonts/Satoshi-Bold.woff2
  </files>
  <action>
1. Download Satoshi font files:
   - Visit https://www.fontshare.com/fonts/satoshi
   - Download Regular (400), Medium (500), Bold (700) woff2 files
   - Place in src/fonts/ directory
   - Note: If download automation fails, create placeholder files and add checkpoint for manual download

2. Update src/app/layout.tsx:
   - Remove Inter font import
   - Import Funnel_Display from next/font/google (it's available there)
   - Import localFont from next/font/local for Satoshi
   - Configure Satoshi with variable: "--font-satoshi"
   - Configure Funnel Display with variable: "--font-funnel-display"
   - Apply both font variables to html element className
   - Update body className to use font-sans (which maps to Satoshi via tokens)

Font configuration:
```typescript
import localFont from "next/font/local";
import { Funnel_Display } from "next/font/google";

const satoshi = localFont({
  src: [
    { path: "../fonts/Satoshi-Regular.woff2", weight: "400", style: "normal" },
    { path: "../fonts/Satoshi-Medium.woff2", weight: "500", style: "normal" },
    { path: "../fonts/Satoshi-Bold.woff2", weight: "700", style: "normal" },
  ],
  variable: "--font-satoshi",
  display: "swap",
});

const funnelDisplay = Funnel_Display({
  subsets: ["latin"],
  weight: ["300", "400", "500", "600", "700"],
  variable: "--font-funnel-display",
  display: "swap",
});
```
  </action>
  <verify>
    - npm run build passes
    - npm run dev and check browser - fonts should load without flash
    - DevTools > Network > Fonts shows Satoshi and Funnel Display loading
  </verify>
  <done>
    - Satoshi font files exist in src/fonts/
    - layout.tsx uses next/font/local for Satoshi
    - layout.tsx uses next/font/google for Funnel Display
    - Both font CSS variables applied to html element
    - No FOUT (flash of unstyled text) on page load
  </done>
</task>

<task type="auto">
  <name>Task 3: Install Phosphor Icons</name>
  <files>package.json</files>
  <action>
Install @phosphor-icons/react package which societies.io uses for icons:

```bash
npm install @phosphor-icons/react
```

This is needed by later components (Header, feature cards, etc.) that use Phosphor icons like Lightning, Brain, UsersThree, Crosshair.
  </action>
  <verify>
    - package.json shows @phosphor-icons/react in dependencies
    - npm run build passes
  </verify>
  <done>
    - @phosphor-icons/react installed
    - Build succeeds
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. `cn("bg-red-500", "bg-blue-500")` returns "bg-blue-500" (tailwind-merge works)
3. `bg-background`, `text-accent`, `font-display` classes generate correct CSS
4. Fonts load in browser without visible flash
5. @phosphor-icons/react importable
</verification>

<success_criteria>
- Design tokens available as Tailwind utilities
- cn() utility works for class merging
- Funnel Display + Satoshi fonts load without FOUT
- Phosphor Icons package installed
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system/02-01-SUMMARY.md`
</output>
