---
phase: 51-video-feed-cards
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/trending/video-card.tsx
  - src/components/trending/velocity-indicator.tsx
  - src/components/trending/video-card-skeleton.tsx
  - src/components/trending/empty-state.tsx
autonomous: true

must_haves:
  truths:
    - "VideoCard displays thumbnail, creator name, view count, date, category pill, and velocity indicator"
    - "VideoCard uses GlassCard with hover='none' wrapped in HoverScale for spring-physics hover"
    - "VelocityIndicator shows colored arrow with multiplier text (green >10x, coral 5-10x, blue <5x)"
    - "VideoCardSkeleton matches VideoCard layout dimensions for zero-shift loading"
    - "EmptyState shows a message when no videos match the active filter"
  artifacts:
    - path: "src/components/trending/video-card.tsx"
      provides: "VideoCard component"
      exports: ["VideoCard"]
    - path: "src/components/trending/velocity-indicator.tsx"
      provides: "VelocityIndicator component"
      exports: ["VelocityIndicator"]
    - path: "src/components/trending/video-card-skeleton.tsx"
      provides: "VideoCardSkeleton component"
      exports: ["VideoCardSkeleton"]
    - path: "src/components/trending/empty-state.tsx"
      provides: "EmptyState component"
      exports: ["EmptyState"]
  key_links:
    - from: "src/components/trending/video-card.tsx"
      to: "@/components/primitives"
      via: "GlassCard, GlassPill imports"
      pattern: "import.*GlassCard|import.*GlassPill"
    - from: "src/components/trending/video-card.tsx"
      to: "@/components/motion"
      via: "HoverScale import"
      pattern: "import.*HoverScale"
    - from: "src/components/trending/video-card.tsx"
      to: "src/types/trending.ts"
      via: "TrendingVideo type import"
      pattern: "import.*TrendingVideo"
---

<objective>
Design the VideoCard visual layout with v0 MCP, then integrate into real design system components.

Purpose: VideoCard is the primary visual element of the trending page. Using v0 to design the layout ensures Raycast-quality visual polish, then integration replaces approximations with real GlassCard, GlassPill, HoverScale primitives.
Output: Four production components -- VideoCard, VelocityIndicator, VideoCardSkeleton, EmptyState.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/BRAND-BIBLE.md
@src/types/trending.ts
@src/components/primitives/GlassCard.tsx
@src/components/primitives/GlassPill.tsx
@src/components/motion/hover-scale.tsx
@src/components/ui/skeleton.tsx
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate VideoCard and EmptyState layouts with v0 MCP</name>
  <files>N/A (v0 output is intermediate)</files>
  <action>
Use `mcp__v0__v0_generate_ui` to design the VideoCard visual layout. Load the tool via ToolSearch first.

**v0 prompt for VideoCard:**

```
Design a VideoCard component for a trending videos dashboard.

DESIGN SYSTEM (Virtuna Brand Bible):
- Background: near-black (#0A0A0B), surfaces: #18191c, elevated: #222326
- Glass cards: frosted panels with colored tints, subtle white border (rgba(255,255,255,0.08))
- Accent: coral #E57850 for CTAs and primary highlights
- Text primary: #FAFAFA, secondary: #9c9c9d, muted: #848586
- Fonts: 'Funnel Display' for headings, 'Satoshi' for body text
- Rounded corners: 12px for cards, 9999px for pills/avatars
- Spacing: 4px base unit, 16-24px card padding, 16-24px card gaps
- Dark premium Raycast aesthetic, iOS 26 liquid glass feel
- Shadow: 0 4px 6px oklch(0 0 0 / 0.15), 0 2px 4px oklch(0 0 0 / 0.1)

CARD LAYOUT REQUIREMENTS:
- Portrait thumbnail (400x500, aspect-ratio 4/5) filling card width with NO padding
- Gradient overlay at bottom of thumbnail for text readability (from transparent to rgba(0,0,0,0.7))
- Below thumbnail: card content area with 16px padding
- Creator row: small avatar (28px circle), display name in white 14px, @handle in muted 12px, date on the right in muted text
- Video title: 15px medium weight, max 2 lines with line-clamp-2, white text
- Bottom row: category tag pill (small, rounded-full, colored background at 20% opacity with matching text) on the left, velocity indicator on the right
- Velocity indicator: multiplier text like "42.3x" with a small arrow icon. Green (#4ade80) for >10x, coral (#E57850) for 5-10x, blue (#60a5fa) for <5x
- Metadata: view count formatted compactly (e.g., "12.4M views") next to the velocity indicator

DATA SHAPE (TypeScript):
interface TrendingVideo {
  id: string;
  title: string;
  thumbnailUrl: string; // 400x500 portrait
  creator: { handle: string; displayName: string; avatarUrl: string };
  views: number;
  likes: number;
  shares: number;
  date: string; // ISO 8601
  category: 'breaking-out' | 'trending-now' | 'rising-again';
  velocity: number; // multiplier like 42.3
}

CARD STYLE:
- Dark card background (#18191c / surface-elevated)
- Subtle white border (1px solid rgba(255,255,255,0.06))
- Rounded-xl (12px)
- No card padding for the thumbnail area (edge-to-edge image)
- Content area below thumbnail has 12-16px padding
- On hover: subtle scale 1.02 with slightly elevated shadow

OUTPUT: Single card component, NOT a grid. Use standard React + Tailwind CSS. Make it look like a premium Raycast-quality dark UI component.
```

After receiving v0 output, if the design needs refinement, use `mcp__v0__v0_chat_complete` to iterate (e.g., adjust thumbnail aspect ratio, fix spacing, improve the velocity indicator layout, refine the gradient overlay).

**Then generate EmptyState with v0:**

```
Design an EmptyState component for when no trending videos match the selected filter.

DESIGN SYSTEM: Same as above (dark premium, #0A0A0B background, #FAFAFA text, coral #E57850 accent).

REQUIREMENTS:
- Centered layout, vertically and horizontally
- Large icon (48px) in a rounded square container (#222326 background, 16px border-radius)
- Use a video/inbox icon concept (empty box or film strip)
- Primary message: "No videos [category label] right now" in 14px medium weight white text
- Secondary message: "Check back soon" in 12px muted text (#848586)
- Subtle border around the entire component (1px solid rgba(255,255,255,0.06))
- Rounded-2xl container with #18191c background
- Generous padding (64px vertical)

Make it feel polished, not like a default empty state.
```

Save both v0 outputs mentally. Do NOT write files yet -- Task 2 handles integration.
  </action>
  <verify>
- v0 generated VideoCard layout code
- v0 generated EmptyState layout code
- Both outputs are visually Raycast-quality (dark glass aesthetic, proper spacing, correct colors)
  </verify>
  <done>v0 has produced visual designs for VideoCard and EmptyState that match the Virtuna brand bible aesthetic</done>
</task>

<task type="auto">
  <name>Task 2: Integrate v0 output into design system components</name>
  <files>
    src/components/trending/video-card.tsx
    src/components/trending/velocity-indicator.tsx
    src/components/trending/video-card-skeleton.tsx
    src/components/trending/empty-state.tsx
  </files>
  <action>
Create the `src/components/trending/` directory and build four production components by integrating v0's visual output with real design system imports.

**A) velocity-indicator.tsx**

Small, self-contained component. Map velocity multiplier to visual state:

```tsx
"use client";

import { TrendingUp, Minus, TrendingDown } from "lucide-react";
import { cn } from "@/lib/utils";

interface VelocityIndicatorProps {
  velocity: number;
  className?: string;
}

// Thresholds: >=10x rising (green), >=5x peaking (coral), <5x declining (blue)
function getVelocityState(velocity: number) {
  if (velocity >= 10) return { label: `${velocity.toFixed(0)}x`, color: "text-green-400", Icon: TrendingUp };
  if (velocity >= 5) return { label: `${velocity.toFixed(0)}x`, color: "text-accent", Icon: Minus };
  return { label: `${velocity.toFixed(1)}x`, color: "text-blue-400", Icon: TrendingDown };
}

export function VelocityIndicator({ velocity, className }: VelocityIndicatorProps) {
  const { label, color, Icon } = getVelocityState(velocity);
  return (
    <span className={cn("inline-flex items-center gap-1 text-xs font-medium", color, className)}>
      <Icon className="h-3 w-3" />
      {label}
    </span>
  );
}
```

**B) video-card.tsx**

Take v0's visual layout and replace:
- Raw `<div>` card wrapper -> `<GlassCard color="orange" hover="none" padding="none">` (inside `<HoverScale>`)
- Raw category pill -> `<GlassPill color="orange" size="sm">`
- Raw `<img>` -> `<Image>` from `next/image`
- Hardcoded colors -> design token classes (`text-foreground`, `text-foreground-secondary`, `text-foreground-muted`)
- Import VelocityIndicator from `./velocity-indicator`

Component structure:
```
HoverScale
  GlassCard (hover="none", padding="none", color="orange")
    <div> (thumbnail wrapper, aspect-[4/5], overflow-hidden, rounded-t-xl)
      Image (fill, object-cover)
      gradient overlay div (absolute bottom, from transparent to black/70)
    </div>
    <div> (content area, p-3 or p-4)
      creator row (avatar + name + handle + relative date)
      title (line-clamp-2)
      bottom row (GlassPill category + VelocityIndicator + view count)
    </div>
```

Props interface:
```tsx
interface VideoCardProps {
  video: TrendingVideo;
  onClick?: () => void;
}
```

Include `formatRelativeDate` helper (inline in the file) for "2d ago" format.
Include `formatCompactNumber` helper (inline) OR import from a shared location.

Category-to-GlassPill color mapping:
- "breaking-out" -> "green" (growth, new)
- "trending-now" -> "orange" (hot, viral)
- "rising-again" -> "blue" (resurfacing)

Make the entire card clickable via the `onClick` prop on the outer wrapper. Add `cursor-pointer` when onClick is provided.

**C) video-card-skeleton.tsx**

Match the VideoCard layout dimensions exactly for zero-layout-shift loading:

```tsx
import { Skeleton } from "@/components/ui/skeleton";

export function VideoCardSkeleton() {
  return (
    <div className="space-y-3 overflow-hidden rounded-xl border border-white/[0.06] bg-surface-elevated">
      <Skeleton className="aspect-[4/5] w-full" />
      <div className="space-y-3 px-3 pb-3">
        <div className="flex items-center gap-2">
          <Skeleton className="h-7 w-7 shrink-0 rounded-full" />
          <Skeleton className="h-3 w-24 rounded-md" />
        </div>
        <Skeleton className="h-4 w-full rounded-md" />
        <Skeleton className="h-4 w-3/4 rounded-md" />
        <div className="flex items-center gap-2">
          <Skeleton className="h-5 w-16 rounded-full" />
          <Skeleton className="h-3 w-12 rounded-md" />
        </div>
      </div>
    </div>
  );
}
```

**D) empty-state.tsx**

Take v0's EmptyState output and integrate. Extract the existing EmptyState from `trending-client.tsx` and move it here, improving with v0's visual polish. Import from `lucide-react` (Inbox icon). Accept `category` prop, use `CATEGORY_LABELS` for the message.

**Important integration rules:**
- Every file must have `"use client"` if it uses hooks or event handlers
- Use `@/components/primitives` for GlassCard, GlassPill
- Use `@/components/motion` for HoverScale
- Use `next/image` for Image (NOT `<img>`)
- Use `@/types/trending` for TrendingVideo, TrendingCategory
- Use `@/lib/utils` for cn()
- Use Tailwind design token classes: text-foreground, text-foreground-secondary, text-foreground-muted, bg-surface, bg-surface-elevated
- GlassCard with `hover="none"` to avoid double-hover (HoverScale handles it)
  </action>
  <verify>
- All four files exist in src/components/trending/
- `pnpm tsc --noEmit` passes
- VideoCard imports GlassCard, GlassPill, HoverScale, Image
- VelocityIndicator uses correct color thresholds
- VideoCardSkeleton matches VideoCard aspect ratio (4/5 thumbnail)
- EmptyState accepts category prop and uses CATEGORY_LABELS
  </verify>
  <done>Four production components created: VideoCard (with GlassCard+HoverScale+GlassPill+Image), VelocityIndicator, VideoCardSkeleton, EmptyState. All use design system imports, not raw Tailwind approximations.</done>
</task>

</tasks>

<verification>
- `pnpm tsc --noEmit` passes with all four new components
- VideoCard correctly wraps GlassCard inside HoverScale
- GlassCard uses `hover="none"` (not "lift") to avoid conflict with HoverScale
- GlassPill renders category tag with correct color per category
- VelocityIndicator maps velocity thresholds to green/coral/blue
- VideoCardSkeleton matches VideoCard layout (4/5 thumbnail + content area)
- EmptyState uses CATEGORY_LABELS for dynamic messaging
</verification>

<success_criteria>
VideoCard component displays a portrait thumbnail, creator info, title, category pill, velocity indicator, and view count -- all composed from design system primitives. VelocityIndicator, VideoCardSkeleton, and EmptyState support the card and grid system.
</success_criteria>

<output>
After completion, create `.planning/phases/51-video-feed-cards/51-02-SUMMARY.md`
</output>
