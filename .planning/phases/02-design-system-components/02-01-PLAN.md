---
phase: 02-design-system-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - src/lib/utils.ts
  - src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Tailwind design tokens are available as CSS variables"
    - "cn() utility function merges classes correctly"
    - "Build completes without dependency errors"
  artifacts:
    - path: "src/lib/utils.ts"
      provides: "cn() class merging utility"
      exports: ["cn"]
    - path: "src/app/globals.css"
      provides: "Design tokens via @theme directive"
      contains: "@theme"
    - path: "package.json"
      provides: "Required dependencies"
      contains: "class-variance-authority"
  key_links:
    - from: "src/lib/utils.ts"
      to: "clsx, tailwind-merge"
      via: "import"
      pattern: "import.*clsx|tailwind-merge"
---

<objective>
Set up the design system foundation: install required dependencies, create the cn() utility function, and define Tailwind design tokens using the @theme directive.

Purpose: This foundation is required by all subsequent component plans - every component uses cn() and design tokens.
Output: Working utility function, complete design token definitions, installed dependencies.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system-components/02-RESEARCH.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install design system dependencies</name>
  <files>package.json</files>
  <action>
    Install the following npm packages:
    - clsx (conditional className utility)
    - tailwind-merge (prevents Tailwind class conflicts)
    - class-variance-authority (component variant system)
    - motion (animation library, evolution of Framer Motion)

    Run: `npm install clsx tailwind-merge class-variance-authority motion`

    Verify package.json contains all four dependencies after install.
  </action>
  <verify>
    Run `npm ls clsx tailwind-merge class-variance-authority motion` - all should be listed without errors.
    Run `npm run build` to verify no dependency conflicts.
  </verify>
  <done>All four packages installed and listed in package.json dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create cn() utility function</name>
  <files>src/lib/utils.ts</files>
  <action>
    Create the cn() utility that combines clsx and tailwind-merge:

    ```typescript
    import { type ClassValue, clsx } from "clsx"
    import { twMerge } from "tailwind-merge"

    export function cn(...inputs: ClassValue[]) {
      return twMerge(clsx(inputs))
    }
    ```

    This utility:
    - Accepts any number of class values (strings, objects, arrays)
    - Uses clsx to conditionally combine them
    - Uses tailwind-merge to resolve conflicts (last class wins)

    The file should only contain this one export for now.
  </action>
  <verify>
    Run TypeScript check: `npx tsc --noEmit`
    The file should compile without errors.
  </verify>
  <done>cn() utility function exists, is typed, and exports correctly</done>
</task>

<task type="auto">
  <name>Task 3: Define design tokens with @theme directive</name>
  <files>src/app/globals.css</files>
  <action>
    Replace the current minimal globals.css with comprehensive design tokens using Tailwind v4's @theme directive.

    The @theme block should define:

    **Colors:**
    - Primary scale: primary-50 through primary-900 (purple/blue tones - placeholder values, will refine with societies.io inspection)
    - Gray scale: gray-50 through gray-900 (neutral grays)
    - Semantic: success, warning, error, info colors
    - Background and foreground

    **Typography:**
    - Font families: sans (Inter or system), mono
    - Font sizes: xs, sm, base, lg, xl, 2xl, 3xl, 4xl
    - Font weights (via utility classes, not tokens)

    **Spacing:**
    - Scale: 0, 1, 2, 3, 4, 5, 6, 8, 10, 12, 16, 20, 24, 32 (in rem)

    **Border radius:**
    - none, sm, md, lg, xl, 2xl, full

    **Shadows:**
    - sm, md, lg, xl

    **Animation:**
    - Ease functions: ease-smooth, ease-bounce
    - Duration values (via CSS variables for Motion)

    Keep the dark mode support via prefers-color-scheme media query.
    Keep body styles.

    Use placeholder purple values (oklch space) for primary colors - these will be refined in Phase 3 when inspecting societies.io.
  </action>
  <verify>
    Run `npm run build` - should complete without CSS errors.
    Run `npm run dev` and check browser DevTools - CSS variables should be visible in :root.
  </verify>
  <done>@theme block contains all design tokens, Tailwind generates utility classes, no build errors</done>
</task>

</tasks>

<verification>
1. `npm ls clsx tailwind-merge class-variance-authority motion` shows all packages
2. `npx tsc --noEmit` passes without errors
3. `npm run build` completes successfully
4. Dev server starts and page loads without errors
</verification>

<success_criteria>
- All four npm packages installed and importable
- cn() utility function works (merges "p-4 p-8" to "p-8")
- Design tokens visible as CSS variables in browser DevTools
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system-components/02-01-SUMMARY.md`
</output>
