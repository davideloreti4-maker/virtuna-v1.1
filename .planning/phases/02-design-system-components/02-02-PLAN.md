---
phase: 02-design-system-components
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - src/components/ui/button.tsx
  - src/components/ui/input.tsx
  - src/components/ui/card.tsx
  - src/components/ui/skeleton.tsx
autonomous: true

must_haves:
  truths:
    - "Button component renders with correct variants and sizes"
    - "Input component handles focus and error states"
    - "Card component provides composable sections"
    - "Skeleton component shows loading animation"
  artifacts:
    - path: "src/components/ui/button.tsx"
      provides: "Button component with CVA variants"
      exports: ["Button", "buttonVariants"]
      min_lines: 40
    - path: "src/components/ui/input.tsx"
      provides: "Input component with error state"
      exports: ["Input"]
      min_lines: 25
    - path: "src/components/ui/card.tsx"
      provides: "Card, CardHeader, CardTitle, CardContent"
      exports: ["Card", "CardHeader", "CardTitle", "CardContent"]
      min_lines: 40
    - path: "src/components/ui/skeleton.tsx"
      provides: "Skeleton loader component"
      exports: ["Skeleton"]
      min_lines: 10
  key_links:
    - from: "src/components/ui/button.tsx"
      to: "src/lib/utils.ts"
      via: "cn() import"
      pattern: 'import.*cn.*from.*"@/lib/utils"'
    - from: "src/components/ui/button.tsx"
      to: "class-variance-authority"
      via: "CVA import"
      pattern: 'import.*cva.*from.*"class-variance-authority"'
---

<objective>
Build the core UI primitive components: Button, Input, Card, and Skeleton. These are the building blocks used throughout the application.

Purpose: Every page and feature uses these primitives. They must be pixel-perfect, accessible, and follow consistent API patterns.
Output: Four production-ready UI components with proper TypeScript types, CVA variants, and cn() integration.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-design-system-components/02-RESEARCH.md
@.planning/phases/02-design-system-components/02-01-SUMMARY.md
@src/lib/utils.ts
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Button component with CVA variants</name>
  <files>src/components/ui/button.tsx</files>
  <action>
    Create the Button component using Class Variance Authority for variants:

    **Variants:**
    - variant: primary, secondary, outline, ghost, danger
    - size: sm, md, lg

    **Requirements:**
    - Use `cva()` from class-variance-authority
    - Use `cn()` from @/lib/utils for className merging
    - Use React.forwardRef for ref forwarding
    - Export both `Button` and `buttonVariants` (for reuse in links)
    - Use motion from "motion/react" for hover/tap animations:
      - whileHover: { scale: 1.02 }
      - whileTap: { scale: 0.98 }
      - transition: { duration: 0.15, ease: "easeOut" }
    - Add "use client" directive (needed for motion)

    **Props interface:**
    ```typescript
    interface ButtonProps
      extends React.ButtonHTMLAttributes<HTMLButtonElement>,
        VariantProps<typeof buttonVariants> {}
    ```

    **Base styles (via cva):**
    - inline-flex, items-center, justify-center
    - rounded-lg, font-medium
    - transition-all
    - focus-visible:outline-none, focus-visible:ring-2, focus-visible:ring-offset-2
    - disabled:pointer-events-none, disabled:opacity-50

    **Variant styles:**
    - primary: bg-primary-500, text-white, hover:bg-primary-600
    - secondary: bg-gray-100, text-gray-900, hover:bg-gray-200
    - outline: border-2, border-gray-300, bg-transparent, hover:bg-gray-50
    - ghost: hover:bg-gray-100
    - danger: bg-red-500, text-white, hover:bg-red-600

    **Size styles:**
    - sm: h-9, px-3, text-sm
    - md: h-10, px-4, text-base
    - lg: h-11, px-6, text-lg
  </action>
  <verify>
    Run `npx tsc --noEmit` - no TypeScript errors
  </verify>
  <done>Button component exports correctly, variants work, motion animations integrated</done>
</task>

<task type="auto">
  <name>Task 2: Create Input component with error state</name>
  <files>src/components/ui/input.tsx</files>
  <action>
    Create the Input component with proper styling and error state:

    **Requirements:**
    - Use React.forwardRef for ref forwarding
    - Use `cn()` from @/lib/utils
    - Accept optional `error` prop (boolean)
    - Extend React.InputHTMLAttributes<HTMLInputElement>

    **Props interface:**
    ```typescript
    interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
      error?: boolean
    }
    ```

    **Base styles:**
    - flex, h-10, w-full
    - rounded-lg, border, border-gray-300
    - bg-white, px-3, py-2, text-sm
    - transition-colors
    - placeholder:text-gray-400
    - focus:outline-none, focus:ring-2, focus:ring-primary-500, focus:border-transparent
    - disabled:cursor-not-allowed, disabled:opacity-50

    **Error state:**
    - When error=true: border-red-500, focus:ring-red-500

    No motion animations needed for Input (focus state is enough).
  </action>
  <verify>
    Run `npx tsc --noEmit` - no TypeScript errors
  </verify>
  <done>Input component exports correctly, error state toggles border color</done>
</task>

<task type="auto">
  <name>Task 3: Create Card component family</name>
  <files>src/components/ui/card.tsx</files>
  <action>
    Create a composable Card component with sub-components:

    **Components to create:**
    - Card (container)
    - CardHeader (flex container for header area)
    - CardTitle (h3 heading)
    - CardContent (content area with padding)

    **Requirements:**
    - All components use React.forwardRef
    - All components use `cn()` for className merging
    - All accept className prop for customization
    - Extend appropriate HTML element types

    **Card styles:**
    - rounded-xl, border, border-gray-200
    - bg-white, shadow-sm

    **CardHeader styles:**
    - flex, flex-col, space-y-1.5, p-6

    **CardTitle styles:**
    - text-xl, font-semibold, leading-none, tracking-tight

    **CardContent styles:**
    - p-6, pt-0

    Export all four components.
  </action>
  <verify>
    Run `npx tsc --noEmit` - no TypeScript errors
  </verify>
  <done>Card, CardHeader, CardTitle, CardContent all export and compose correctly</done>
</task>

<task type="auto">
  <name>Task 4: Create Skeleton loader component</name>
  <files>src/components/ui/skeleton.tsx</files>
  <action>
    Create a simple Skeleton component for loading states:

    **Requirements:**
    - Use `cn()` from @/lib/utils
    - Extend React.HTMLAttributes<HTMLDivElement>
    - No complex props needed

    **Styles:**
    - animate-pulse (Tailwind's built-in pulse animation)
    - rounded-md
    - bg-gray-200

    The component is intentionally simple - it's styled via className prop:
    ```tsx
    <Skeleton className="h-4 w-full" />
    <Skeleton className="h-4 w-3/4" />
    ```
  </action>
  <verify>
    Run `npx tsc --noEmit` - no TypeScript errors
  </verify>
  <done>Skeleton component exports, animate-pulse visible in browser</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. All four components import correctly: `import { Button } from "@/components/ui/button"`
3. `npm run build` completes successfully
4. Create a test page and render each component to verify styling
</verification>

<success_criteria>
- Button renders with all 5 variants and 3 sizes
- Button shows hover/tap animation via Motion
- Input shows focus ring and error state
- Card composes correctly (Card > CardHeader > CardTitle + CardContent)
- Skeleton pulses with gray background
- All components accept className for customization
- All components forward refs correctly
</success_criteria>

<output>
After completion, create `.planning/phases/02-design-system-components/02-02-SUMMARY.md`
</output>
