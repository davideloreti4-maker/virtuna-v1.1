---
phase: 07-simulation-results
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(app)/dashboard/dashboard-client.tsx
autonomous: true

must_haves:
  truths:
    - "Form floats at bottom of screen"
    - "Network visualization visible behind form"
    - "Top bar remains at top with filters and create button"
  artifacts:
    - path: "src/app/(app)/dashboard/dashboard-client.tsx"
      provides: "Floating form layout structure"
      contains: "absolute bottom"
  key_links:
    - from: "dashboard-client.tsx"
      to: "NetworkVisualization"
      via: "absolute inset-0 positioning"
      pattern: "absolute.*inset-0"
---

<objective>
Restructure dashboard layout for floating form position

Purpose: Match societies.io layout where form floats at bottom with network visualization behind
Output: Dashboard with properly positioned floating content area
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-simulation-results/07-RESEARCH.md
@.planning/phases/07-simulation-results/07-CONTEXT.md
@src/app/(app)/dashboard/dashboard-client.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Query v0 MCP for floating form layout structure</name>
  <files>n/a (research task)</files>
  <action>
    1. Use ToolSearch to find "v0" MCP tool
    2. Query v0 MCP with the following context:
       - "Dark dashboard layout with network visualization background"
       - "Form/content area floating at bottom center, max-width 672px (max-w-2xl)"
       - "Top bar at top with context info left, filter pills and button right"
       - "Network visualization takes full area behind floating content"
       - "Use Tailwind CSS, zinc-900/950 dark theme"
       - Reference: form should appear like chat input at bottom of screen
    3. Save the v0 output structure for Task 2 adaptation
  </action>
  <verify>v0 MCP query returns layout structure code</verify>
  <done>Have reference code for floating layout pattern</done>
</task>

<task type="auto">
  <name>Task 2: Restructure dashboard-client.tsx for floating layout</name>
  <files>src/app/(app)/dashboard/dashboard-client.tsx</files>
  <action>
    Modify dashboard-client.tsx layout structure:

    1. Make main container `relative h-full` with flex-col
    2. NetworkVisualization: `absolute inset-0` - always visible behind
    3. Top bar: `relative z-10` - stays at top, above network
    4. Content area: `absolute bottom-6 left-1/2 -translate-x-1/2 w-full max-w-2xl z-20 px-6`
       - This positions form at bottom center, floating above network

    Layout structure should be:
    ```tsx
    <div className="relative flex h-full flex-col bg-background">
      {/* Network always visible */}
      <NetworkVisualization className="absolute inset-0" />

      {/* Top bar - z-10 above network */}
      <div className="relative z-10 flex items-center justify-between px-6 py-4">
        {/* existing ContextBar and buttons */}
      </div>

      {/* Floating content at bottom - z-20 */}
      <div className="absolute bottom-6 left-1/2 -translate-x-1/2 w-full max-w-2xl z-20 px-6">
        {currentStatus === 'filling-form' && currentTestType ? (
          /* Form rendering */
        ) : currentStatus === 'simulating' ? (
          /* Loading - will be replaced in 07-02 */
        ) : currentStatus === 'viewing-results' && currentResult ? (
          /* Results - will be replaced in 07-05 */
        ) : null}
      </div>
    </div>
    ```

    Key changes:
    - Remove `showNetworkViz` conditional - network always shows
    - Move form/loading/results to floating absolute container
    - NetworkVisualization component may need className prop support (check if it accepts it)
    - Keep TestTypeSelector modal at end (outside the layout flow)

    If NetworkVisualization doesn't accept className, wrap it in a div with the positioning.
  </action>
  <verify>
    npm run build succeeds
    Open http://localhost:3000/dashboard and verify:
    - Network visualization visible full screen
    - Click "Create a new test" and select type
    - Form appears at bottom center of screen, floating
  </verify>
  <done>Dashboard has floating form layout with network always visible behind</done>
</task>

</tasks>

<verification>
- Build succeeds: `npm run build`
- Visual verification: Form floats at bottom with network behind
- Form still functional: Can submit content and see (basic) results
</verification>

<success_criteria>
- Dashboard layout matches societies.io floating form pattern
- Network visualization always visible in background
- Form positioned at bottom center when active
- All existing functionality preserved
</success_criteria>

<output>
After completion, create `.planning/phases/07-simulation-results/07-01-SUMMARY.md`
</output>
