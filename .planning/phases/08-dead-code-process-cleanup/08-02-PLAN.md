---
phase: 08-dead-code-process-cleanup
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/REQUIREMENTS.md
  - .planning/phases/04-payments/04-VERIFICATION.md
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "FOUN-02 requirement text matches actual implementation behavior (redirects to /login, not landing page)"
    - "Phase 4 VERIFICATION.md exists with retroactive verification of PAY-01 through PAY-10"
  artifacts:
    - path: ".planning/REQUIREMENTS.md"
      provides: "Updated FOUN-02 wording"
      contains: "redirected to /login"
    - path: ".planning/phases/04-payments/04-VERIFICATION.md"
      provides: "Retroactive Phase 4 verification report"
      contains: "PAY-01"
  key_links: []
---

<objective>
Update FOUN-02 requirement wording to match actual implementation and create retroactive Phase 4 VERIFICATION.md.

Purpose: Close 1 process gap (FOUN-02 wording mismatch) and 1 missing artifact (Phase 4 had no verification report). Aligns documentation with reality.

Output: Updated REQUIREMENTS.md with accurate FOUN-02 text, and 04-VERIFICATION.md with retroactive verification.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-payments/04-01-SUMMARY.md
@.planning/phases/04-payments/04-02-SUMMARY.md
@.planning/phases/04-payments/04-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update FOUN-02 requirement wording</name>
  <files>.planning/REQUIREMENTS.md</files>
  <action>
In `.planning/REQUIREMENTS.md`, update FOUN-02 text from:

```
- [ ] **FOUN-02**: Unauthenticated users are redirected to landing page
```

To:

```
- [ ] **FOUN-02**: Unauthenticated users are redirected to /login
```

Context: Per decision [01-01], middleware redirects unauthenticated users to /login (the login page in the onboarding route group), NOT to the landing page (/). The requirement text was written before implementation and never updated. The actual behavior (redirect to /login) is correct — only the requirement text is stale.

Do NOT change the checkbox status or any other requirements.
  </action>
  <verify>
Read `.planning/REQUIREMENTS.md` and confirm FOUN-02 says "redirected to /login" (not "redirected to landing page").
Confirm no other requirements were modified.
  </verify>
  <done>FOUN-02 requirement text updated to match actual /login redirect behavior per decision [01-01].</done>
</task>

<task type="auto">
  <name>Task 2: Create retroactive Phase 4 VERIFICATION.md</name>
  <files>.planning/phases/04-payments/04-VERIFICATION.md</files>
  <action>
Create `.planning/phases/04-payments/04-VERIFICATION.md` with a retroactive verification report.

Follow the same format as other VERIFICATION.md files (see `.planning/phases/07-wire-tiergate/07-VERIFICATION.md` for reference).

**Phase 4 Goal (from ROADMAP.md):** Users can subscribe to Starter or Pro plans through Whop, start a 7-day Pro trial, and see their tier reflected throughout the app with Pro-only features gated.

**Verification approach:** This is a retroactive verification. Use evidence from:
- 04-01-SUMMARY.md (Whop checkout wiring, trial tracking, migration)
- 04-02-SUMMARY.md (TierGate, useSubscription, TrialCountdown, UpgradePrompt, sidebar badge)
- 04-03-SUMMARY.md (post-checkout polling, tier-aware CTAs, billing section)
- Actual source files to confirm artifacts exist and exports are correct

**Requirements to verify:** PAY-01 through PAY-10

**Key files to check existence/content:**
- `src/app/(marketing)/pricing/pricing-section.tsx` — pricing page with tier comparison
- `src/components/checkout-modal.tsx` — Whop embedded checkout
- `supabase/migrations/20260213100000_add_trial_columns.sql` — trial columns
- `src/app/api/webhooks/whop/route.ts` — webhook handler
- `src/components/tier-gate.tsx` — TierGate component
- `src/hooks/use-subscription.ts` — subscription hook with tier, trial, polling
- `src/components/trial-countdown.tsx` — trial countdown UI
- `src/components/upgrade-prompt.tsx` — upgrade prompt near expiry
- `src/components/app/sidebar.tsx` — tier badge
- `src/components/app/settings/billing-section.tsx` — billing with tier refresh

For each PAY requirement, verify the artifact exists and contains the expected implementation. Mark human_needed for items requiring live Whop testing (checkout flow, webhook processing, real payment).

Include frontmatter with:
- `phase: 04-payments`
- `verified: {current ISO timestamp}`
- `status: human_needed` (Whop checkout/webhook require live testing)
- `score: N/N` based on code-level verification
- `re_verification: false`
- `human_verification:` list of tests requiring live Whop/payment testing
  </action>
  <verify>
Confirm `.planning/phases/04-payments/04-VERIFICATION.md` exists.
Confirm it contains frontmatter with phase, verified, status, score fields.
Confirm it covers PAY-01 through PAY-10.
Confirm human_verification section lists Whop-dependent tests.
  </verify>
  <done>Phase 4 VERIFICATION.md created with retroactive verification covering all 10 PAY requirements. Human verification items identified for live Whop testing.</done>
</task>

</tasks>

<verification>
1. `.planning/REQUIREMENTS.md` contains "redirected to /login" for FOUN-02
2. `.planning/phases/04-payments/04-VERIFICATION.md` exists with valid frontmatter
3. All 10 PAY requirements addressed in verification report
4. No unrelated files modified
</verification>

<success_criteria>
- FOUN-02 requirement text matches /login redirect behavior
- Phase 4 VERIFICATION.md exists with retroactive verification of PAY-01 to PAY-10
- Human verification items identified for Whop-dependent tests
</success_criteria>

<output>
After completion, create `.planning/phases/08-dead-code-process-cleanup/08-02-SUMMARY.md`
</output>
