---
phase: 50-data-layer-page-shell
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/types/trending.ts
  - src/lib/trending-mock-data.ts
autonomous: true

must_haves:
  truths:
    - "TypeScript types define TrendingVideo, TrendingCategory, CategoryStats, and TrendingStats with strict typing"
    - "Mock data exports 40+ trending videos across 3 categories with realistic metadata"
    - "Helper functions filter videos by category and compute aggregate stats"
  artifacts:
    - path: "src/types/trending.ts"
      provides: "TrendingVideo interface, TrendingCategory type, CategoryStats, TrendingStats, CATEGORY_LABELS, VALID_TABS"
      exports: ["TrendingVideo", "TrendingCategory", "CategoryStats", "TrendingStats", "CATEGORY_LABELS", "VALID_TABS", "ValidTab"]
    - path: "src/lib/trending-mock-data.ts"
      provides: "Mock video array and category filtering/stats helpers"
      exports: ["TRENDING_VIDEOS", "getVideosByCategory", "getTrendingStats"]
      min_lines: 200
  key_links:
    - from: "src/lib/trending-mock-data.ts"
      to: "src/types/trending.ts"
      via: "import type { TrendingVideo, TrendingCategory, TrendingStats }"
      pattern: "import type.*from.*@/types/trending"
---

<objective>
Create the TypeScript type definitions and mock data layer for the trending page.

Purpose: Establish the typed data foundation that the page shell, tabs, stats bar, and future video cards all consume. This must exist before any UI can be built.

Output: Two files -- `src/types/trending.ts` (types and constants) and `src/lib/trending-mock-data.ts` (40+ mock videos with filtering helpers).
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/50-data-layer-page-shell/50-CONTEXT.md
@.planning/phases/50-data-layer-page-shell/50-RESEARCH.md
@src/types/settings.ts (example of existing type file pattern)
@src/lib/mock-data.ts (example of existing mock data pattern)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TypeScript types and constants for trending data</name>
  <files>src/types/trending.ts</files>
  <action>
Create `src/types/trending.ts` with the following exports:

1. **TrendingCategory** type: Union literal `"breaking-out" | "trending-now" | "rising-again"`

2. **CATEGORY_LABELS** const: `Record<TrendingCategory, string>` mapping slugs to display labels:
   - `"breaking-out"` -> `"Breaking Out"`
   - `"trending-now"` -> `"Trending Now"`
   - `"rising-again"` -> `"Rising Again"`

3. **VALID_TABS** const: `["breaking-out", "trending-now", "rising-again"] as const`

4. **ValidTab** type: `(typeof VALID_TABS)[number]`

5. **TrendingVideo** interface with these fields:
   - `id: string` (format: `"vid_001"` etc.)
   - `title: string`
   - `thumbnailUrl: string`
   - `creator: { handle: string; displayName: string; avatarUrl: string }`
   - `views: number`
   - `likes: number`
   - `shares: number`
   - `date: string` (ISO 8601)
   - `category: TrendingCategory`
   - `hashtags: string[]`
   - `tiktokUrl: string`
   - `velocity: number` (views multiplier relative to creator's average, e.g. 12.5 = 12.5x)

6. **CategoryStats** interface: `{ count: number; totalViews: number }`

7. **TrendingStats** interface:
   - `totalVideos: number`
   - `totalViews: number`
   - `byCategory: Record<TrendingCategory, CategoryStats>`

Use JSDoc comments on the interface and type. Follow the pattern in `src/types/settings.ts` for style.
  </action>
  <verify>
Run `npx tsc --noEmit src/types/trending.ts` -- should compile with no errors.
Confirm exports: TrendingVideo, TrendingCategory, CategoryStats, TrendingStats, CATEGORY_LABELS, VALID_TABS, ValidTab.
  </verify>
  <done>Types file exists with all 7 exports, strict TypeScript compiles clean, JSDoc on key types.</done>
</task>

<task type="auto">
  <name>Task 2: Create mock data file with 40+ trending videos and helper functions</name>
  <files>src/lib/trending-mock-data.ts</files>
  <action>
Create `src/lib/trending-mock-data.ts` importing types from `@/types/trending`.

**1. TRENDING_VIDEOS array** -- Export a `const TRENDING_VIDEOS: TrendingVideo[]` with **42 videos** (14 per category):

Category distribution:
- 14 videos with `category: "breaking-out"` (new viral content, high velocity 8-50x)
- 14 videos with `category: "trending-now"` (sustained viral, medium velocity 3-10x)
- 14 videos with `category: "rising-again"` (resurging content, velocity 2-6x)

For each video, use:
- `id`: Sequential `"vid_001"` through `"vid_042"`
- `title`: Realistic TikTok-style titles across mixed niches (food, dance, comedy, DIY, life hacks, tech, fitness, beauty, pets, travel). Examples: "This pasta trick changed my life", "POV: your cat discovers the robot vacuum", "3 phone hacks you didn't know existed"
- `thumbnailUrl`: `https://picsum.photos/seed/{unique-seed}/400/500` (portrait ratio, unique seed per video)
- `creator.handle`: Realistic TikTok handles like `@chefmaria`, `@dancequeen_`, `@techbro42`
- `creator.displayName`: Real-sounding names matching handles
- `creator.avatarUrl`: `https://picsum.photos/seed/{handle}/100/100`
- `views`: Realistic range -- Breaking Out: 500K-15M, Trending Now: 2M-50M, Rising Again: 200K-8M
- `likes`: ~5-10% of views
- `shares`: ~0.5-2% of views
- `date`: Recent dates within last 7 days (ISO 8601 format, e.g. `"2026-02-03T10:15:00Z"`)
- `category`: One of the 3 categories
- `hashtags`: 3-5 relevant hashtags per video (include `#fyp`, `#viral`, plus niche-specific)
- `tiktokUrl`: Real TikTok URL format: `https://www.tiktok.com/@{handle}/video/{19-digit-number}` (use realistic-looking 19-digit IDs)
- `velocity`: Number matching category ranges above

Use numeric separators for readability: `4_200_000` not `4200000`.

**2. getVideosByCategory function:**
```typescript
export function getVideosByCategory(category: TrendingCategory): TrendingVideo[] {
  return TRENDING_VIDEOS.filter((v) => v.category === category);
}
```

**3. getTrendingStats function:**
```typescript
export function getTrendingStats(): TrendingStats {
  // Initialize stats with zeroed byCategory
  // Loop through TRENDING_VIDEOS, accumulate count and totalViews per category
  // Return complete TrendingStats object
}
```

**Important:** Do NOT use `any`. All data must satisfy the TrendingVideo interface. Use `as const` satisfies patterns where helpful.
  </action>
  <verify>
Run `npx tsc --noEmit src/lib/trending-mock-data.ts` -- should compile clean.
Verify: `TRENDING_VIDEOS.length >= 40`, each video has all required fields, categories distributed ~14 each.
Run a quick inline check: `node -e "const m = require('./src/lib/trending-mock-data'); console.log(m.TRENDING_VIDEOS.length, Object.entries(m.getTrendingStats().byCategory).map(([k,v]) => k + ':' + v.count))"` (adjust for ESM if needed -- or just verify via tsc).
  </verify>
  <done>Mock data file exports 42 typed videos across 3 categories with realistic metadata, plus getVideosByCategory and getTrendingStats helpers. TypeScript compiles clean.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes for both new files
2. `src/types/trending.ts` exports: TrendingVideo, TrendingCategory, CategoryStats, TrendingStats, CATEGORY_LABELS, VALID_TABS, ValidTab
3. `src/lib/trending-mock-data.ts` exports: TRENDING_VIDEOS (42 items), getVideosByCategory, getTrendingStats
4. Each video has all 11 required fields (id, title, thumbnailUrl, creator, views, likes, shares, date, category, hashtags, tiktokUrl, velocity)
5. Category distribution: ~14 per category
6. View counts use realistic ranges with numeric separators
</verification>

<success_criteria>
- Types compile with strict TypeScript, no `any`
- 42 mock videos with complete metadata across 3 categories
- Helper functions correctly filter and compute stats
- Requirements covered: MOCK-01, MOCK-02, MOCK-03
</success_criteria>

<output>
After completion, create `.planning/phases/50-data-layer-page-shell/50-01-SUMMARY.md`
</output>
