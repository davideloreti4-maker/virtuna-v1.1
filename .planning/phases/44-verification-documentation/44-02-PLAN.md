---
phase: 44-verification-documentation
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - verification/scripts/hardcoded-values-scan.ts
  - verification/scripts/token-verification.ts
  - verification/reports/hardcoded-values.md
  - verification/reports/token-verification.md
autonomous: true

must_haves:
  truths:
    - "Hardcoded values report identifies every hex, rgb, rgba, and arbitrary Tailwind value in component code"
    - "Token verification report confirms extracted Raycast values match current globals.css token values"
    - "Allow-list exists for intentional hardcoded values with justification"
  artifacts:
    - path: "verification/scripts/hardcoded-values-scan.ts"
      provides: "Grep-based scanner for hardcoded color/spacing values in component code"
    - path: "verification/reports/hardcoded-values.md"
      provides: "Report of all hardcoded values with allow-list annotations"
    - path: "verification/scripts/token-verification.ts"
      provides: "Script comparing globals.css tokens to Phase 39 extraction data"
    - path: "verification/reports/token-verification.md"
      provides: "Token-by-token comparison report (VER-02)"
  key_links:
    - from: "verification/scripts/token-verification.ts"
      to: ".planning/phases/39-token-foundation/39-EXTRACTION-DATA.md"
      via: "Reads extraction data as reference values"
      pattern: "39-EXTRACTION-DATA"
---

<objective>
Scan for hardcoded values in component code and verify token values against Raycast extraction data.

Purpose: VER-06 requires no hardcoded values in component code (with documented exceptions). VER-02 requires token values verified against the Phase 39 Raycast extraction data. Both are static analysis tasks that produce documentation-only reports.

Output: Two verification reports — hardcoded values scan and token verification comparison.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-verification-documentation/44-RESEARCH.md
@.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Hardcoded values scan</name>
  <files>
    verification/scripts/hardcoded-values-scan.ts
    verification/reports/hardcoded-values.md
  </files>
  <action>
1. Create verification/scripts/hardcoded-values-scan.ts as a standalone Node script (run with `npx tsx`) that:

   a. Scans these directories for .tsx and .ts files:
      - src/components/ui/
      - src/components/primitives/
      - src/components/motion/
      - src/components/effects/
      - src/components/app/
      - src/components/layout/
      - src/components/landing/
      - src/components/visualization/ (if exists)

   b. Detects these patterns:
      - Hex colors: `#[0-9a-fA-F]{3,8}` (but NOT in comments or JSDoc)
      - RGB/RGBA: `rgba?\(\s*\d+`
      - Arbitrary Tailwind values: `(bg|text|border|shadow|ring)-\[#[0-9a-fA-F]+\]` and `(bg|text|border)-\[\d+px\]`
      - Hardcoded pixel values in inline styles: `\d+px` in style objects (but NOT in className strings)

   c. Maintains an allow-list with justification:
      - `TrafficLights.tsx`: macOS traffic light colors (system-defined, no token equivalent)
      - `GlassOrb.tsx`: THREE.js shader colors (WebGL context, not CSS)
      - `kbd.tsx`: Raycast-extracted 4-layer keyboard shadow (too complex for single token)
      - `skeleton.tsx`: Shimmer gradient white/opacity values (animation-specific)
      - `extension-card.tsx`: GRADIENT_THEMES oklch radial gradients (per-card unique, not tokenizable)
      - `card.tsx`: Glass effect rgba values (backdrop-filter specific)
      - `filter-pills.tsx`: Country flag colors (data-driven, not design tokens)
      - `spinner.tsx`: SVG stroke animation values

   d. For each finding, records: file path, line number, matched value, pattern type, and whether it's allow-listed

   e. Generates verification/reports/hardcoded-values.md with:
      - Summary: X findings, Y allow-listed, Z flagged for review
      - Allow-listed values table with justification
      - Flagged values table (values that SHOULD use tokens but don't)
      - Recommendations section (which flagged values to fix, grouped by file)

2. Run the script:
   ```bash
   npx tsx verification/scripts/hardcoded-values-scan.ts
   ```

3. The report documents all findings — it does NOT modify any component files.
  </action>
  <verify>
    - `cat verification/reports/hardcoded-values.md` contains summary counts
    - Report has allow-listed and flagged sections
    - Known files from research (kbd.tsx, skeleton.tsx, card.tsx) appear in allow-list
  </verify>
  <done>Hardcoded values report generated with all findings categorized as allow-listed or flagged.</done>
</task>

<task type="auto">
  <name>Task 2: Token verification against extraction data</name>
  <files>
    verification/scripts/token-verification.ts
    verification/reports/token-verification.md
  </files>
  <action>
1. Create verification/scripts/token-verification.ts as a standalone Node script that:

   a. Reads 39-EXTRACTION-DATA.md from .planning/phases/39-token-foundation/
   b. Parses the extracted Raycast reference values (colors, typography sizes, spacing, shadows, radii)
   c. Reads src/app/globals.css and parses the @theme block for current token values
   d. Compares each extracted value against its corresponding token:
      - Colors: Compare hex/oklch values (accounting for coral substitution where #ff6363 -> #FF7F50)
      - Typography: Compare font sizes, weights, line heights
      - Spacing: Compare pixel values
      - Shadows: Compare shadow definitions
      - Radii: Compare border-radius values
   e. For each comparison, categorizes as:
      - MATCH: Values are identical or equivalent
      - INTENTIONAL_DIFF: Coral branding substitution (document the mapping)
      - MISMATCH: Value differs unexpectedly (flag for review)
      - MISSING: Extracted value has no corresponding token
      - EXTRA: Token exists with no corresponding extraction reference

   f. Generates verification/reports/token-verification.md with:
      - Summary: X matches, Y intentional diffs, Z mismatches, W missing
      - Section per token category (colors, typography, spacing, shadows, radii)
      - Each section: table with token name, extracted value, current value, status
      - Mismatches section with details on what differs and potential fix

2. Run the script:
   ```bash
   npx tsx verification/scripts/token-verification.ts
   ```

3. This is a comparison report, not a test suite. Mismatches are documented for a future fix phase.
  </action>
  <verify>
    - `cat verification/reports/token-verification.md` contains token comparison tables
    - Report covers colors, typography, spacing, shadows, radii categories
    - Coral substitution documented as INTENTIONAL_DIFF
  </verify>
  <done>Token verification report generated comparing all current token values against Phase 39 Raycast extraction data.</done>
</task>

</tasks>

<verification>
- verification/reports/hardcoded-values.md exists with categorized findings
- verification/reports/token-verification.md exists with token-by-token comparison
- No component files modified
- Allow-list covers known intentional hardcoded values from research
</verification>

<success_criteria>
- Every hardcoded color/spacing value in component code is documented and categorized
- Token values compared against Phase 39 extraction data with status for each
- Reports are actionable — flagged items can become backlog items for a future fix phase
</success_criteria>

<output>
After completion, create `.planning/phases/44-verification-documentation/44-02-SUMMARY.md`
</output>
