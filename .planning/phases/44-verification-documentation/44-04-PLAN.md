---
phase: 44-verification-documentation
plan: 04
type: execute
wave: 2
depends_on: ["44-01"]
files_modified:
  - verification/scripts/visual-comparison.spec.ts
  - verification/scripts/responsive-check.spec.ts
  - verification/reports/visual-comparison.md
  - verification/reports/responsive-check.md
autonomous: true

must_haves:
  truths:
    - "Visual comparison screenshots captured for all major marketing page sections and showcase pages"
    - "Raycast reference screenshots from Phase 39 used as comparison baseline"
    - "Responsive screenshots captured at 375px, 768px, and 1440px for marketing and showcase pages"
    - "Discrepancy report documents visual differences without asserting pass/fail"
  artifacts:
    - path: "verification/scripts/visual-comparison.spec.ts"
      provides: "Playwright script capturing Virtuna screenshots + comparing against Phase 39 Raycast screenshots"
    - path: "verification/reports/visual-comparison.md"
      provides: "Visual comparison report with findings per page section"
    - path: "verification/scripts/responsive-check.spec.ts"
      provides: "Playwright script capturing responsive screenshots at 3 viewport widths"
    - path: "verification/reports/responsive-check.md"
      provides: "Responsive verification report with findings per breakpoint"
  key_links:
    - from: "verification/scripts/visual-comparison.spec.ts"
      to: "verification/playwright.config.ts"
      via: "Uses verification Playwright config"
      pattern: "import.*playwright"
    - from: "verification/scripts/visual-comparison.spec.ts"
      to: ".planning/phases/39-token-foundation/screenshots/"
      via: "References Phase 39 Raycast screenshots as baseline"
      pattern: "screenshots"
---

<objective>
Capture visual comparison screenshots and responsive verification for all pages.

Purpose: VER-01 (visual comparison against Raycast), VER-04 (components in isolation via showcase), VER-05 (components in composition via marketing pages), and VER-07 (responsive behavior at 3 breakpoints). Uses Playwright to capture screenshots and generate comparison reports.

Output: Visual comparison report and responsive verification report with screenshots.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/44-verification-documentation/44-RESEARCH.md
@.planning/phases/44-verification-documentation/44-01-SUMMARY.md
@verification/playwright.config.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Visual comparison screenshots and report</name>
  <files>
    verification/scripts/visual-comparison.spec.ts
    verification/reports/visual-comparison.md
  </files>
  <action>
1. Create verification/scripts/visual-comparison.spec.ts as a Playwright test file that:

   a. Injects CSS to disable all animations before each screenshot:
      ```css
      *, *::before, *::after {
        animation-duration: 0s !important;
        transition-duration: 0s !important;
        animation-delay: 0s !important;
      }
      ```

   b. Captures full-page screenshots of these Virtuna pages at 1440x900:
      - Homepage (http://localhost:3000)
      - /showcase (tokens page)
      - /showcase/inputs
      - /showcase/navigation
      - /showcase/feedback
      - /showcase/data-display
      - /showcase/layout-components
      - /showcase/utilities

   c. For the homepage, also captures individual section screenshots:
      - Hero section (above the fold)
      - Features section
      - Stats section
      - Footer

   d. Saves all screenshots to verification/reports/screenshots/virtuna/

   e. Checks if Phase 39 Raycast screenshots exist at .planning/phases/39-token-foundation/screenshots/
      - If they exist: generates pixelmatch diff images for corresponding pages
      - Save diffs to verification/reports/screenshots/diffs/
      - If they don't exist: note "Raycast baseline not available" in report

   f. After all screenshots captured, generates verification/reports/visual-comparison.md:
      ```markdown
      # Visual Comparison Report

      **Date:** [date]
      **Virtuna URL:** http://localhost:3000
      **Raycast Baseline:** Phase 39 extraction screenshots (2026-02-03)
      **Viewport:** 1440x900 (desktop)

      ## Summary
      - [X] pages captured
      - [Y] sections compared against Raycast baseline
      - [Z] notable differences found

      ## Page-by-Page Comparison

      ### Homepage
      **Screenshot:** screenshots/virtuna/homepage.png
      **Raycast baseline:** [path if exists]
      **Diff:** [path if generated]
      **Observations:**
      - [Describe notable differences: layout, colors, spacing, typography]
      - [Note coral branding differences as INTENTIONAL]

      ### /showcase (Tokens)
      ...
      ```

   g. For each page, documents:
      - Whether the page renders correctly (no broken layouts, missing components)
      - Notable visual differences from Raycast (if baseline available)
      - Any rendering issues (broken images, overflow, etc.)

2. Run the test:
   ```bash
   cd virtuna-v1.1
   pnpm dev &
   DEV_PID=$!
   sleep 5
   npx playwright test --config=verification/playwright.config.ts visual-comparison
   kill $DEV_PID
   ```

3. This captures and documents — it does NOT fail on differences. All observations are descriptive.
  </action>
  <verify>
    - Screenshots exist in verification/reports/screenshots/virtuna/
    - verification/reports/visual-comparison.md contains page-by-page sections
    - At least 8 pages captured (homepage + 7 showcase)
  </verify>
  <done>Visual comparison report generated with screenshots of all marketing and showcase pages, plus diff images against Raycast baseline where available.</done>
</task>

<task type="auto">
  <name>Task 2: Responsive verification screenshots and report</name>
  <files>
    verification/scripts/responsive-check.spec.ts
    verification/reports/responsive-check.md
  </files>
  <action>
1. Create verification/scripts/responsive-check.spec.ts as a Playwright test file that:

   a. Tests at 3 viewport widths: 375px (mobile), 768px (tablet), 1440px (desktop)
   b. For each viewport, captures full-page screenshots of:
      - Homepage
      - /showcase (tokens)
      - /showcase/inputs
   c. Saves to verification/reports/screenshots/responsive/{width}/
   d. For each page at each viewport, evaluates and records:
      - Any horizontal overflow (scrollbar visible)
      - Content clipping or overlap
      - Navigation behavior (sidebar hidden on mobile for showcase)
      - Text readability (font sizes reasonable)
      - Touch targets (buttons/links not too small on mobile)

2. Generate verification/reports/responsive-check.md:
   ```markdown
   # Responsive Verification Report

   **Date:** [date]
   **Viewports tested:** 375px, 768px, 1440px

   ## Summary
   | Viewport | Pages Tested | Issues Found |
   |----------|-------------|--------------|
   | 375px (mobile) | 3 | [N] |
   | 768px (tablet) | 3 | [N] |
   | 1440px (desktop) | 3 | [N] |

   ## Mobile (375px)
   ### Homepage
   **Screenshot:** screenshots/responsive/375/homepage.png
   **Observations:**
   - [Layout behavior, readability, overflow status]

   ### /showcase
   - Sidebar: [hidden as expected / visible / broken]
   ...

   ## Tablet (768px)
   ...

   ## Desktop (1440px)
   ...

   ## Known Responsive Decisions
   - Showcase sidebar hidden on mobile (md:block) — Phase 43 decision
   - App pages are desktop-only by design
   ```

3. Run the test:
   ```bash
   npx playwright test --config=verification/playwright.config.ts responsive-check
   ```

4. Report documents observations — no assertions.
  </action>
  <verify>
    - Screenshots exist in verification/reports/screenshots/responsive/ with 375/, 768/, 1440/ subdirectories
    - verification/reports/responsive-check.md has sections for all 3 viewports
    - Known responsive decisions documented
  </verify>
  <done>Responsive verification report generated with screenshots at 3 viewports and observations per page.</done>
</task>

</tasks>

<verification>
- Visual comparison screenshots captured for all pages
- Responsive screenshots captured at 3 viewports
- Both reports generated as markdown in verification/reports/
- No component code modified
</verification>

<success_criteria>
- All marketing pages and showcase pages have visual comparison screenshots
- Responsive behavior documented at mobile, tablet, and desktop breakpoints
- Diff images generated against Raycast baseline where Phase 39 screenshots available
- Reports are descriptive and actionable (findings can feed a future fix phase)
</success_criteria>

<output>
After completion, create `.planning/phases/44-verification-documentation/44-04-SUMMARY.md`
</output>
