---
phase: 55-glass-docs-regression
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/primitives/GlassPanel.tsx
  - src/components/primitives/GlassPill.tsx
  - src/components/primitives/index.ts
  - src/components/primitives/GlassCard.tsx  # DELETE
  - src/components/primitives/GradientGlow.tsx  # DELETE
  - src/components/primitives/GradientMesh.tsx  # DELETE
  - src/app/globals.css
  - src/app/(marketing)/primitives-showcase/page.tsx
  - src/app/(marketing)/showcase/layout-components/page.tsx
autonomous: true

must_haves:
  truths:
    - "GlassPanel renders Raycast neutral glass with fixed 5px blur, 12px radius, 6% border, and correct inset shadow -- no tint/blur/opacity/innerGlow/borderGlow props exist"
    - "GradientGlow and GradientMesh components do not exist in the codebase"
    - "No build errors -- all consumer imports compile cleanly after deletions"
    - "primitives-showcase page renders without GradientGlow sections"
    - "No orphaned CSS classes or keyframes from deleted components remain in globals.css"
  artifacts:
    - path: "src/components/primitives/GlassPanel.tsx"
      provides: "Zero-config Raycast glass panel"
      contains: "blur(5px)"
    - path: "src/components/primitives/index.ts"
      provides: "Clean barrel exports without deleted components"
    - path: "src/app/globals.css"
      provides: "CSS without orphaned glow/glass classes"
  key_links:
    - from: "src/components/primitives/GlassPill.tsx"
      to: "local PillColor type"
      via: "type defined in GlassPill.tsx instead of imported from deleted GradientGlow"
      pattern: "type PillColor"
    - from: "src/app/(marketing)/primitives-showcase/page.tsx"
      to: "@/components/primitives"
      via: "imports only GlassPanel and TrafficLights (no GradientGlow)"
      pattern: "import.*GlassPanel.*TrafficLights"
---

<objective>
Refactor GlassPanel to Raycast-neutral zero-config glass, hard-delete GradientGlow/GradientMesh/primitives-GlassCard, fix all consumer imports, and remove orphaned CSS.

Purpose: This is the core code change for Phase 55 -- stripping the design system back to Raycast-minimal patterns by removing all non-Raycast glass features (colored tints, variable blur, inner glow, ambient glow, mesh backgrounds).

Output: Simplified GlassPanel component, 3 deleted component files, clean barrel exports, updated showcase pages, and cleaned globals.css.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/55-glass-docs-regression/55-CONTEXT.md
@.planning/phases/55-glass-docs-regression/55-RESEARCH.md
@src/components/primitives/GlassPanel.tsx
@src/components/primitives/GradientGlow.tsx
@src/components/primitives/GradientMesh.tsx
@src/components/primitives/GlassCard.tsx
@src/components/primitives/GlassPill.tsx
@src/components/primitives/index.ts
@src/app/globals.css
@src/app/(marketing)/primitives-showcase/page.tsx
@src/app/(marketing)/showcase/layout-components/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Refactor GlassPanel + delete GradientGlow/GradientMesh/GlassCard + fix imports</name>
  <files>
    src/components/primitives/GlassPanel.tsx
    src/components/primitives/GlassPill.tsx
    src/components/primitives/index.ts
    src/components/primitives/GlassCard.tsx (DELETE)
    src/components/primitives/GradientGlow.tsx (DELETE)
    src/components/primitives/GradientMesh.tsx (DELETE)
    src/app/(marketing)/primitives-showcase/page.tsx
    src/app/(marketing)/showcase/layout-components/page.tsx
  </files>
  <action>
    **Step 1: Rewrite GlassPanel.tsx to zero-config Raycast glass.**

    Replace the entire file with this implementation:
    ```tsx
    "use client";

    import { cn } from "@/lib/utils";
    import { type ReactNode, type CSSProperties } from "react";

    export interface GlassPanelProps {
      children: ReactNode;
      /** Additional className for layout overrides */
      className?: string;
      /** Custom style overrides */
      style?: CSSProperties;
      /** HTML element to render as */
      as?: "div" | "section" | "article" | "aside";
    }

    /**
     * GlassPanel - Raycast-style frosted glass container.
     *
     * Fixed 5px blur, Raycast neutral glass gradient, 12px radius.
     * No configuration needed -- matches Raycast 1:1.
     *
     * Safari-compatible via inline backdrop-filter (bypasses Lightning CSS stripping).
     *
     * @example
     * <GlassPanel>
     *   <h2>Content</h2>
     * </GlassPanel>
     *
     * @example
     * <GlassPanel as="aside" className="p-6">
     *   <nav>Sidebar content</nav>
     * </GlassPanel>
     */
    export function GlassPanel({
      children,
      className,
      style,
      as: Component = "div",
    }: GlassPanelProps) {
      return (
        <Component
          className={cn(
            "rounded-[12px] border border-white/[0.06]",
            className
          )}
          style={{
            background:
              "linear-gradient(137deg, rgba(17,18,20,0.75) 4.87%, rgba(12,13,15,0.9) 75.88%)",
            backdropFilter: "blur(5px)",
            WebkitBackdropFilter: "blur(5px)",
            boxShadow: "rgba(255,255,255,0.15) 0px 1px 1px 0px inset",
            ...style,
          }}
        >
          {children}
        </Component>
      );
    }
    ```

    Remove all: `GlassTint` type, `GlassBlur` type, `tintMap`, `blurPxMap`, `tint` prop, `blur` prop, `opacity` prop, `borderGlow` prop, `innerGlow` prop. The types `GlassTint` and `GlassBlur` are no longer exported.

    **Step 2: Fix GlassPill.tsx type import.**

    GlassPill imports `type GradientColor` from `./GradientGlow`. Before deleting GradientGlow:
    - Remove the import line: `import { type GradientColor } from "./GradientGlow";`
    - Add a local type definition at the top of GlassPill.tsx: `type PillColor = "purple" | "blue" | "pink" | "cyan" | "green" | "orange";`
    - Replace all references to `GradientColor` with `PillColor` throughout the file
    - Keep the "neutral" option in the component props (PillColor | "neutral")

    **Step 3: Delete component files.**
    - Delete `src/components/primitives/GradientGlow.tsx` entirely
    - Delete `src/components/primitives/GradientMesh.tsx` entirely
    - Delete `src/components/primitives/GlassCard.tsx` entirely (already `@deprecated`, `ui/card.tsx` GlassCard is the canonical version)

    **Step 4: Clean barrel exports in index.ts.**

    Rewrite `src/components/primitives/index.ts` to:
    ```tsx
    export { GlassPanel } from "./GlassPanel";
    export type { GlassPanelProps } from "./GlassPanel";

    export { GlassPill } from "./GlassPill";
    export type { GlassPillProps } from "./GlassPill";

    export { TrafficLights } from "./TrafficLights";
    export type { TrafficLightsProps } from "./TrafficLights";

    export { GlassInput } from "./GlassInput";
    export type { GlassInputProps, GlassInputSize } from "./GlassInput";

    export { GlassTextarea } from "./GlassTextarea";
    export type { GlassTextareaProps } from "./GlassTextarea";
    ```

    Remove: GradientGlow exports (component + colorMap + types), GradientMesh exports, GlassCard exports, GlassTint type export, GlassBlur type export.

    **Step 5: Update primitives-showcase page.**

    In `src/app/(marketing)/primitives-showcase/page.tsx`:
    - Remove `GradientGlow` from the import statement (keep `GlassPanel` and `TrafficLights`)
    - Remove all sections that render GradientGlow instances (the color palette section, the composed examples with GradientGlow)
    - Update the GlassPanel demo section to reflect the simplified API (remove tint/blur/opacity/innerGlow examples, show only the zero-config usage with `className` and `as` props)
    - Keep TrafficLights section unchanged
    - Keep any shadow/utility sections that don't depend on deleted components

    **Step 6: Update layout-components showcase page.**

    In `src/app/(marketing)/showcase/layout-components/page.tsx`:
    - The page imports `GlassPanel` from `@/components/primitives/GlassPanel`
    - Update any GlassPanel usage that passes now-removed props (tint, blur, opacity, borderGlow, innerGlow)
    - Replace with simple `<GlassPanel className="...">` usage
    - Keep GlassPanel instances but remove all prop overrides that no longer exist
  </action>
  <verify>
    Run `npx tsc --noEmit` from the project root -- zero TypeScript errors.
    Run `pnpm build` (or `npm run build`) -- build succeeds with no errors.
    Grep for any remaining imports of GradientGlow, GradientMesh, or primitives/GlassCard: `grep -r "GradientGlow\|GradientMesh\|primitives/GlassCard\|GlassTint\|GlassBlur" src/ --include="*.tsx" --include="*.ts"` should return zero matches (excluding comments in docs).
  </verify>
  <done>
    GlassPanel is a zero-config component with only children/className/style/as props. GradientGlow.tsx, GradientMesh.tsx, and primitives/GlassCard.tsx are deleted from disk. All imports compile cleanly. Primitives-showcase and layout-components pages render without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove orphaned CSS classes, keyframes, and tokens from globals.css</name>
  <files>
    src/app/globals.css
  </files>
  <action>
    After the component deletions in Task 1, remove all orphaned CSS from `src/app/globals.css`.

    **Remove these sections (verify line numbers by reading the file first):**

    1. **Glow keyframes** -- `@keyframes glow-float`, `@keyframes glow-breathe`, `@keyframes glow-drift` (only used by GradientGlow/GradientMesh)
    2. **Glow animation utilities** -- `.animate-glow-float`, `.animate-glow-breathe`, `.animate-glow-drift`
    3. **Glow intensity tokens** -- `--glow-intensity-subtle`, `--glow-intensity-medium`, `--glow-intensity-strong` (only used by GradientGlow)
    4. **Gradient glow coral token** -- `--gradient-glow-coral` (only used by GradientGlow)
    5. **Glass base class** -- `.glass-base` (GlassPanel now uses inline styles exclusively)
    6. **Glass blur classes** -- `.glass-blur-xs` through `.glass-blur-2xl` (Lightning CSS strips them, and GlassPanel no longer references them)
    7. **Mobile blur media query** -- The `@media` query that reduced blur on mobile for glass panels
    8. **Glass navbar class** -- `.glass-navbar` (verified orphaned -- sidebar and header use inline styles)

    **Before removing `--color-gradient-*` tokens (lines ~210-215):** Run `grep -r "gradient-purple\|gradient-blue\|gradient-pink\|gradient-cyan\|gradient-green\|gradient-orange" src/ --include="*.tsx" --include="*.ts"` to verify zero consumers. If any Tailwind class consumers exist, keep those tokens. If zero consumers, remove all 6 `--color-gradient-*` tokens.

    **KEEP these (not orphaned):**
    - `@keyframes accordion-down`, `accordion-up` -- used by Accordion component
    - `@keyframes gradient-x` -- used by GlassProgress
    - `@keyframes shimmer` -- used by Skeleton
    - `.animate-shimmer` -- used by Skeleton
    - `shadow-glass` CSS variable -- check if still used by any component. If only GlassPanel used it and GlassPanel now has inline boxShadow, remove it. If other components reference `shadow-glass`, keep it.
    - `shadow-button` CSS variable -- used by Button component, keep

    **Verify after cleanup:** Ensure no remaining references to removed classes/tokens exist in any `.tsx` file.
  </action>
  <verify>
    Run `pnpm build` (or `npm run build`) -- build succeeds.
    Grep for removed class names: `grep -r "glass-base\|glass-blur-\|glass-navbar\|glow-float\|glow-breathe\|glow-drift\|glow-intensity\|gradient-glow-coral" src/ --include="*.tsx" --include="*.ts"` should return zero matches.
    The globals.css file should be significantly shorter (estimate ~50-80 lines removed).
  </verify>
  <done>
    globals.css contains zero orphaned CSS classes, keyframes, or tokens related to deleted GradientGlow/GradientMesh/old-GlassPanel features. All remaining CSS is actively consumed by live components.
  </done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` -- zero errors
2. `pnpm build` -- clean build, no warnings about missing modules
3. `grep -r "GradientGlow\|GradientMesh\|primitives/GlassCard" src/` -- zero matches
4. `grep -r "glass-base\|glass-blur-\|glow-float\|glow-breathe\|glow-drift" src/` -- zero matches
5. Start dev server (`pnpm dev`) and verify:
   - `/primitives-showcase` loads without errors (no GradientGlow sections visible)
   - `/showcase/layout-components` loads without errors (GlassPanel renders correctly)
   - No console errors related to missing components
</verification>

<success_criteria>
- GlassPanel has exactly 4 props: children, className, style, as
- GradientGlow.tsx, GradientMesh.tsx, primitives/GlassCard.tsx do not exist on disk
- Zero TypeScript compilation errors
- Zero orphaned CSS from deleted components
- All showcase pages render without errors
</success_criteria>

<output>
After completion, create `.planning/phases/55-glass-docs-regression/55-01-SUMMARY.md`
</output>
