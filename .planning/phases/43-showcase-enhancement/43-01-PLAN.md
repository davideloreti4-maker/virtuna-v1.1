---
phase: 43-showcase-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - pnpm-lock.yaml
  - src/app/globals.css
  - src/app/(marketing)/showcase/layout.tsx
  - src/app/(marketing)/showcase/_components/showcase-section.tsx
  - src/app/(marketing)/showcase/_components/code-block.tsx
  - src/app/(marketing)/showcase/_components/copy-button.tsx
  - src/app/(marketing)/showcase/_components/sidebar-nav.tsx
  - src/app/(marketing)/showcase/_components/component-grid.tsx
autonomous: true

must_haves:
  truths:
    - "sugar-high is installed and syntax highlighting works in server components"
    - "Showcase layout renders with sidebar navigation and content area"
    - "ShowcaseSection wrapper enforces consistent spacing and heading pattern"
    - "CodeBlock renders syntax-highlighted code with copy-to-clipboard"
    - "Sidebar navigation highlights the active route"
  artifacts:
    - path: "src/app/(marketing)/showcase/layout.tsx"
      provides: "Showcase layout with sidebar + content area"
      min_lines: 15
    - path: "src/app/(marketing)/showcase/_components/showcase-section.tsx"
      provides: "Consistent section wrapper for all showcase pages"
      min_lines: 10
    - path: "src/app/(marketing)/showcase/_components/code-block.tsx"
      provides: "sugar-high syntax-highlighted code block"
      min_lines: 15
    - path: "src/app/(marketing)/showcase/_components/copy-button.tsx"
      provides: "Client-side copy-to-clipboard button"
      min_lines: 15
    - path: "src/app/(marketing)/showcase/_components/sidebar-nav.tsx"
      provides: "Client-side sidebar with active route highlighting"
      min_lines: 20
    - path: "src/app/(marketing)/showcase/_components/component-grid.tsx"
      provides: "Grid layout helper for variant/state demos"
      min_lines: 10
  key_links:
    - from: "src/app/(marketing)/showcase/layout.tsx"
      to: "sidebar-nav.tsx"
      via: "import and render"
      pattern: "SidebarNav"
    - from: "code-block.tsx"
      to: "copy-button.tsx"
      via: "import CopyButton client component"
      pattern: "CopyButton"
    - from: "sidebar-nav.tsx"
      to: "next/navigation"
      via: "usePathname for active state"
      pattern: "usePathname"
---

<objective>
Set up the showcase infrastructure: install sugar-high for syntax highlighting, create all shared components (_components/), the showcase layout with sidebar navigation, and add sugar-high CSS theme variables to globals.css.

Purpose: All 7 showcase pages depend on these shared building blocks. This plan creates the foundation before any page content.
Output: Working showcase layout at /showcase with sidebar nav, plus reusable ShowcaseSection, CodeBlock, CopyButton, SidebarNav, and ComponentGrid components.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/43-showcase-enhancement/43-RESEARCH.md

Key references:
@src/app/(marketing)/layout.tsx — marketing layout structure (fonts, header)
@src/app/globals.css — token architecture, add sugar-high CSS vars here
@src/components/ui/typography.tsx — Heading, Text for ShowcaseSection
@src/lib/utils.ts — cn() utility
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install sugar-high and add CSS theme variables</name>
  <files>package.json, pnpm-lock.yaml, src/app/globals.css</files>
  <action>
    1. Install sugar-high: `pnpm add sugar-high`
    2. Add sugar-high dark theme CSS variables to globals.css in the `:root` block (or at the top-level if no :root exists — check first). Add these variables matching the Virtuna dark aesthetic:
       ```css
       /* sugar-high syntax highlighting theme */
       --sh-class: #e5a869;
       --sh-identifier: #c9d1d9;
       --sh-sign: #6a6b6c;
       --sh-property: #7ee787;
       --sh-entity: #d2a8ff;
       --sh-jsxliterals: #ff9f7f;
       --sh-string: #a5d6ff;
       --sh-keyword: #ff7b72;
       --sh-comment: #58595a;
       ```
    3. Verify sugar-high appears in package.json dependencies.
  </action>
  <verify>Run `pnpm list sugar-high` to confirm installation. Check globals.css contains all 9 --sh-* variables.</verify>
  <done>sugar-high installed, CSS theme variables added to globals.css</done>
</task>

<task type="auto">
  <name>Task 2: Create shared showcase components and layout</name>
  <files>
    src/app/(marketing)/showcase/layout.tsx
    src/app/(marketing)/showcase/_components/showcase-section.tsx
    src/app/(marketing)/showcase/_components/code-block.tsx
    src/app/(marketing)/showcase/_components/copy-button.tsx
    src/app/(marketing)/showcase/_components/sidebar-nav.tsx
    src/app/(marketing)/showcase/_components/component-grid.tsx
  </files>
  <action>
    Create the following 6 files:

    **1. sidebar-nav.tsx** — Client component ("use client")
    - Import `Link` from "next/link", `usePathname` from "next/navigation", `cn` from "@/lib/utils"
    - Props: `items: { href: string; label: string }[]`
    - Use `usePathname()` to determine active link
    - Sticky sidebar: `w-56 border-r border-border-glass p-6 sticky top-0 h-screen overflow-y-auto hidden md:block`
    - Active link: coral accent background (bg-accent/10 text-accent font-medium), inactive: text-foreground-secondary with hover
    - Add "Virtuna UI" heading at top of sidebar using Heading level={4}
    - Nav items in a `<ul>` with space-y-1
    - On mobile (below md), hide sidebar entirely — mobile nav is deferred

    **2. showcase-section.tsx** — Server component
    - Props: `{ title: string; description: string; children: React.ReactNode; id?: string }`
    - Structure: `<section id={id} className="mb-16">` containing Heading level={2} with mb-2, Text size="sm" with muted + mb-8, then children
    - Import Heading, Text from @/components/ui
    - This enforces SHW-10 (consistent section pattern)

    **3. copy-button.tsx** — Client component ("use client")
    - Import useState from react, Copy + Check from @phosphor-icons/react
    - Props: `{ code: string; className?: string }`
    - On click: `navigator.clipboard.writeText(code)`, show Check icon for 2 seconds then revert to Copy
    - Styling: text-foreground-muted hover:text-foreground transition-colors, size={14}

    **4. code-block.tsx** — Server component
    - Import `highlight` from "sugar-high"
    - Import CopyButton (client component)
    - Props: `{ code: string; title?: string }`
    - Call `highlight(code.trim())` to get HTML string
    - Render: rounded-lg border border-border-glass bg-surface/50 overflow-hidden
    - Optional title bar: px-4 py-2 border-b border-border-glass with monospace text-xs text-foreground-muted, flex with CopyButton on the right
    - If no title, still show CopyButton in top-right corner
    - Code area: `<pre className="p-4 overflow-x-auto text-sm font-mono leading-relaxed"><code dangerouslySetInnerHTML={{ __html: html }} /></pre>`

    **5. component-grid.tsx** — Server component
    - Props: `{ children: React.ReactNode; columns?: 2 | 3 | 4; className?: string }`
    - Renders a grid: `grid gap-6` with column classes based on columns prop (default 3): grid-cols-1 sm:grid-cols-2 lg:grid-cols-{columns}
    - Simple wrapper for consistent variant/state grid layout

    **6. layout.tsx** — Server component (showcase layout)
    - Import SidebarNav from "./_components/sidebar-nav"
    - Define NAV_ITEMS array: { href: "/showcase", label: "Tokens" }, { href: "/showcase/inputs", label: "Inputs" }, { href: "/showcase/navigation", label: "Navigation" }, { href: "/showcase/feedback", label: "Feedback" }, { href: "/showcase/data-display", label: "Data Display" }, { href: "/showcase/layout-components", label: "Layout" }, { href: "/showcase/utilities", label: "Utilities" }
    - Return: `<div className="flex min-h-screen">` with SidebarNav + `<main className="flex-1 px-8 py-12 md:px-16 md:py-16 max-w-5xl">{children}</main>`
    - Do NOT include a nested `<html>` or `<body>` — this is a nested layout inside the marketing layout which already provides those

    All components should use the Virtuna design tokens (bg-background, text-foreground, border-border-glass, etc.) and import from @/components/ui where needed.
  </action>
  <verify>
    Run `pnpm build` to confirm no compilation errors. Verify all 6 files exist with correct imports and no TypeScript errors.
  </verify>
  <done>
    - layout.tsx renders sidebar + content area
    - ShowcaseSection enforces consistent heading/description/content pattern
    - CodeBlock highlights syntax via sugar-high with copy button
    - SidebarNav highlights active route via usePathname
    - ComponentGrid provides consistent grid for variant demos
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` passes with no errors
2. All shared components exist under src/app/(marketing)/showcase/_components/
3. sugar-high CSS variables present in globals.css
4. Navigate to /showcase in browser — layout renders with sidebar (even if page content is empty/placeholder)
</verification>

<success_criteria>
- sugar-high installed and CSS vars configured
- 6 shared files created (layout + 5 _components)
- `pnpm build` passes
- Showcase infrastructure ready for page content in subsequent plans
</success_criteria>

<output>
After completion, create `.planning/phases/43-showcase-enhancement/43-01-SUMMARY.md`
</output>
