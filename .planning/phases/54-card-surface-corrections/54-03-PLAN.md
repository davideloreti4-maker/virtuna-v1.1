---
phase: 54-card-surface-corrections
plan: 03
type: execute
wave: 2
depends_on: ["54-01", "54-02"]
files_modified:
  - src/components/primitives/GlassInput.tsx
  - src/components/primitives/GlassTextarea.tsx
  - src/components/primitives/GlassCard.tsx
  - src/components/primitives/index.ts
  - src/components/app/survey-form.tsx
  - src/components/app/leave-feedback-modal.tsx
  - src/components/app/create-society-modal.tsx
  - src/components/app/content-form.tsx
  - src/components/trending/video-card.tsx
autonomous: false

must_haves:
  truths:
    - "All consumer files import Input/Textarea from ui/ instead of GlassInput/GlassTextarea from primitives/"
    - "Code importing GlassInput from primitives still compiles and renders correctly (backward-compatible re-export)"
    - "Code importing GlassTextarea from primitives still compiles and renders correctly (backward-compatible re-export)"
    - "video-card.tsx imports Card from ui/card instead of GlassCard from primitives"
    - "primitives/GlassCard.tsx is marked deprecated (Phase 55 will remove it)"
    - "Build passes with no type errors"
    - "Dev server renders cards, inputs, header correctly"
  artifacts:
    - path: "src/components/primitives/GlassInput.tsx"
      provides: "Backward-compatible re-export of Input"
      contains: "from.*ui/input"
    - path: "src/components/primitives/GlassTextarea.tsx"
      provides: "Backward-compatible re-export of Textarea"
      contains: "from.*ui/textarea"
    - path: "src/components/app/survey-form.tsx"
      provides: "Survey form using ui/input and ui/textarea"
      contains: "from.*ui/input"
  key_links:
    - from: "src/components/primitives/GlassInput.tsx"
      to: "src/components/ui/input.tsx"
      via: "re-export"
      pattern: "export.*Input.*from"
    - from: "src/components/primitives/GlassTextarea.tsx"
      to: "src/components/ui/textarea.tsx"
      via: "re-export"
      pattern: "export.*Textarea.*from"
---

<objective>
Migrate all consumer files from GlassInput/GlassTextarea/primitives-GlassCard to the unified ui/ components, create backward-compatible re-exports, and verify everything renders correctly.

Purpose: Completes the consolidation by ensuring no component directly depends on the old primitives for input/textarea/card functionality. Re-exports maintain backward compatibility for any undiscovered consumers.

Output: Updated consumer imports, deprecation re-exports in primitives, visual verification.

Note: Task 1 is fully autonomous (type="auto"). Plan is marked autonomous: false due to Task 2 human-verify checkpoint.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/54-card-surface-corrections/54-RESEARCH.md

Consumer files currently importing GlassInput/GlassTextarea:
1. src/components/app/survey-form.tsx -- imports GlassInput + GlassTextarea from primitives
2. src/components/app/leave-feedback-modal.tsx -- imports GlassInput + GlassTextarea from primitives
3. src/components/app/create-society-modal.tsx -- imports GlassTextarea from primitives
4. src/components/app/content-form.tsx -- imports GlassTextarea from primitives
5. src/components/trending/video-card.tsx -- imports GlassCard from primitives

GlassInput props that consumers use (check each file):
- survey-form.tsx: GlassInput with placeholder, value, onChange, error (boolean), id
- leave-feedback-modal.tsx: GlassInput with placeholder, value, onChange, error
- Both also use GlassTextarea with autoResize, minRows, maxRows, placeholder, value, onChange, error

The new Input/Textarea support all these props, so migration is prop-compatible.

For GlassInput -> Input: The `error` prop on consumers is boolean. The new Input accepts boolean|string, so boolean still works.
For GlassTextarea -> Textarea: Same -- error is boolean, autoResize/minRows/maxRows are preserved.
For GlassCard (primitives) -> Not a simple swap. The primitives GlassCard has color, tinted, glow, glowIntensity, hover, padding, contentClassName, onClick props. video-card.tsx uses it -- check what props it passes.
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate consumer imports and create deprecation re-exports</name>
  <files>src/components/app/survey-form.tsx, src/components/app/leave-feedback-modal.tsx, src/components/app/create-society-modal.tsx, src/components/app/content-form.tsx, src/components/trending/video-card.tsx, src/components/primitives/GlassInput.tsx, src/components/primitives/GlassTextarea.tsx, src/components/primitives/GlassCard.tsx, src/components/primitives/index.ts</files>
  <action>
**Step 1: Update consumer imports (GlassInput -> Input, GlassTextarea -> Textarea)**

For each consumer file, change imports and component usage:

**survey-form.tsx:**
- Change `import { GlassTextarea } from "@/components/primitives/GlassTextarea"` to `import { Textarea } from "@/components/ui/textarea"`
- Change `import { GlassInput } from "@/components/primitives/GlassInput"` to `import { Input } from "@/components/ui/input"`
- Replace all `<GlassTextarea` with `<Textarea`
- Replace all `<GlassInput` with `<Input`

**leave-feedback-modal.tsx:**
- Change `import { GlassInput } from "@/components/primitives/GlassInput"` to `import { Input } from "@/components/ui/input"`
- Change `import { GlassTextarea } from "@/components/primitives/GlassTextarea"` to `import { Textarea } from "@/components/ui/textarea"`
- Replace all `<GlassInput` with `<Input`
- Replace all `<GlassTextarea` with `<Textarea`

**create-society-modal.tsx:**
- Change `import { GlassTextarea } from "@/components/primitives/GlassTextarea"` to `import { Textarea } from "@/components/ui/textarea"`
- Replace all `<GlassTextarea` with `<Textarea`

**content-form.tsx:**
- Change `import { GlassTextarea } from "@/components/primitives/GlassTextarea"` to `import { Textarea } from "@/components/ui/textarea"`
- Replace all `<GlassTextarea` with `<Textarea`
- Update the JSX comment from "GlassTextarea" to "Textarea"

**video-card.tsx:**
- Change `import { GlassCard } from "@/components/primitives"` to `import { Card } from "@/components/ui/card"`
- The current usage is: `<GlassCard color="orange" hover="none" padding="none" onClick={onClick} className="overflow-hidden">`
- Replace with: `<Card onClick={onClick} className="overflow-hidden p-0">`
  - Remove `color="orange"` -- Card uses gradient-card-bg (no colored tints, that's Phase 55 GlassPanel removal)
  - Remove `hover="none"` -- the parent HoverScale already handles hover animation, and Card's built-in hover:translate is fine (HoverScale wraps it)
  - Remove `padding="none"` -- Card doesn't have a padding prop, add `p-0` to className instead (Card has no default padding)
  - Keep `onClick={onClick}` -- Card accepts HTMLDivElement props
  - Keep `className="overflow-hidden"` -- still needed for image crop
- Also replace the closing `</GlassCard>` with `</Card>`

**Step 2: Create deprecation re-exports**

**GlassInput.tsx** -- replace entire file with:
```tsx
/**
 * @deprecated Use Input from "@/components/ui/input" instead.
 * This file is a backward-compatibility re-export.
 */
export { Input as GlassInput } from "@/components/ui/input";
export type { InputProps as GlassInputProps, InputSize as GlassInputSize } from "@/components/ui/input";
```

**GlassTextarea.tsx** -- replace entire file with:
```tsx
/**
 * @deprecated Use Textarea from "@/components/ui/textarea" instead.
 * This file is a backward-compatibility re-export.
 */
export { Textarea as GlassTextarea } from "@/components/ui/textarea";
export type { TextareaProps as GlassTextareaProps, TextareaSize } from "@/components/ui/textarea";
```

**GlassCard.tsx (primitives)** -- This one is tricky. It depends on GlassPanel and GradientGlow which are Phase 55 scope. For now, keep the file functionally intact but note it's deprecated. Do NOT replace it with a re-export since its API (color, tinted, glow, etc.) is completely different from ui/Card. Just add a deprecation comment at the top:
```tsx
/**
 * @deprecated This component will be removed in Phase 55.
 * For standard cards, use Card from "@/components/ui/card".
 * This component retains its current implementation for backward compatibility.
 */
```

**primitives/index.ts** -- Update to also export GlassInput and GlassTextarea re-exports so any consumer importing from `@/components/primitives` still works:
- Add: `export { GlassInput } from "./GlassInput";`
- Add: `export type { GlassInputProps, GlassInputSize } from "./GlassInput";`
- Add: `export { GlassTextarea } from "./GlassTextarea";`
- Add: `export type { GlassTextareaProps } from "./GlassTextarea";`

(These may already be exported -- check the file first. If not present, add them.)
  </action>
  <verify>
Run `grep -rn "GlassInput\|GlassTextarea" src/components/app/` -- should show 0 matches (all migrated).
Run `grep -rn "from.*primitives" src/components/app/` -- should show 0 matches for GlassInput/GlassTextarea imports.
Run `grep -rn "from.*primitives.*GlassCard\|GlassCard.*from.*primitives" src/components/trending/video-card.tsx` -- should show 0 matches.
Run `grep -n "@deprecated" src/components/primitives/GlassInput.tsx` -- should match.
Run `grep -n "@deprecated" src/components/primitives/GlassTextarea.tsx` -- should match.
Run `pnpm build` -- should pass with no type errors.
  </verify>
  <done>All consumer files import from ui/ instead of primitives/. GlassInput and GlassTextarea are thin re-exports. GlassCard (primitives) is marked deprecated. Build passes.</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Visual verification of all changes</name>
  <what-built>
Phase 54 complete: Cards (Card, GlassCard, FeatureCard, ExtensionCard, TestimonialCard) updated with Raycast-exact styling (137deg gradient, 12px radius, 6% border, inset shadow, hover lift). Header updated with glass navbar pattern. Input updated to 42px/5%/8px with icon/clear/loading support. Textarea created with auto-resize. All consumers migrated from primitives to ui/.
  </what-built>
  <how-to-verify>
Start dev server: `pnpm dev`

1. Visit http://localhost:3000 -- verify header has glass effect (semi-transparent gradient, not solid black). Border should be subtle 6% at bottom.

2. Visit http://localhost:3000/showcase/data-display -- verify cards render with:
   - Slight gradient background (not solid black, not fully transparent)
   - Subtle inset highlight at top edge
   - On hover: card lifts slightly, border brightens, faint white overlay appears
   - 12px rounded corners (noticeably more rounded than 8px)

3. Visit the landing page (if it has FeatureCards) -- verify FeatureCards have:
   - Very subtle border (6%, barely visible)
   - On hover: border brightens to 10%, card lifts

4. Open browser DevTools on a Card element:
   - Verify border-radius is 12px
   - Verify border-color opacity is ~6%
   - Verify box-shadow includes inset

5. Open DevTools on the header:
   - Verify backdrop-filter: blur(5px) is present
   - Verify background uses gradient-navbar variable

6. If mobile menu is testable (resize to mobile width):
   - Open hamburger menu
   - Verify the divider line between header and menu items is very subtle (6%, not 10%)

7. Navigate to a page with forms (dashboard at /app if available):
   - Verify input fields render at 42px height
   - Verify inputs have very subtle border (5%)
   - Verify inputs have the same glass-like background

8. Check browser console for any React errors or warnings.
  </how-to-verify>
  <resume-signal>Type "approved" to complete Phase 54, or describe any visual issues to fix.</resume-signal>
</task>

</tasks>

<verification>
After all tasks including checkpoint approval:
1. `pnpm build` passes
2. Zero direct imports of GlassInput/GlassTextarea in app/ directory
3. All card variants have 12px radius, 6% border, inset shadow, hover states
4. Header has glass navbar pattern
5. Inputs at 42px with 5% border
6. Visual verification approved by user
</verification>

<success_criteria>
- All consumer files use ui/ imports (not primitives/ for input/textarea)
- GlassInput.tsx and GlassTextarea.tsx are thin re-exports
- Build passes with no errors
- Visual verification confirms Raycast-accurate rendering of cards, header, and inputs
</success_criteria>

<output>
After completion, create `.planning/phases/54-card-surface-corrections/54-03-SUMMARY.md`
</output>
