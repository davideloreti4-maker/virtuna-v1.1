---
phase: 54-card-surface-corrections
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/ui/card.tsx
  - src/components/landing/feature-card.tsx
  - src/components/ui/extension-card.tsx
  - src/components/ui/testimonial-card.tsx
  - src/components/layout/header.tsx
autonomous: true

must_haves:
  truths:
    - "Card (ui/card.tsx) renders with 137deg solid gradient background, 12px border-radius, 6% border, and 0.1 inset shadow"
    - "Hovering any card variant (Card, FeatureCard, ExtensionCard, TestimonialCard) produces -0.5 translate-y lift, 10% border, and white/3 bg overlay"
    - "GlassCard retains blur prop functionality and renders with correct glass shadow"
    - "FeatureCard uses 6% base border and 10% hover border (not 10%/20%)"
    - "Header renders with Raycast glass navbar pattern (137deg gradient + blur(5px) + 6% border + inset shadow)"
    - "Mobile menu divider uses 6% opacity (border-border token, not border-white/10)"
  artifacts:
    - path: "src/components/ui/card.tsx"
      provides: "Card with gradient bg, 12px radius, hover states, inset shadow"
      contains: "rounded-[12px]"
    - path: "src/components/landing/feature-card.tsx"
      provides: "FeatureCard with corrected border opacities"
      contains: "border-white/[0.06]"
    - path: "src/components/layout/header.tsx"
      provides: "Header with glass navbar pattern"
      contains: "gradient-navbar"
  key_links:
    - from: "src/components/ui/card.tsx"
      to: "globals.css"
      via: "CSS variable var(--gradient-card-bg)"
      pattern: "gradient-card-bg"
    - from: "src/components/layout/header.tsx"
      to: "globals.css"
      via: "CSS variable var(--gradient-navbar)"
      pattern: "gradient-navbar"
---

<objective>
Fix all card variants and the header/navbar to match Raycast extracted CSS exactly.

Purpose: Cards and header are the most visually prominent surface elements. Correcting their backgrounds, borders, shadows, and hover states brings the design system to 1:1 Raycast parity for these components.

Output: Updated card.tsx, feature-card.tsx, extension-card.tsx, testimonial-card.tsx, and header.tsx with Raycast-accurate styling.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/54-card-surface-corrections/54-RESEARCH.md

Key reference values (from 39-EXTRACTION-DATA.md, verified Playwright extraction):

Card CSS:
- background: linear-gradient(137deg, rgba(17,18,20,0.75) 4.87%, rgba(12,13,15,0.9) 75.88%)
- border: 1px solid rgba(255,255,255,0.06)
- border-radius: 12px
- box-shadow: rgba(255,255,255,0.15) 0px 1px 1px 0px inset (glass variant)
- Card inset shadow (CARD-04): rgba(255,255,255,0.1) 0 1px 0 0 inset (solid Card)
- Token available: --gradient-card-bg: linear-gradient(137deg, #111214 4.87%, #0c0d0f 75.88%)

Navbar CSS:
- background: linear-gradient(137deg, rgba(17,18,20,0.75) 4.87%, rgba(12,13,15,0.9) 75.88%)
- backdrop-filter: blur(5px)
- border-bottom: 1px solid rgba(255,255,255,0.06)
- box-shadow: rgba(255,255,255,0.15) 0px 1px 1px 0px inset
- Token available: --gradient-navbar

Hover states (Raycast cards):
- transform: translateY(-0.5px) equivalent = hover:-translate-y-0.5
- border: rgba(255,255,255,0.1) = hover:border-white/[0.1] or hover:border-border-hover
- background overlay: rgba(255,255,255,0.03) = hover:bg-white/[0.03]

IMPORTANT anti-patterns:
- Lightning CSS strips backdrop-filter from CSS classes -- MUST use inline styles for backdrop-filter
- Tailwind v4 rounded-lg = 8px, NOT 12px -- use rounded-[12px] explicitly for cards
- border-border token maps to rgba(255,255,255,0.06) -- use this instead of hardcoded white/6
- border-border-hover token maps to rgba(255,255,255,0.1)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix Card and GlassCard components</name>
  <files>src/components/ui/card.tsx</files>
  <action>
Update the Card component in src/components/ui/card.tsx:

1. **Card component** -- change from current to Raycast-exact:
   - Change `rounded-lg` to `rounded-[12px]`
   - Add hover state classes: `transition-all duration-150 hover:-translate-y-0.5 hover:border-border-hover hover:bg-white/[0.03]`
   - Keep `border border-border` (already correct 6%)
   - Keep existing inline style `background: "var(--gradient-card-bg)"` (already correct)
   - Change boxShadow from `"inset 0 1px 0 0 rgba(255, 255, 255, 0.1)"` to `"rgba(255, 255, 255, 0.1) 0px 1px 0px 0px inset"` (same value, just canonical Raycast order for consistency)

2. **GlassCard component** -- change from current to Raycast-exact:
   - Change `rounded-lg` to `rounded-[12px]`
   - Add hover state classes: `transition-all duration-150 hover:-translate-y-0.5 hover:border-border-hover hover:bg-white/[0.03]`
   - Change `border-border-glass` to `border-border` (6% universal)
   - Keep backdrop-filter in inline styles (Lightning CSS safe)
   - Keep existing blur prop functionality (sm/md/lg) -- showcase page uses it
   - Keep existing glow prop for inner shadow

3. Do NOT change CardHeader, CardContent, or CardFooter -- they are layout-only.
  </action>
  <verify>
Run `grep -n "rounded-\[12px\]" src/components/ui/card.tsx` -- should show 2 matches (Card + GlassCard).
Run `grep -n "hover:-translate-y-0.5" src/components/ui/card.tsx` -- should show 2 matches.
Run `grep -n "border-border-glass" src/components/ui/card.tsx` -- should show 0 matches (replaced with border-border).
  </verify>
  <done>Card uses gradient-card-bg with 12px radius, 6% border, 0.1 inset shadow, and hover lift+border+bg. GlassCard uses 12px radius, 6% border, glass shadow, backdrop-filter blur, and same hover states. Blur prop still works for sm/md/lg variants.</done>
</task>

<task type="auto">
  <name>Task 2: Fix FeatureCard, ExtensionCard, and TestimonialCard</name>
  <files>src/components/landing/feature-card.tsx, src/components/ui/extension-card.tsx, src/components/ui/testimonial-card.tsx</files>
  <action>
**FeatureCard** (src/components/landing/feature-card.tsx):
- Change `border-white/10` to `border-white/[0.06]` (6% base)
- Change `hover:border-white/20` to `hover:border-white/[0.1]` (10% hover)
- Change `rounded-lg` to `rounded-[12px]`
- Add hover lift: `hover:-translate-y-0.5`
- Add background overlay on hover: `hover:bg-white/[0.03]`
- Change `transition-colors` to `transition-all duration-150` (for transform + color)
- Add inset shadow via inline style: `style={{ boxShadow: "rgba(255, 255, 255, 0.1) 0px 1px 0px 0px inset" }}`

**ExtensionCard** (src/components/ui/extension-card.tsx):
- Change `rounded-xl` to `rounded-[12px]` in cardClasses
- Change `border-border-glass` to `border-border` (6%)
- Change `hover:border-white/10` to `hover:border-border-hover` (same 10% but uses token)
- Change `hover:-translate-y-px` to `hover:-translate-y-0.5` (consistent lift)
- Add `hover:bg-white/[0.03]` overlay
- Change `bg-surface` to `bg-transparent` (cards should NOT have opaque bg -- the gradient glow overlay handles the visual)
- Add inset shadow via inline style on the outer card div: `style={{ boxShadow: "rgba(255, 255, 255, 0.1) 0px 1px 0px 0px inset" }}`
- The card renders content via a function -- add the style prop to both the `href` and non-`href` render paths

**TestimonialCard** (src/components/ui/testimonial-card.tsx):
- Change `rounded-xl` to `rounded-[12px]`
- Change `bg-surface` to `bg-transparent` (same pattern as cards)
- Change `border-border-glass` (non-featured) to `border-border`
- Add hover states: `transition-all duration-150 hover:-translate-y-0.5 hover:border-border-hover hover:bg-white/[0.03]`
- Add inset shadow via inline style: `style={{ boxShadow: "rgba(255, 255, 255, 0.1) 0px 1px 0px 0px inset" }}`
- For the featured variant, keep the accent border but also add the inset shadow
- Change avatar circle `border-border-glass` to `border-border`
  </action>
  <verify>
Run `grep -n "border-white/\[0.06\]" src/components/landing/feature-card.tsx` -- should show 1 match.
Run `grep -n "border-white/10" src/components/landing/feature-card.tsx` -- should show 0 matches (all replaced).
Run `grep -n "border-border-glass" src/components/ui/extension-card.tsx` -- should show 0 matches.
Run `grep -n "rounded-\[12px\]" src/components/ui/extension-card.tsx` -- should show 1 match.
Run `grep -n "border-border-glass" src/components/ui/testimonial-card.tsx` -- should show 0 matches.
Run `grep -n "bg-surface" src/components/ui/extension-card.tsx` -- should show 0 matches.
  </verify>
  <done>FeatureCard uses 6% base / 10% hover borders with 12px radius and inset shadow. ExtensionCard uses border-border token, 12px radius, consistent hover, transparent bg, and inset shadow. TestimonialCard uses border-border, 12px radius, hover states, transparent bg, and inset shadow.</done>
</task>

<task type="auto">
  <name>Task 3: Fix Header with Raycast glass navbar pattern</name>
  <files>src/components/layout/header.tsx</files>
  <action>
Update the Header component in src/components/layout/header.tsx:

1. **Main header element** -- replace opaque bg with glass navbar pattern:
   - Remove `bg-background` from className
   - Add `border-b border-border` to className (6% bottom border)
   - Add inline style for glass pattern:
     ```tsx
     style={{
       background: "var(--gradient-navbar)",
       backdropFilter: "blur(5px)",
       WebkitBackdropFilter: "blur(5px)",
       boxShadow: "rgba(255, 255, 255, 0.15) 0px 1px 1px 0px inset",
     }}
     ```
   - backdrop-filter MUST be in inline style (Lightning CSS strips it from classes)

2. **Mobile menu dropdown** -- also needs glass:
   - Change `bg-background` to remove it from the mobile menu div className
   - Add inline style to mobile menu div:
     ```tsx
     style={{
       background: "var(--gradient-navbar)",
       backdropFilter: "blur(5px)",
       WebkitBackdropFilter: "blur(5px)",
     }}
     ```

3. **Mobile menu divider** -- fix opacity:
   - Change `border-white/10` to `border-border` in the mobile menu's `border-t` class
   - This changes from 10% to 6% opacity matching HEAD-02

Keep all existing functionality: mobile menu toggle, outside click, body scroll lock, overlay, links.
  </action>
  <verify>
Run `grep -n "bg-background" src/components/layout/header.tsx` -- should show 0 matches.
Run `grep -n "border-border" src/components/layout/header.tsx` -- should show matches for the bottom border and mobile divider.
Run `grep -n "gradient-navbar" src/components/layout/header.tsx` -- should show 2 matches (header + mobile menu).
Run `grep -n "blur(5px)" src/components/layout/header.tsx` -- should show matches for backdrop-filter.
Run `grep -n "border-white/10" src/components/layout/header.tsx` -- should show 0 matches.
  </verify>
  <done>Header uses Raycast glass navbar pattern with 137deg gradient, blur(5px), 6% border, and 0.15 inset shadow. Mobile menu uses same glass pattern. Mobile divider uses 6% opacity via border-border token.</done>
</task>

</tasks>

<verification>
After all 3 tasks:
1. `pnpm build` completes without errors (type-check + compilation)
2. `grep -rn "border-border-glass" src/components/ui/card.tsx src/components/ui/extension-card.tsx src/components/ui/testimonial-card.tsx` returns 0 matches
3. `grep -rn "rounded-lg" src/components/ui/card.tsx src/components/landing/feature-card.tsx` returns 0 matches (all converted to 12px)
4. `grep -rn "border-white/10" src/components/landing/feature-card.tsx src/components/layout/header.tsx` returns 0 matches
5. `grep -rn "bg-background" src/components/layout/header.tsx` returns 0 matches
</verification>

<success_criteria>
- All card variants render with 12px border-radius, 6% border, inset shadow, and hover lift+border+bg
- FeatureCard uses exactly 6% base / 10% hover borders
- Header uses Raycast glass navbar pattern (gradient + blur + border + shadow)
- Mobile menu divider uses 6% opacity
- Build passes with no errors
- No remaining border-border-glass references in modified card files
</success_criteria>

<output>
After completion, create `.planning/phases/54-card-surface-corrections/54-01-SUMMARY.md`
</output>
