---
phase: 04-app-layout-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/(marketing)/layout.tsx
  - src/app/(marketing)/page.tsx
  - src/app/(marketing)/coming-soon/page.tsx
  - src/app/(marketing)/showcase/page.tsx
  - src/app/(app)/layout.tsx
  - src/app/(app)/dashboard/page.tsx
  - src/app/layout.tsx
  - package.json
autonomous: true

must_haves:
  truths:
    - "Landing pages still render with Header/Footer"
    - "App route exists at /dashboard with different layout structure"
    - "Radix dropdown and dialog packages are installed"
  artifacts:
    - path: "src/app/(marketing)/layout.tsx"
      provides: "Marketing root layout with Header"
      contains: "<Header"
    - path: "src/app/(app)/layout.tsx"
      provides: "App root layout without Header"
      min_lines: 20
    - path: "src/app/(app)/dashboard/page.tsx"
      provides: "Dashboard page placeholder"
    - path: "package.json"
      provides: "Radix UI dependencies"
      contains: "@radix-ui/react-dropdown-menu"
  key_links:
    - from: "src/app/(marketing)/layout.tsx"
      to: "@/components/layout/header"
      via: "import"
      pattern: "import.*Header.*from"
---

<objective>
Restructure app routes into route groups and install Radix dependencies.

Purpose: Create separate layout contexts for landing site (with Header/Footer) and app (with Sidebar only). This is the foundation for the app shell.

Output: Route groups `(marketing)` and `(app)` with separate root layouts, plus Radix UI dependencies installed.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-app-layout-navigation/04-RESEARCH.md
@src/app/layout.tsx
@src/app/page.tsx
@src/components/layout/header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Radix UI dependencies</name>
  <files>package.json</files>
  <action>
Install @radix-ui/react-dropdown-menu and @radix-ui/react-dialog packages:

```bash
npm install @radix-ui/react-dropdown-menu @radix-ui/react-dialog
```

These are required for the View Selector dropdown and Society Selector modal in subsequent plans.
  </action>
  <verify>
Run `npm ls @radix-ui/react-dropdown-menu @radix-ui/react-dialog` to confirm packages installed.
Check package.json contains both dependencies.
  </verify>
  <done>Both @radix-ui/react-dropdown-menu and @radix-ui/react-dialog appear in package.json dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create route groups for marketing and app</name>
  <files>
    src/app/(marketing)/layout.tsx
    src/app/(marketing)/page.tsx
    src/app/(marketing)/coming-soon/page.tsx
    src/app/(marketing)/showcase/page.tsx
    src/app/(app)/layout.tsx
    src/app/(app)/dashboard/page.tsx
    src/app/layout.tsx
  </files>
  <action>
**Step 1: Create (marketing) route group**

Create `src/app/(marketing)/layout.tsx` - move the current root layout content here:
- Import fonts (satoshi, funnelDisplay) using same localFont/Google Font setup
- Import Header from @/components/layout/header
- Import globals.css (path: ../../globals.css)
- Set metadata (title, description)
- Render html/body with Header, children, and optionally Footer

Move existing pages into (marketing):
- Move `src/app/page.tsx` to `src/app/(marketing)/page.tsx`
- Move `src/app/coming-soon/page.tsx` to `src/app/(marketing)/coming-soon/page.tsx`
- Move `src/app/showcase/page.tsx` to `src/app/(marketing)/showcase/page.tsx`

**Step 2: Create (app) route group**

Create `src/app/(app)/layout.tsx`:
- Import same fonts (satoshi, funnelDisplay)
- Import globals.css (path: ../../globals.css)
- Set metadata for app (title: "Dashboard | Artificial Societies")
- Do NOT import Header - app uses Sidebar instead
- Render html/body with flex container for future sidebar + main content
- Children wrapped in main tag with flex-1

Create `src/app/(app)/dashboard/page.tsx`:
- Simple placeholder page with "Dashboard" heading
- Dark background matching design (#0A0A0A / bg-background)
- Center text "Dashboard coming soon" temporarily

**Step 3: Convert root layout to redirect**

Update `src/app/layout.tsx` to be minimal:
- Keep only globals.css import and basic html/body structure
- This file may be needed for global providers later
- OR delete it entirely if Next.js allows (route groups can have their own root layouts)

Note: Next.js App Router allows route groups to have their own root layouts with html/body. The root layout.tsx can be deleted if each route group has its own complete layout.
  </action>
  <verify>
1. Run `npm run dev` and visit http://localhost:3000 - landing page should render with Header
2. Visit http://localhost:3000/coming-soon - should render with Header
3. Visit http://localhost:3000/dashboard - should render WITHOUT Header, show placeholder
4. Run `npm run build` - should complete without errors
  </verify>
  <done>
- Landing pages (/, /coming-soon, /showcase) render with Header
- Dashboard page (/dashboard) renders without Header
- Build passes without errors
- Both route groups have separate root layouts
  </done>
</task>

</tasks>

<verification>
1. `npm run build` passes without errors
2. Landing pages at /, /coming-soon, /showcase show Header
3. App page at /dashboard has no Header (different layout)
4. Package.json includes @radix-ui/react-dropdown-menu and @radix-ui/react-dialog
</verification>

<success_criteria>
- Route groups (marketing) and (app) exist with separate layouts
- Landing pages unaffected by restructure
- Dashboard route exists and uses app layout
- Radix UI dependencies installed and available
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/04-app-layout-navigation/04-01-SUMMARY.md`
</output>
