---
phase: 04-app-layout-navigation
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified:
  - src/components/app/society-selector.tsx
  - src/components/app/view-selector.tsx
  - src/components/app/sidebar.tsx
  - src/components/app/index.ts
autonomous: true

must_haves:
  truths:
    - "Society selector opens as full modal when clicked"
    - "Society selector shows Personal and Target society sections"
    - "View selector opens as dropdown when clicked"
    - "View selector shows all view options (Country, City, Generation, etc.)"
    - "Selecting an option updates the displayed value"
  artifacts:
    - path: "src/components/app/society-selector.tsx"
      provides: "Society selector modal"
      contains: "Dialog.Root"
      min_lines: 80
    - path: "src/components/app/view-selector.tsx"
      provides: "View selector dropdown"
      contains: "DropdownMenu.Root"
      min_lines: 50
  key_links:
    - from: "src/components/app/sidebar.tsx"
      to: "src/components/app/society-selector.tsx"
      via: "import and render"
      pattern: "SocietySelector"
    - from: "src/components/app/sidebar.tsx"
      to: "src/components/app/view-selector.tsx"
      via: "import and render"
      pattern: "ViewSelector"
---

<objective>
Build the Society Selector modal and View Selector dropdown using Radix UI primitives.

Purpose: Complete the interactive selector components that appear in the sidebar. Both manage their own state for Phase 4 (mock data). Society management functionality comes in Phase 5.

Output: Working modal and dropdown components integrated into the sidebar.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/04-app-layout-navigation/04-RESEARCH.md
@.reference/app/society-selector.md
@.reference/app/view-selector.md
@src/components/app/sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Society Selector modal</name>
  <files>src/components/app/society-selector.tsx</files>
  <action>
Create Society Selector using Radix Dialog, matching .reference/app/society-selector.md.

**Import Radix Dialog:**
```typescript
import * as Dialog from "@radix-ui/react-dialog";
```

**Structure:**
- Dialog.Root with open state
- Dialog.Trigger: styled button matching sidebar dropdown style
- Dialog.Portal containing:
  - Dialog.Overlay: fixed inset-0, bg-black/50, backdrop blur optional
  - Dialog.Content: centered modal with society cards

**Trigger button styling (same as current sidebar button):**
- Full width
- bg-zinc-900, border border-zinc-800, rounded-lg
- px-4 py-3
- Flex between with ChevronDown icon
- Show currently selected society name

**Modal content styling:**
- bg-zinc-900, border border-zinc-800, rounded-xl
- min-width: 600px, max-width: 90vw
- p-6
- Fixed center position (left-1/2, top-1/2, -translate-x/y-1/2)

**Modal structure:**
1. Close button (X icon, top-right)
2. "Personal Societies" section:
   - Section title (text-sm font-semibold text-white)
   - Grid of society cards (2 columns)
   - Include "Create a Personal Society" card with plus icon

3. Separator (border-t, zinc-800, my-6)

4. "Target Societies" section:
   - Same structure as Personal
   - Include "Create a Target Society" card

**Society card styling:**
- bg-zinc-800/50, border border-zinc-700, rounded-lg
- p-4
- Hover: border-zinc-600
- Selected: ring-2 ring-accent
- Show society name, member count badge

**Mock data:**
```typescript
const MOCK_SOCIETIES = {
  personal: [
    { id: "1", name: "Zurich Founders", members: 156 },
    { id: "2", name: "Swiss Tech", members: 89 },
  ],
  target: [
    { id: "3", name: "EU Executives", members: 342 },
  ],
};
```

**State management:**
- useState for currently selected society
- Selection updates trigger text and closes modal
- Pass selection up if needed via optional callback prop

**Create society cards are UI-only:**
- Show plus icon and "Create a [Personal/Target] Society" text
- onClick: console.log("Create society") - functionality in Phase 5
  </action>
  <verify>
1. Click society selector in sidebar - modal opens
2. Society cards display with names
3. Clicking a society selects it and closes modal
4. Trigger button shows selected society name
5. ESC key closes modal
  </verify>
  <done>
- Society Selector modal opens/closes correctly
- Shows Personal and Target sections with mock societies
- Selection updates displayed value
- Close button and ESC work
  </done>
</task>

<task type="auto">
  <name>Task 2: Create View Selector dropdown</name>
  <files>src/components/app/view-selector.tsx</files>
  <action>
Create View Selector using Radix DropdownMenu, matching .reference/app/view-selector.md.

**Import Radix DropdownMenu:**
```typescript
import * as DropdownMenu from "@radix-ui/react-dropdown-menu";
```

**Structure:**
- DropdownMenu.Root
- DropdownMenu.Trigger: styled button matching sidebar style
- DropdownMenu.Portal containing:
  - DropdownMenu.Content: dropdown panel with view options

**Trigger button styling:**
- Same as society selector trigger
- Full width, bg-zinc-900, border-zinc-800, rounded-lg, px-4 py-3
- Show currently selected view

**Dropdown content styling:**
- bg-zinc-900, border border-zinc-800, rounded-lg
- py-2
- min-width: 200px (or full width of trigger)
- shadow-lg

**View options:**
```typescript
const VIEW_OPTIONS = [
  "Country",
  "City",
  "Generation",
  "Role Level",
  "Sector",
  "Role Area",
];
```

**Item styling:**
- px-4 py-2.5
- text-sm text-zinc-200
- hover:bg-zinc-800
- cursor-pointer
- outline-none (radix handles focus)
- Selected item could show checkmark (optional)

**State management:**
- useState for selected view (default: "Country")
- onSelect updates state and closes dropdown

**Label (optional):**
- DropdownMenu.Label at top: "Views" in uppercase zinc-500 text-xs
  </action>
  <verify>
1. Click view selector in sidebar - dropdown opens
2. All 6 view options visible
3. Clicking option selects it and closes dropdown
4. Trigger shows selected view
5. Click outside closes dropdown
  </verify>
  <done>
- View Selector dropdown opens/closes correctly
- All view options displayed
- Selection updates trigger text
- Proper hover/focus states
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate selectors into Sidebar</name>
  <files>
    src/components/app/sidebar.tsx
    src/components/app/index.ts
  </files>
  <action>
Replace the placeholder buttons in Sidebar with the actual selector components.

**Update Sidebar:**
1. Import SocietySelector and ViewSelector
2. Replace the society dropdown trigger button with `<SocietySelector />`
3. Replace the view dropdown trigger button with `<ViewSelector />`
4. Keep section labels ("Current Society", "Current View")

**Update barrel export:**
```typescript
export { Sidebar } from "./sidebar";
export { SidebarNavItem } from "./sidebar-nav-item";
export { SocietySelector } from "./society-selector";
export { ViewSelector } from "./view-selector";
```

**Verify styling consistency:**
- Selectors should fit seamlessly in sidebar layout
- Labels still appear above each selector
- Spacing matches reference
  </action>
  <verify>
1. Sidebar renders with working Society and View selectors
2. Both open/close correctly
3. Selections persist
4. Build passes
  </verify>
  <done>
- Sidebar uses SocietySelector and ViewSelector components
- Both are interactive and functional
- Barrel exports updated
  </done>
</task>

</tasks>

<verification>
1. Visit /dashboard
2. Click "Current Society" dropdown - modal opens with society cards
3. Select a society - modal closes, trigger updates
4. Click "Current View" dropdown - shows 6 options
5. Select a view - dropdown closes, trigger updates
6. ESC and outside click close both
7. Build passes
</verification>

<success_criteria>
- Society Selector is a Radix Dialog modal with mock societies
- View Selector is a Radix DropdownMenu with all 6 options
- Both update their displayed value on selection
- Proper accessibility (keyboard nav, focus management)
- Integrated seamlessly into Sidebar
</success_criteria>

<output>
After completion, create `.planning/phases/04-app-layout-navigation/04-03-SUMMARY.md`
</output>
