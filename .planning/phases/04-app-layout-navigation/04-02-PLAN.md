---
phase: 04-app-layout-navigation
plan: 02
type: execute
wave: 2
depends_on: ["04-01"]
files_modified:
  - src/components/app/sidebar.tsx
  - src/components/app/sidebar-nav-item.tsx
  - src/components/app/index.ts
  - src/app/(app)/layout.tsx
  - src/app/(app)/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "Sidebar is visible on desktop (248px wide)"
    - "Sidebar contains logo, society selector trigger, view selector trigger"
    - "Sidebar has bottom navigation items (Manage plan, Feedback, Guide, Log Out)"
    - "Main content area fills remaining space"
  artifacts:
    - path: "src/components/app/sidebar.tsx"
      provides: "Main sidebar component"
      min_lines: 100
    - path: "src/components/app/sidebar-nav-item.tsx"
      provides: "Reusable sidebar nav item"
      exports: ["SidebarNavItem"]
    - path: "src/app/(app)/layout.tsx"
      provides: "App layout with sidebar"
      contains: "<Sidebar"
  key_links:
    - from: "src/app/(app)/layout.tsx"
      to: "src/components/app/sidebar.tsx"
      via: "import"
      pattern: "import.*Sidebar.*from"
---

<objective>
Build the app layout shell with sidebar structure.

Purpose: Create the fixed sidebar with all UI elements in place (triggers, nav items). Dropdowns/modals are just triggers in this plan - actual functionality comes in Plan 03.

Output: Complete sidebar component integrated into app layout.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@.planning/phases/04-app-layout-navigation/04-RESEARCH.md
@.planning/phases/04-app-layout-navigation/04-CONTEXT.md
@.reference/app/sidebar.md
@src/app/(app)/layout.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SidebarNavItem component</name>
  <files>src/components/app/sidebar-nav-item.tsx</files>
  <action>
Create a reusable nav item component for sidebar bottom menu items.

Structure:
```typescript
"use client";

import { cn } from "@/lib/utils";
import type { LucideIcon } from "lucide-react";

interface SidebarNavItemProps {
  icon: LucideIcon;
  label: string;
  onClick?: () => void;
  className?: string;
}

export function SidebarNavItem({ icon: Icon, label, onClick, className }: SidebarNavItemProps) {
  return (
    <button
      onClick={onClick}
      className={cn(
        "flex w-full items-center justify-between py-3 text-sm text-zinc-400 transition-colors hover:text-white",
        className
      )}
    >
      <span>{label}</span>
      <Icon className="h-[18px] w-[18px]" />
    </button>
  );
}
```

Styling from reference:
- Full width flex with space-between
- Text: zinc-400, hover: white
- Icon: 18px
- Padding: py-3
- Cursor: pointer (via button element)
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>SidebarNavItem component exists and exports correctly</done>
</task>

<task type="auto">
  <name>Task 2: Create Sidebar component</name>
  <files>
    src/components/app/sidebar.tsx
    src/components/app/index.ts
  </files>
  <action>
Create the main Sidebar component matching .reference/app/sidebar.md specs.

**Dimensions & Layout:**
- Width: 248px fixed
- Height: 100vh
- Background: #0A0A0A
- Border right: 1px solid #27272A (zinc-800)
- Padding: 16px
- Flex column layout

**Structure from top to bottom:**

1. **Header row** (flex justify-between):
   - Logo: Stylized "∧" SVG mark (same as landing Header), links to "/"
   - Collapse button (icon only, no functionality yet - UI placeholder)

2. **Society selector section:**
   - Label: "Current Society" (uppercase, zinc-500, text-xs, tracking-wide)
   - Dropdown trigger button (full width, zinc-900 bg, zinc-800 border, rounded-lg, px-4 py-3)
   - Placeholder text: "Zurich Founders"
   - ChevronDown icon on right
   - Note: This is just the trigger - modal comes in Plan 03

3. **View selector section:**
   - Label: "Current View" (same style as above)
   - Dropdown trigger button (same style)
   - Placeholder text: "Country"
   - Note: This is just the trigger - dropdown comes in Plan 03

4. **Create new test button:**
   - Full width, flex between
   - Text: "Create a new test"
   - Plus icon on right (16px)
   - Border bottom for separator
   - onClick: console.log placeholder (functionality in Phase 6)

5. **Spacer** (flex-1 to push bottom items down)

6. **Separator line** (border-top, zinc-800)

7. **Bottom nav items** (using SidebarNavItem):
   - "Manage plan" with CreditCard icon
   - "Leave Feedback" with MessageSquare icon
   - "Product Guide" with BookOpen icon
   - "Log Out" with LogOut icon → onClick navigates to "/" (simulates logout)

8. **Version text:**
   - "Version 2.1"
   - Centered, zinc-600, text-xs
   - mt-2

**Icons from Lucide:**
- ChevronDown, Plus, CreditCard, MessageSquare, BookOpen, LogOut, Columns (for collapse)

**Create barrel export:**
```typescript
// src/components/app/index.ts
export { Sidebar } from "./sidebar";
export { SidebarNavItem } from "./sidebar-nav-item";
```
  </action>
  <verify>
1. Import Sidebar in app layout and render
2. Visual check: sidebar appears with correct styling
3. Log Out button navigates to landing page
  </verify>
  <done>
- Sidebar component renders with all sections
- Society and View selectors show as styled buttons (triggers only)
- Bottom nav items render with icons
- Log Out navigates to "/"
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate Sidebar into app layout</name>
  <files>
    src/app/(app)/layout.tsx
    src/app/(app)/dashboard/page.tsx
  </files>
  <action>
Update the app layout to include Sidebar.

**App layout structure:**
```tsx
<div className="flex h-screen">
  <Sidebar />
  <main className="flex-1 overflow-auto bg-[#0A0A0A]">
    {children}
  </main>
</div>
```

**Update dashboard page:**
- Remove temporary placeholder text
- Add proper layout for network viz area (will be built in Plan 04)
- For now: dark empty container that fills the space
- Add hidden h1 for accessibility: "Dashboard"

Key considerations:
- Sidebar is outside main to stay fixed
- Main content scrolls independently if overflow
- Background matches design (#0A0A0A)
  </action>
  <verify>
1. Run `npm run dev` and visit /dashboard
2. Sidebar visible on left (248px)
3. Main content area fills remaining width
4. Clicking "Log Out" navigates to landing page
5. Run `npm run build` - passes
  </verify>
  <done>
- Dashboard shows sidebar + main content layout
- Sidebar is 248px fixed width
- Main area fills remaining space
- Build passes
  </done>
</task>

</tasks>

<verification>
1. Visit /dashboard - sidebar visible with all sections
2. Sidebar dimensions match spec (248px width, full height)
3. All bottom nav items visible with icons
4. Log Out navigates to landing
5. Society/View selector triggers styled correctly (no dropdown yet)
6. Build passes
</verification>

<success_criteria>
- Sidebar component complete with all visual elements
- App layout correctly uses flex with Sidebar + main
- Bottom nav items render with proper icons
- Log Out simulates logout (redirects to /)
- Selector triggers are styled buttons (functionality in next plan)
</success_criteria>

<output>
After completion, create `.planning/phases/04-app-layout-navigation/04-02-SUMMARY.md`
</output>
