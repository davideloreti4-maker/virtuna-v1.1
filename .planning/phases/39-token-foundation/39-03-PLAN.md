---
phase: 39-token-foundation
plan: 03
type: execute
wave: 3
depends_on: ["39-02"]
files_modified:
  - .planning/phases/39-token-foundation/39-CORAL-SCALE.md
  - src/types/design-tokens.ts
autonomous: true

must_haves:
  truths:
    - "Coral scale (100-900) generated using OKLCH color space"
    - "All coral text/background combinations verified for WCAG AA (4.5:1)"
    - "Darkened coral variant exists for text on light backgrounds"
    - "Safe color pairs documented for component usage"
  artifacts:
    - path: ".planning/phases/39-token-foundation/39-CORAL-SCALE.md"
      provides: "Complete coral scale with WCAG verification"
      contains: "## WCAG Compliance Matrix"
    - path: "src/types/design-tokens.ts"
      provides: "TypeScript types for design tokens"
      exports: ["ColorScale", "SemanticColor", "SpacingToken"]
  key_links:
    - from: "39-CORAL-SCALE.md"
      to: "globals.css implementation"
      via: "color values ready for Plan 04"
      pattern: "oklch values documented"
---

<objective>
Generate accessible coral color scale (100-900) and create TypeScript types for design tokens.

Purpose: Coral #FF7F50 replaces Raycast's brand color. The scale must pass WCAG AA for all text/background combinations.

Output: 39-CORAL-SCALE.md with complete scale and WCAG verification, src/types/design-tokens.ts with type definitions.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/39-token-foundation/39-RESEARCH.md
@.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md
@.planning/phases/39-token-foundation/39-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Generate coral scale using OKLCH</name>
  <files>.planning/phases/39-token-foundation/39-CORAL-SCALE.md</files>
  <action>
    Generate a coral color scale (100-900) using OKLCH color space:

    Base color: #FF7F50 (coral)
    OKLCH equivalent: approximately oklch(0.72 0.16 40)

    Create 39-CORAL-SCALE.md with:

    1. **Scale Generation** (lightness progression):
       - 100: L=0.97 (very light, near white)
       - 200: L=0.93
       - 300: L=0.87
       - 400: L=0.78
       - 500: L=0.72 (base coral)
       - 600: L=0.60
       - 700: L=0.48
       - 800: L=0.38
       - 900: L=0.28 (very dark)

    2. For each step, provide:
       - OKLCH value: oklch(L C H)
       - Hex equivalent (approximate)
       - Chroma (C) may need adjustment per step for vibrancy

    3. **WCAG Compliance Matrix**:

    Create a table showing contrast ratios for common combinations:

    | Coral Step | On Dark (#0D0D0D) | On Light (#F5F5F5) | Safe For |
    |------------|-------------------|--------------------| ---------|
    | 100        | X.XX:1            | X.XX:1             | bg only  |
    | 200        | X.XX:1            | X.XX:1             | bg only  |
    | ...        | ...               | ...                | ...      |
    | 500        | X.XX:1            | X.XX:1             | varies   |
    | ...        | ...               | ...                | ...      |
    | 900        | X.XX:1            | X.XX:1             | text     |

    4. **Safe Color Pairs** documentation:
       - Text on dark bg: coral-400, coral-500 (whichever passes 4.5:1)
       - Text on light bg: coral-700, coral-800, coral-900 (test each)
       - Background with white text: coral-500+ (test each)

    5. **Darkened variant** for COL-03:
       - Create coral-text-on-light specifically optimized for text on light backgrounds
       - Should pass 4.5:1 on #F5F5F5 and #FFFFFF

    Use these contrast ratio formulas (or reference WebAIM):
    - AA normal text: 4.5:1
    - AA large text: 3:1
    - AAA normal text: 7:1

    NOTE: Exact contrast ratios should be verified. If unsure, mark as "needs verification" and provide the OKLCH values for manual checking.
  </action>
  <verify>
    - 39-CORAL-SCALE.md exists
    - All 9 steps (100-900) defined with OKLCH values
    - WCAG compliance matrix present
    - Safe color pairs documented
    - Darkened text variant defined
  </verify>
  <done>Coral scale generated with accessibility documentation</done>
</task>

<task type="auto">
  <name>Task 2: Create TypeScript design token types</name>
  <files>src/types/design-tokens.ts</files>
  <action>
    Create src/types/design-tokens.ts with TypeScript types for the design system:

    ```typescript
    /**
     * Design Token Types for Virtuna v2.0
     *
     * These types provide type safety for design token usage across the codebase.
     * Values correspond to CSS custom properties defined in globals.css @theme.
     */

    /** Primitive color scale steps (100-900) */
    export type ColorScale = 100 | 200 | 300 | 400 | 500 | 600 | 700 | 800 | 900;

    /** Semantic color tokens for component usage */
    export type SemanticColor =
      | 'background'
      | 'background-elevated'
      | 'surface'
      | 'surface-elevated'
      | 'foreground'
      | 'foreground-secondary'
      | 'foreground-muted'
      | 'accent'
      | 'accent-hover'
      | 'accent-active'
      | 'success'
      | 'warning'
      | 'error'
      | 'info'
      | 'border'
      | 'border-hover';

    /** Spacing scale tokens (8px base, geometric progression) */
    export type SpacingToken = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 8 | 10 | 12 | 16 | 20 | 24;

    /** Shadow elevation tokens */
    export type ShadowToken = 'sm' | 'md' | 'lg' | 'xl' | 'glass' | 'glow-accent';

    /** Border radius scale tokens */
    export type RadiusToken = 'none' | 'sm' | 'md' | 'lg' | 'xl' | '2xl' | 'full';

    /** Animation duration tokens */
    export type DurationToken = 'fast' | 'normal' | 'slow';

    /** Easing function tokens */
    export type EaseToken = 'out-cubic' | 'out-quart' | 'in-out' | 'spring';

    /** Z-index layer tokens */
    export type ZIndexToken =
      | 'base'
      | 'dropdown'
      | 'sticky'
      | 'modal-backdrop'
      | 'modal'
      | 'toast'
      | 'tooltip';

    /** Responsive breakpoint tokens */
    export type BreakpointToken = 'sm' | 'md' | 'lg' | 'xl' | '2xl';

    /** Font family tokens */
    export type FontFamilyToken = 'display' | 'sans' | 'mono';

    /** Font weight tokens */
    export type FontWeightToken = 'regular' | 'medium' | 'semibold' | 'bold';

    /** Text size tokens */
    export type TextSizeToken =
      | 'xs'
      | 'sm'
      | 'base'
      | 'lg'
      | 'xl'
      | '2xl'
      | '3xl'
      | '4xl'
      | '5xl'
      | 'hero';

    /**
     * Helper type for accessing coral scale values
     * Usage: `color-coral-${CoralStep}` in Tailwind classes
     */
    export type CoralStep = ColorScale;

    /**
     * CSS variable accessor helper
     * Usage: cssVar('color-accent') returns 'var(--color-accent)'
     */
    export function cssVar(token: string): string {
      return `var(--${token})`;
    }
    ```

    Ensure the file is properly formatted and exports all types.
  </action>
  <verify>
    - src/types/design-tokens.ts exists
    - ColorScale type exported
    - SemanticColor type exported
    - SpacingToken type exported
    - cssVar helper function exported
    - No TypeScript errors (`pnpm tsc --noEmit` passes)
  </verify>
  <done>TypeScript design token types created</done>
</task>

</tasks>

<verification>
- [ ] 39-CORAL-SCALE.md created with complete 100-900 scale
- [ ] OKLCH values documented for each step
- [ ] WCAG compliance matrix with contrast ratios
- [ ] Safe color pairs for text/background documented
- [ ] Darkened variant for text on light backgrounds
- [ ] src/types/design-tokens.ts created with all token types
- [ ] TypeScript compilation passes
</verification>

<success_criteria>
Coral scale ready for implementation:
- All 9 steps defined with OKLCH values
- WCAG AA compliance verified (or marked for manual verification)
- Safe pairs documented for component usage
- TypeScript types available for type-safe token usage
</success_criteria>

<output>
After completion, create `.planning/phases/39-token-foundation/39-03-SUMMARY.md`
</output>
