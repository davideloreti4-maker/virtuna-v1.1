---
phase: 39-token-foundation
plan: 04
type: execute
wave: 4
depends_on: ["39-03"]
files_modified:
  - src/app/globals.css
autonomous: true

must_haves:
  truths:
    - "Primitive color tokens defined (coral scale, gray scale, semantic colors)"
    - "Semantic tokens reference primitives via var()"
    - "All typography tokens implemented (font families, sizes, weights, line heights)"
    - "All spacing tokens implemented (8px base scale + component-specific)"
    - "All shadow tokens implemented (sm through glass)"
    - "All border tokens implemented (radius and width scales)"
    - "All animation tokens implemented (durations, easings, z-index)"
    - "All breakpoint tokens implemented"
    - "All gradient tokens implemented"
  artifacts:
    - path: "src/app/globals.css"
      provides: "Complete two-tier token system in @theme"
      contains: "PRIMITIVE TOKENS"
  key_links:
    - from: "globals.css @theme"
      to: "Tailwind utilities"
      via: "CSS custom properties"
      pattern: "bg-background, text-accent, etc."
---

<objective>
Implement complete two-tier token architecture in globals.css using extracted Raycast values.

Purpose: Create the design system foundation that enables all future component development with consistent, accessible tokens.

Output: globals.css with complete primitive + semantic token layers, organized and documented.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/phases/39-token-foundation/39-RESEARCH.md
@.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md
@.planning/phases/39-token-foundation/39-CORAL-SCALE.md
@.planning/phases/39-token-foundation/39-03-SUMMARY.md
@src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Implement primitive tokens layer</name>
  <files>src/app/globals.css</files>
  <action>
    Replace the current globals.css @theme section with a properly structured two-tier system.

    PRIMITIVE TOKENS LAYER (values from 39-EXTRACTION-DATA.md and 39-CORAL-SCALE.md):

    ```css
    @theme {
      /* ============================================
       * PRIMITIVE TOKENS (Layer 1)
       * Raw values - referenced by semantic layer
       * Source: raycast.com extraction + coral scale
       * ============================================ */

      /* --- Coral Scale (brand, replaces Raycast purple) --- */
      /* Source: 39-CORAL-SCALE.md */
      --color-coral-100: oklch(0.97 0.03 40);
      --color-coral-200: oklch(0.93 0.06 40);
      --color-coral-300: oklch(0.87 0.10 40);
      --color-coral-400: oklch(0.78 0.14 40);
      --color-coral-500: oklch(0.72 0.16 40);  /* Base #FF7F50 */
      --color-coral-600: oklch(0.60 0.14 40);
      --color-coral-700: oklch(0.48 0.12 40);
      --color-coral-800: oklch(0.38 0.10 40);
      --color-coral-900: oklch(0.28 0.08 40);

      /* --- Gray Scale --- */
      /* Source: raycast.com body/text extraction */
      --color-gray-50: oklch(0.98 0 0);
      --color-gray-100: oklch(0.96 0 0);
      --color-gray-200: oklch(0.90 0 0);
      --color-gray-300: oklch(0.80 0 0);
      --color-gray-400: oklch(0.70 0 0);
      --color-gray-500: oklch(0.60 0 0);
      --color-gray-600: oklch(0.50 0 0);
      --color-gray-700: oklch(0.40 0 0);
      --color-gray-800: oklch(0.25 0 0);
      --color-gray-900: oklch(0.18 0.02 264);
      --color-gray-950: oklch(0.13 0.02 264);

      /* --- Semantic Colors (raw values) --- */
      --color-success-raw: oklch(0.68 0.17 145);
      --color-warning-raw: oklch(0.75 0.15 85);
      --color-error-raw: oklch(0.60 0.20 25);
      --color-info-raw: oklch(0.62 0.19 250);

      /* --- Spacing Scale (8px base) --- */
      --spacing-0: 0;
      --spacing-1: 4px;
      --spacing-2: 8px;
      --spacing-3: 12px;
      --spacing-4: 16px;
      --spacing-5: 20px;
      --spacing-6: 24px;
      --spacing-8: 32px;
      --spacing-10: 40px;
      --spacing-12: 48px;
      --spacing-16: 64px;
      --spacing-20: 80px;
      --spacing-24: 96px;
    ```

    Use actual values from 39-EXTRACTION-DATA.md where available. If extraction data has hex values, convert them to OKLCH for consistency. Document source for each value.
  </action>
  <verify>
    - @theme section has PRIMITIVE TOKENS comment block
    - Coral scale 100-900 defined
    - Gray scale defined
    - Spacing scale defined
    - All primitive values use OKLCH
  </verify>
  <done>Primitive token layer implemented</done>
</task>

<task type="auto">
  <name>Task 2: Implement semantic tokens layer</name>
  <files>src/app/globals.css</files>
  <action>
    Add semantic tokens layer that references primitives:

    ```css
      /* ============================================
       * SEMANTIC TOKENS (Layer 2)
       * Contextual usage - used in components
       * References primitives via var()
       * ============================================ */

      /* --- Backgrounds --- */
      /* Source: raycast.com body background */
      --color-background: var(--color-gray-950);
      --color-background-elevated: var(--color-gray-900);
      --color-surface: oklch(0.18 0.02 264);
      --color-surface-elevated: oklch(0.23 0.02 264);

      /* --- Text --- */
      --color-foreground: var(--color-gray-50);
      --color-foreground-secondary: var(--color-gray-400);
      --color-foreground-muted: var(--color-gray-600);

      /* --- Accent (Coral) --- */
      --color-accent: var(--color-coral-500);
      --color-accent-hover: var(--color-coral-400);
      --color-accent-active: var(--color-coral-600);
      --color-accent-foreground: var(--color-gray-50);

      /* --- Semantic Status --- */
      --color-success: var(--color-success-raw);
      --color-warning: var(--color-warning-raw);
      --color-error: var(--color-error-raw);
      --color-info: var(--color-info-raw);

      /* --- Borders --- */
      --color-border: oklch(1 0 0 / 0.1);
      --color-border-hover: oklch(1 0 0 / 0.15);
      --color-border-glass: oklch(1 0 0 / 0.1);

      /* --- States --- */
      --color-hover: oklch(1 0 0 / 0.05);
      --color-active: oklch(1 0 0 / 0.1);
      --color-disabled: oklch(0.50 0 0 / 0.5);
    ```

    Continue with typography, shadows, borders, animation, breakpoints, and gradients.
    Reference 39-RESEARCH.md for complete token list structure.
  </action>
  <verify>
    - SEMANTIC TOKENS comment block present
    - Background tokens reference primitives
    - Text tokens reference primitives
    - Accent tokens reference coral scale
    - Status colors defined
    - Border and state colors defined
  </verify>
  <done>Semantic token layer implemented</done>
</task>

<task type="auto">
  <name>Task 3: Implement remaining token categories</name>
  <files>src/app/globals.css</files>
  <action>
    Complete the token system with all remaining categories:

    **Typography:**
    ```css
      /* --- Font Families --- */
      --font-display: var(--font-funnel-display), sans-serif;
      --font-sans: var(--font-satoshi), ui-sans-serif, system-ui, sans-serif;
      --font-mono: ui-monospace, SFMono-Regular, monospace;

      /* --- Font Sizes (from extraction) --- */
      --text-xs: 12px;
      --text-sm: 14px;
      --text-base: 16px;
      --text-lg: 18px;
      --text-xl: 20px;
      --text-2xl: 24px;
      --text-3xl: 30px;
      --text-4xl: 36px;
      --text-5xl: 48px;
      --text-hero: 52px;

      /* --- Font Weights --- */
      --font-regular: 400;
      --font-medium: 500;
      --font-semibold: 600;
      --font-bold: 700;

      /* --- Line Heights --- */
      --leading-none: 1;
      --leading-tight: 1.2;
      --leading-snug: 1.4;
      --leading-normal: 1.6;
      --leading-relaxed: 1.8;

      /* --- Letter Spacing --- */
      --tracking-tight: -0.02em;
      --tracking-normal: 0;
      --tracking-wide: 0.02em;
    ```

    **Shadows:**
    ```css
      /* --- Shadow Scale --- */
      --shadow-sm: 0 1px 2px oklch(0 0 0 / 0.2);
      --shadow-md: 0 4px 6px oklch(0 0 0 / 0.15), 0 2px 4px oklch(0 0 0 / 0.1);
      --shadow-lg: 0 10px 15px oklch(0 0 0 / 0.15), 0 4px 6px oklch(0 0 0 / 0.1);
      --shadow-xl: 0 20px 25px oklch(0 0 0 / 0.15), 0 10px 10px oklch(0 0 0 / 0.1), 0 0 0 1px oklch(1 0 0 / 0.05);
      --shadow-glass: 0 8px 32px oklch(0 0 0 / 0.2), inset 0 1px 0 oklch(1 0 0 / 0.1);
      --shadow-glow-accent: 0 0 20px oklch(0.72 0.16 40 / 0.3);
    ```

    **Border Radius:**
    ```css
      /* --- Radius Scale --- */
      --radius-none: 0;
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-2xl: 24px;
      --radius-full: 9999px;
    ```

    **Animation:**
    ```css
      /* --- Durations --- */
      --duration-fast: 150ms;
      --duration-normal: 300ms;
      --duration-slow: 500ms;

      /* --- Easings --- */
      --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);
      --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);
      --ease-in-out: cubic-bezier(0.42, 0, 0.58, 1);
      --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);

      /* --- Z-Index Scale --- */
      --z-base: 0;
      --z-dropdown: 100;
      --z-sticky: 200;
      --z-modal-backdrop: 300;
      --z-modal: 400;
      --z-toast: 500;
      --z-tooltip: 600;
    ```

    **Breakpoints:**
    ```css
      /* --- Breakpoints (literal values required) --- */
      --breakpoint-sm: 640px;
      --breakpoint-md: 768px;
      --breakpoint-lg: 1024px;
      --breakpoint-xl: 1280px;
      --breakpoint-2xl: 1536px;
    ```

    **Gradients:**
    ```css
      /* --- Gradients --- */
      --gradient-coral: linear-gradient(135deg, var(--color-coral-400), var(--color-coral-500), var(--color-coral-600));
      --gradient-card-bg: linear-gradient(180deg, oklch(0.20 0.02 264), oklch(0.16 0.02 264));
      --gradient-overlay: linear-gradient(180deg, transparent, oklch(0 0 0 / 0.8));
      --gradient-glow-coral: radial-gradient(circle, oklch(0.72 0.16 40 / 0.2), transparent 70%);
    }
    ```

    Preserve existing keyframes and utility classes. Ensure proper closing of @theme block.
  </action>
  <verify>
    - Typography tokens complete (families, sizes, weights, line heights, letter spacing)
    - Shadow scale complete (sm through glass + glow)
    - Border radius scale complete
    - Animation tokens complete (durations, easings, z-index)
    - Breakpoints defined with literal values
    - Gradients defined
    - @theme block properly closed
    - Existing keyframes preserved
    - Build passes: `pnpm build`
  </verify>
  <done>Complete token system implemented in globals.css</done>
</task>

</tasks>

<verification>
- [ ] Two-tier architecture visible (PRIMITIVE and SEMANTIC comment blocks)
- [ ] Coral scale tokens accessible as `--color-coral-{step}`
- [ ] Semantic tokens reference primitives via var()
- [ ] All 9 token categories implemented:
  - [ ] Colors (primitive + semantic)
  - [ ] Typography (families, sizes, weights, heights, spacing)
  - [ ] Spacing (scale + component-specific)
  - [ ] Shadows (elevation scale)
  - [ ] Borders (radius + width)
  - [ ] Animation (durations, easings)
  - [ ] Z-index scale
  - [ ] Breakpoints
  - [ ] Gradients
- [ ] Build passes without errors
- [ ] Existing functionality not broken
</verification>

<success_criteria>
globals.css contains complete design token system:
- Primitive tokens define raw values
- Semantic tokens provide contextual usage
- All Tailwind utilities work (bg-background, text-accent, etc.)
- Build passes
- No visual regressions
</success_criteria>

<output>
After completion, create `.planning/phases/39-token-foundation/39-04-SUMMARY.md`
</output>
