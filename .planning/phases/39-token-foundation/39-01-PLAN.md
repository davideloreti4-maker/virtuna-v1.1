---
phase: 39-token-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/39-token-foundation/39-EXTRACTION-DATA.md
autonomous: false

must_haves:
  truths:
    - "Global navbar styles extracted (background, blur, border, link colors, spacing)"
    - "Homepage hero section fully extracted (title, subtitle, CTAs, gradients)"
    - "Homepage feature sections extracted top-to-bottom"
    - "All typography values captured with exact computed styles"
    - "All values have source reference (element selector, section name)"
  artifacts:
    - path: ".planning/phases/39-token-foundation/39-EXTRACTION-DATA.md"
      provides: "Navbar + Homepage extraction data with source references"
      contains: "## Global Navbar"
  key_links:
    - from: "Playwright MCP"
      to: "raycast.com"
      via: "browser_navigate + browser_evaluate + browser_take_screenshot"
      pattern: "MANDATORY real browser extraction"
---

<objective>
Extract design tokens from raycast.com NAVBAR and HOMEPAGE using Playwright MCP.

Purpose: Capture real design values from Raycast. Previous execution fabricated data - this plan MANDATES real Playwright browser extraction with screenshots for verification.

Output: 39-EXTRACTION-DATA.md with navbar (global) + homepage tokens, organized by page section top-to-bottom.
</objective>

<execution_context>
@/Users/davideloreti/.claude/get-shit-done/workflows/execute-plan.md
@/Users/davideloreti/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/39-token-foundation/39-RESEARCH.md
</context>

<critical_constraint>
**MANDATORY PLAYWRIGHT USAGE**

You MUST use these Playwright MCP tools - NO fabricated data:
- `mcp__playwright__browser_navigate` - to visit each URL
- `mcp__playwright__browser_take_screenshot` - to capture visual proof
- `mcp__playwright__browser_evaluate` - to extract computed styles
- `mcp__playwright__browser_snapshot` - to understand page structure

If Playwright fails, STOP and report the error. Do NOT make up values.
</critical_constraint>

<tasks>

<task type="auto">
  <name>Task 1: Extract Global Navbar (appears on all pages)</name>
  <files>.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md</files>
  <action>
    **STEP 1: Navigate and screenshot**
    1. `mcp__playwright__browser_navigate` to https://raycast.com
    2. `mcp__playwright__browser_take_screenshot` - save as "01-navbar.png"
    3. `mcp__playwright__browser_snapshot` to understand DOM structure

    **STEP 2: Extract navbar computed styles**
    Use `mcp__playwright__browser_evaluate` with this script:

    ```javascript
    (() => {
      const getStyles = (el, props) => {
        if (!el) return null;
        const styles = window.getComputedStyle(el);
        const result = {};
        props.forEach(p => result[p] = styles.getPropertyValue(p));
        return result;
      };

      const nav = document.querySelector('nav') || document.querySelector('header');
      const navLinks = document.querySelectorAll('nav a, header a');
      const logo = document.querySelector('nav img, nav svg, header img, header svg');

      return {
        navbar: {
          element: nav?.tagName + (nav?.className ? '.' + nav.className.split(' ')[0] : ''),
          styles: getStyles(nav, [
            'background-color', 'background', 'backdrop-filter', '-webkit-backdrop-filter',
            'border-bottom', 'height', 'padding', 'position', 'top', 'z-index'
          ])
        },
        navLink: {
          count: navLinks.length,
          sample: navLinks[0] ? {
            text: navLinks[0].textContent.trim(),
            styles: getStyles(navLinks[0], [
              'color', 'font-size', 'font-weight', 'font-family',
              'padding', 'margin', 'text-decoration', 'letter-spacing'
            ])
          } : null
        },
        navLinkHover: {
          note: 'Check hover state manually - CSS :hover styles'
        },
        logo: {
          found: !!logo,
          dimensions: logo ? { width: logo.offsetWidth, height: logo.offsetHeight } : null
        },
        navSpacing: {
          gap: nav ? window.getComputedStyle(nav).gap : null,
          itemSpacing: navLinks[1] ? navLinks[1].getBoundingClientRect().left - navLinks[0]?.getBoundingClientRect().right : null
        }
      };
    })();
    ```

    **STEP 3: Document in 39-EXTRACTION-DATA.md**
    Create file with structure:
    ```markdown
    # Raycast Design Token Extraction

    Extracted: [date]
    Method: Playwright MCP (real browser)

    ## Global Navbar

    The navbar appears on all pages. Extract once, reference everywhere.

    ### Navbar Container
    - **Element:** [selector]
    - **Background:** [exact value]
    - **Backdrop-filter:** [blur value]
    - **Border-bottom:** [value]
    - **Height:** [value]
    - **Position:** [fixed/sticky]
    - **Z-index:** [value]

    ### Nav Links
    - **Color:** [value]
    - **Font-size:** [value]
    - **Font-weight:** [value]
    - **Font-family:** [value]
    - **Spacing between links:** [value]

    ### Logo
    - **Dimensions:** [width x height]

    ---
    ```
  </action>
  <verify>
    - Screenshot "01-navbar.png" exists
    - 39-EXTRACTION-DATA.md has "## Global Navbar" section
    - Navbar background color documented
    - Backdrop-filter blur value documented
    - Nav link typography documented
  </verify>
  <done>Global navbar styles extracted with Playwright</done>
</task>

<task type="auto">
  <name>Task 2: Extract Homepage - Hero Section</name>
  <files>.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md</files>
  <action>
    **STEP 1: Screenshot hero area**
    `mcp__playwright__browser_take_screenshot` - save as "02-homepage-hero.png"

    **STEP 2: Extract hero section styles**
    Use `mcp__playwright__browser_evaluate`:

    ```javascript
    (() => {
      const getStyles = (el, props) => {
        if (!el) return null;
        const styles = window.getComputedStyle(el);
        const result = {};
        props.forEach(p => result[p] = styles.getPropertyValue(p));
        return result;
      };

      // Find hero elements (adjust selectors based on snapshot)
      const heroTitle = document.querySelector('h1');
      const heroSubtitle = heroTitle?.nextElementSibling;
      const heroCTA = document.querySelector('a[href*="download"], button[class*="primary"], a[class*="button"]');
      const secondaryCTA = heroCTA?.nextElementSibling;
      const heroSection = heroTitle?.closest('section') || heroTitle?.parentElement?.parentElement;

      return {
        heroSection: {
          element: heroSection?.tagName,
          styles: getStyles(heroSection, [
            'background', 'background-color', 'background-image',
            'padding-top', 'padding-bottom', 'min-height'
          ])
        },
        heroTitle: {
          text: heroTitle?.textContent?.substring(0, 50),
          styles: getStyles(heroTitle, [
            'font-size', 'font-weight', 'font-family', 'line-height',
            'letter-spacing', 'color', 'margin-bottom', 'max-width'
          ])
        },
        heroSubtitle: {
          text: heroSubtitle?.textContent?.substring(0, 50),
          styles: getStyles(heroSubtitle, [
            'font-size', 'font-weight', 'line-height', 'color',
            'margin-bottom', 'max-width', 'opacity'
          ])
        },
        primaryCTA: {
          text: heroCTA?.textContent?.trim(),
          styles: getStyles(heroCTA, [
            'background-color', 'background', 'color',
            'font-size', 'font-weight', 'padding', 'border-radius',
            'border', 'box-shadow', 'height', 'min-width'
          ])
        },
        secondaryCTA: {
          text: secondaryCTA?.textContent?.trim(),
          styles: getStyles(secondaryCTA, [
            'background-color', 'color', 'border', 'border-radius',
            'font-size', 'font-weight', 'padding'
          ])
        }
      };
    })();
    ```

    **STEP 3: Append to 39-EXTRACTION-DATA.md**
    ```markdown
    ## Homepage

    ### Hero Section

    #### Hero Container
    - **Background:** [value - note if gradient]
    - **Padding:** [top/bottom values]

    #### Hero Title (h1)
    - **Text sample:** "[first 50 chars]"
    - **Font-size:** [value]
    - **Font-weight:** [value]
    - **Font-family:** [value]
    - **Line-height:** [value]
    - **Letter-spacing:** [value]
    - **Color:** [value]

    #### Hero Subtitle
    - **Font-size:** [value]
    - **Color:** [value]
    - **Line-height:** [value]

    #### Primary CTA Button
    - **Background:** [value]
    - **Color:** [value]
    - **Font-size:** [value]
    - **Font-weight:** [value]
    - **Padding:** [value]
    - **Border-radius:** [value]
    - **Box-shadow:** [value]

    #### Secondary CTA Button
    - **Background:** [value]
    - **Border:** [value]
    - **Color:** [value]

    ---
    ```
  </action>
  <verify>
    - Screenshot "02-homepage-hero.png" exists
    - Hero title typography fully documented
    - Primary CTA button styles documented
    - Secondary CTA button styles documented
  </verify>
  <done>Homepage hero section extracted</done>
</task>

<task type="auto">
  <name>Task 3: Extract Homepage - Remaining Sections (scroll top-to-bottom)</name>
  <files>.planning/phases/39-token-foundation/39-EXTRACTION-DATA.md</files>
  <action>
    **STEP 1: Scroll and screenshot each section**
    For each visible section below the hero:
    1. `mcp__playwright__browser_evaluate` to scroll: `window.scrollBy(0, 800)`
    2. `mcp__playwright__browser_take_screenshot` - save incrementally

    **STEP 2: Extract common patterns**
    Use `mcp__playwright__browser_evaluate`:

    ```javascript
    (() => {
      const getStyles = (el, props) => {
        if (!el) return null;
        const styles = window.getComputedStyle(el);
        const result = {};
        props.forEach(p => result[p] = styles.getPropertyValue(p));
        return result;
      };

      const getAllOfType = (selector, props, limit = 3) => {
        return Array.from(document.querySelectorAll(selector)).slice(0, limit).map((el, i) => ({
          index: i,
          text: el.textContent?.substring(0, 30),
          styles: getStyles(el, props)
        }));
      };

      return {
        // Section headings
        sectionHeadings: getAllOfType('section h2, section h3', [
          'font-size', 'font-weight', 'color', 'line-height', 'letter-spacing', 'margin-bottom'
        ]),

        // Body text
        bodyText: getAllOfType('section p', [
          'font-size', 'line-height', 'color', 'margin-bottom'
        ]),

        // Cards
        cards: getAllOfType('[class*="card"], article', [
          'background-color', 'background', 'border', 'border-radius',
          'box-shadow', 'padding', 'backdrop-filter'
        ]),

        // Feature/benefit lists
        featureItems: getAllOfType('[class*="feature"], [class*="benefit"], li', [
          'font-size', 'color', 'padding', 'margin-bottom'
        ]),

        // Icons (size reference)
        icons: getAllOfType('svg, [class*="icon"]', [
          'width', 'height', 'color', 'fill'
        ], 2),

        // Section backgrounds
        sections: Array.from(document.querySelectorAll('section')).slice(0, 5).map((s, i) => ({
          index: i,
          styles: getStyles(s, ['background-color', 'background', 'padding-top', 'padding-bottom'])
        })),

        // Grid/layout
        grids: getAllOfType('[class*="grid"]', [
          'display', 'grid-template-columns', 'gap', 'row-gap', 'column-gap'
        ], 2)
      };
    })();
    ```

    **STEP 3: Append to 39-EXTRACTION-DATA.md**
    Document each pattern found:
    - Section headings (h2, h3)
    - Body/paragraph text
    - Card components
    - Grid layouts
    - Section padding/spacing
    - Any glassmorphism effects
  </action>
  <verify>
    - Multiple screenshots showing scrolled sections
    - Section heading typography documented
    - Card styling documented
    - Grid/layout gaps documented
    - Section backgrounds documented
  </verify>
  <done>Homepage sections fully extracted top-to-bottom</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Complete extraction of:
    1. Global navbar (appears on all pages)
    2. Homepage hero section
    3. Homepage remaining sections (scrolled top-to-bottom)

    Using REAL Playwright browser - screenshots saved for verification.
  </what-built>
  <how-to-verify>
    1. Check screenshots exist: 01-navbar.png, 02-homepage-hero.png, etc.
    2. Open 39-EXTRACTION-DATA.md and verify:
       - Navbar section has backdrop-filter value
       - Hero title font-size looks correct (usually 48-72px)
       - Button border-radius captured
       - Card backgrounds and shadows documented
    3. Open raycast.com in your browser, use DevTools to spot-check 2-3 values
    4. Verify the screenshots match what you see on raycast.com
  </how-to-verify>
  <resume-signal>
    Type "approved" if navbar + homepage extraction is correct
    OR describe what's missing/wrong
  </resume-signal>
</task>

</tasks>

<verification>
- [ ] Playwright MCP used for ALL extraction (no fabricated data)
- [ ] Screenshots captured for navbar and homepage sections
- [ ] 39-EXTRACTION-DATA.md has Global Navbar section
- [ ] 39-EXTRACTION-DATA.md has Homepage section with hero + body
- [ ] All values are REAL computed styles from browser
- [ ] User has verified extraction accuracy
</verification>

<success_criteria>
Navbar + Homepage extraction complete:
- Navbar: background, blur, link styles, spacing
- Hero: title, subtitle, CTAs with full styling
- Body: section headings, cards, grids, spacing
- All values verified against screenshots
- User approval received
</success_criteria>

<output>
After completion, create `.planning/phases/39-token-foundation/39-01-SUMMARY.md`
</output>
