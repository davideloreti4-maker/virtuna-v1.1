# Milestone v2.0: Design System Foundation

**Status:** SHIPPED 2026-02-05
**Phases:** 39-44
**Total Plans:** 35

## Overview

This milestone extracted Raycast's complete design system from raycast.com and implemented it as Virtuna's foundation with coral (#FF7F50) branding. The journey progressed from token extraction and validation through core components, extended patterns, effects, showcase pages, and finally verification and documentation. Each phase built on the previous, delivering a production-ready design system enabling rapid, consistent UI development.

## Phases

### Phase 39: Token Foundation
**Goal**: Extract and validate all design tokens with two-tier architecture and accessible coral scale
**Depends on**: Nothing (fresh milestone start)
**Plans**: 4 plans

Plans:
- [x] 39-01: Homepage extraction via Playwright MCP
- [x] 39-02: Additional pages extraction (Store, Pro, AI, Pricing, Teams)
- [x] 39-03: Coral scale generation with WCAG verification + TypeScript types
- [x] 39-04: Two-tier token architecture implementation in globals.css

**Details:**
- Extracted 100+ tokens from raycast.com across 6 pages using Playwright MCP
- Built coral scale (100-900) with WCAG AA compliance verification
- Implemented two-tier architecture: primitive tokens (raw values) -> semantic tokens (contextual usage)
- All tokens accessible as Tailwind v4 utilities via @theme block
- 57 requirements covered (EXT-01 to EXT-13, COL-01 to COL-08, TYP-01 to TYP-06, SPC-01 to SPC-04, SHD-01 to SHD-04, BRD-01 to BRD-03, ANI-01 to ANI-05, BRK-01 to BRK-05, GRD-01 to GRD-04, ARC-01 to ARC-05)

---

### Phase 40: Core Components
**Goal**: Build foundational component set with full TypeScript types and accessibility
**Depends on**: Phase 39
**Plans**: 5 plans

Plans:
- [x] 40-01: Button component with variants, sizes, loading state
- [x] 40-02: Card and GlassCard with glassmorphism
- [x] 40-03: Input and InputField with label/helper/error
- [x] 40-04: Badge, Typography, Spinner components
- [x] 40-05: Icon system + visual verification checkpoint

**Details:**
- 13 core components: Button (4 variants, 3 sizes), Card, GlassCard, Input, InputField, Badge, Heading, Text, Caption, Code, Spinner, Icon, Skeleton
- All components export TypeScript interfaces and have JSDoc examples
- Button uses Raycast multi-layer shadow (shadow-button token)
- GlassCard uses inline styles for Safari backdrop-filter compatibility
- 19 requirements covered (CMP-01 to CMP-13, CMQ-01 to CMQ-06)

---

### Phase 41: Extended Components + Raycast Patterns
**Goal**: Build secondary components and Raycast-specific UI patterns
**Depends on**: Phase 40
**Plans**: 6 plans

Plans:
- [x] 41-01: Dialog + Toggle (Radix primitives with glass styling)
- [x] 41-02: Tabs + Avatar + Divider (Radix primitives + simple)
- [x] 41-03: Select/Dropdown with keyboard navigation
- [x] 41-04: Toast + Kbd + ShortcutBadge (feedback + keyboard viz)
- [x] 41-05: ExtensionCard + TestimonialCard + CategoryTabs (Raycast patterns)
- [x] 41-06: Index exports + visual verification showcase

**Details:**
- Extended components: Dialog, Toggle, Tabs, Avatar/AvatarGroup, Divider, Select, SearchableSelect, Toast, Kbd, ShortcutBadge
- Raycast patterns: ExtensionCard (gradient themes), TestimonialCard, CategoryTabs
- Custom Select with shared useSelect hook (no @radix-ui/react-select dependency)
- Keyboard navigation with disabled option skipping and wrap-around
- 11 requirements covered (CMX-01 to CMX-06, RAY-01 to RAY-05)

---

### Phase 42: Effects & Animation
**Goal**: Implement glassmorphism effects and animation patterns matching Raycast aesthetic
**Depends on**: Phase 40
**Plans**: 6 plans

Plans:
- [x] 42-01: GlassPanel blur enhancement (xs through 2xl)
- [x] 42-02: NoiseTexture + ChromaticAberration effects
- [x] 42-03: FadeIn/SlideUp enhance + FadeInUp combined
- [x] 42-04: StaggerReveal + HoverScale motion components
- [x] 42-05: Skeleton shimmer animation
- [x] 42-06: Barrel exports + visual verification showcase

**Details:**
- GlassPanel: 7 blur levels (none, xs, sm, md, lg, xl, 2xl) mapped to Raycast UI contexts
- Effects: NoiseTexture (SVG feTurbulence), ChromaticAberration (CSS textShadow RGB split)
- Motion: FadeInUp, StaggerReveal (compound component), HoverScale (spring-based)
- Mobile blur optimization at 768px breakpoint
- Skeleton shimmer with moving gradient animation
- 13 requirements covered (GLS-01 to GLS-07, EFX-01 to EFX-06)

---

### Phase 43: Showcase Enhancement
**Goal**: Build comprehensive showcase pages demonstrating all components and variants
**Depends on**: Phase 41, Phase 42
**Plans**: 7 plans

Plans:
- [x] 43-01: Showcase infrastructure (sugar-high, shared components, layout, sidebar nav)
- [x] 43-02: /showcase tokens page (color, typography, spacing, shadow, radius, animation, gradient tokens)
- [x] 43-03: /showcase/inputs page (Input, InputField, Select, SearchableSelect, Toggle)
- [x] 43-04: /showcase/navigation + /showcase/feedback pages
- [x] 43-05: /showcase/data-display + /showcase/layout-components pages
- [x] 43-06: /showcase/utilities page (motion, effects, gradient primitives, TrafficLights)
- [x] 43-07: Remove old /ui-showcase + visual verification checkpoint

**Details:**
- 7 showcase pages: main tokens, inputs, navigation, feedback, data-display, layout-components, utilities
- sugar-high for zero-JS server-side syntax highlighting
- Client island pattern for interactive demos
- Consistent ShowcaseSection pattern across all pages
- 10 requirements covered (SHW-01 to SHW-10)

---

### Phase 44: Verification & Documentation
**Goal**: Verify visual accuracy, accessibility compliance, and document entire system
**Depends on**: Phase 43
**Plans**: 7 plans

Plans:
- [x] 44-01: Verification infrastructure + WCAG AA contrast audit
- [x] 44-02: Hardcoded values scan + token verification against extraction data
- [x] 44-03: Token reference document + component index
- [x] 44-04: Visual comparison screenshots + responsive verification
- [x] 44-05: Component API docs + usage guidelines + accessibility docs
- [x] 44-06: BRAND-BIBLE.md + motion guidelines + design specs + contributing guide
- [x] 44-07: Human verification checkpoint

**Details:**
- WCAG AA contrast audit: 28/37 pass initially, critical issues fixed (accent-foreground raised to 7.2:1 AAA, muted text to 5.4:1 AA)
- Token verification: 84 tokens compared, 63 match, 1 mismatch (--text-3xl 30px vs 32px)
- Hardcoded values scan: 275 findings, 48 allow-listed, 227 flagged
- Visual comparison: 90-95% fidelity vs Raycast (homepage features section 1.08% pixel diff)
- 8 documentation files in docs/ directory
- BRAND-BIBLE.md at repo root as single entry point
- 15 requirements covered (VER-01 to VER-07, DOC-01 to DOC-08)

---

## Milestone Summary

**Key Decisions:**
- Coral #FF7F50 replaces Raycast brand color (#ff6363); all else matches 1:1
- Two-tier token architecture (primitive -> semantic) in Tailwind v4 @theme
- Dark-mode first design system
- Dark gray tokens use exact hex values (Tailwind v4 oklch compilation inaccurate for low lightness)
- Border/state tokens use rgba() for precision over oklch alpha
- Button default is secondary (not primary) â€” matches Raycast sparse accent usage
- Custom Select implementation (no @radix-ui/react-select) per research recommendation
- sugar-high for server-side syntax highlighting (zero client JS)
- Three-tier documentation depth: Full (9), Standard (10), Brief (8) based on complexity

**Issues Resolved:**
- WCAG AA contrast failures: accent-foreground fixed to #1a0f0a (7.2:1 AAA), gray-500 fixed to #848586 (5.4:1 AA)
- Hydration mismatch on InputField: replaced module-level counter with React.useId()
- Hardcoded text-white on bg-accent buttons: migrated to text-accent-foreground token
- Tailwind v4 oklch-to-hex compilation inaccuracy for dark colors: use exact hex values

**Issues Deferred:**
- Light mode theme variant (v2.1+)
- Storybook integration (v2.1+)
- Style Dictionary / Tokens Studio pipeline (v2.1+)
- Responsive showcase content clipping on mobile (future responsive improvements)
- Keyboard/screen reader accessibility beyond contrast (future)

**Technical Debt Incurred:**
- --text-3xl is 30px vs Raycast 32px (intentional, flagged)
- 227 hardcoded values flagged for review (many intentional Tailwind arbitrary sizes)
- Touch target threshold relaxed to 32x24px (desktop-first, future tightening for mobile)

---

_For current project status, see .planning/ROADMAP.md_
