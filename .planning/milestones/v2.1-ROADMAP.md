# Milestone v2.1: Dashboard Rebuild

**Status:** SHIPPED 2026-02-08
**Phases:** 45-49
**Total Plans:** 20

## Overview

Full dashboard rebuild with Raycast design system migration (Wave 1: structural foundation, forms, modals, results, loading states) and Canvas-based hive visualization with interactive exploration (Wave 2: layout, rendering, interactions).

## Phases

### Phase 45: Structural Foundation (AppShell + Sidebar)

**Goal:** Dashboard layout restructured with floating glassmorphic sidebar that works across desktop and mobile viewports.
**Requirements:** SIDE-01..08, MOBL-01..03 (11 total)
**Depends on:** None (foundation phase)
**Plans:** 3 plans

- [x] 45-01: Sidebar store (Zustand persist), z-index scale, SidebarToggle component
- [x] 45-02: Floating GlassPanel sidebar rebuild, nav items, test history migration
- [x] 45-03: AppShell content push, mobile overlay, MobileNav replacement

---

### Phase 46: Forms & Modals Migration

**Goal:** All form inputs and modal dialogs across the dashboard use design system components with consistent behavior.
**Requirements:** FORM-01..05, MODL-01..05 (10 total)
**Depends on:** Phase 45
**Plans:** 4 plans

- [x] 46-01: ContentForm + SurveyForm migration to design system with Zod v4 validation
- [x] 46-02: TestTypeSelector rebuild as Dialog + GlassCard responsive grid
- [x] 46-03: CreateSocietyModal + DeleteTestModal + LeaveFeedbackModal migration
- [x] 46-04: SocietySelector modal migration + visual consistency verification

---

### Phase 47: Results Panel, Top Bar & Loading States

**Goal:** Results display, top bar filtering, and loading states all render through design system components, completing the dashboard migration.
**Requirements:** RSLT-01..07, TBAR-01..04, LOAD-01..03 (14 total)
**Depends on:** Phase 45
**Plans:** 5 plans

- [x] 47-01: Migrate 5 results section cards (ImpactScore, AttentionBreakdown, Variants, Insights, Themes)
- [x] 47-02: ResultsPanel wrapper + ShareButton toast + ToastProvider
- [x] 47-03: Top bar migration (ContextBar, FilterPills, LegendPills) to GlassPill
- [x] 47-04: Loading state rewrite (skeleton shimmer + progressive reveal + cancel)
- [x] 47-05: Dashboard wiring + mobile blur budget + visual verification

---

### Phase 48: Hive Foundation (Layout + Rendering)

**Goal:** Canvas-based hive visualization renders 1000+ nodes in a deterministic radial layout at 60fps with retina support.
**Requirements:** HIVE-01..09 (9 total)
**Depends on:** Phase 45
**Plans:** 4 plans

- [x] 48-01: Types, constants, d3-hierarchy layout computation, mock data generator
- [x] 48-02: Canvas resize hook + batched hive renderer with skeleton state
- [x] 48-03: Animation hook + HiveCanvas component wiring
- [x] 48-04: Visual verification checkpoint

---

### Phase 49: Hive Interactions (Click, Hover & Navigation)

**Goal:** Users can explore the hive by hovering, clicking, and navigating nodes with responsive feedback.
**Requirements:** HINT-01..07 (7 total)
**Depends on:** Phase 48
**Plans:** 4 plans

- [x] 49-01: d3-quadtree, interaction types/constants, pure utility module
- [x] 49-02: Interaction hook (hover debounce, click-vs-drag, selection) + renderer augmentation
- [x] 49-03: HiveCanvas integration (wire hook, overlay, pinch-to-zoom, reset button)
- [x] 49-04: Visual and functional verification checkpoint

---

## Milestone Summary

**Key Decisions:**
- Zustand persist middleware for sidebar state (replaces manual _hydrate pattern)
- Zod v4 for form validation (no react-hook-form needed for simple forms)
- GlassTextarea rendered transparent inside form cards (avoid double glass)
- AlertDialog kept for destructive actions (prevents overlay-click close)
- Canvas 2D (not SVG) for 1000+ node hive performance
- d3-hierarchy for deterministic layout, d3-quadtree for O(log n) hit detection
- Ref-based animation state to avoid React re-renders during 60fps loop
- Pointer Events API for unified pinch-to-zoom across devices
- Lightning CSS backdrop-filter workaround via inline React styles
- Sidebar width 260px (per visual feedback, down from planned 300px)

**Issues Resolved:**
- Lightning CSS strips backdrop-filter from CSS classes — applied via inline styles
- Badge variant="accent" doesn't exist — used variant="info"
- GlassCard import path broken after primitives deletion — canonical path established
- LayoutNode missing name/meta fields for overlay — interface extended
- HiveNode tier type too narrow — widened to 0-3

**Issues Deferred:**
- video-grid.tsx missing react-intersection-observer types (unrelated to v2.1)

**Technical Debt Incurred:**
- None — all patterns established cleanly

---
_For current project status, see .planning/ROADMAP.md_
