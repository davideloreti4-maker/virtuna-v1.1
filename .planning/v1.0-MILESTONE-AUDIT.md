---
milestone: v1.0
audited: 2026-02-17
status: gaps_found
scores:
  requirements: 37/41
  phases: 6/7 verified
  integration: 22/25 connected
  flows: 5/8 complete
gaps:
  requirements:
    - "COMP-01: No UI form to add competitor (server action exists, no form/dialog calls it)"
    - "COMP-05: No UI to remove competitor (server action exists, never imported)"
    - "BENCH-02: Self-benchmarking broken — wrong column in creator_profiles query"
  integration:
    - "addCompetitor action orphaned from dashboard — only called from compare page for self-tracking"
    - "removeCompetitor action fully orphaned — zero imports in codebase"
  flows:
    - "Add Competitor: no form/dialog to accept @handle input"
    - "Remove Competitor: no button/context menu triggers removal"
    - "Self-Benchmarking: compare/page.tsx line 138 uses .eq('id') instead of .eq('user_id')"
tech_debt:
  - phase: 01-data-foundation
    items:
      - "Missing VERIFICATION.md — phase was never formally verified"
  - phase: 02-competitor-management
    items:
      - "human_needed items from verification never resolved (deferred to Phase 3 UI)"
  - phase: 03-competitor-dashboard
    items:
      - "CompetitorTableSkeleton defined but never imported — table view has no loading skeleton"
  - phase: 05-benchmarking-comparison
    items:
      - "addCompetitor return value ignored in compare/page.tsx line 200 — silent failure on self-tracking setup"
---

# Milestone Audit: Competitors Tool

**Audited:** 2026-02-17
**Status:** gaps_found
**Milestone:** Competitors Tool (v1.0)

## Requirements Coverage

### Satisfied (37/41)

| Category | Requirements | Status |
|----------|-------------|--------|
| Competitor Management | COMP-02, COMP-03, COMP-04, COMP-06 | All satisfied |
| Growth Metrics | GROW-01 through GROW-06 | All satisfied |
| Engagement Metrics | ENGM-01 through ENGM-03 | All satisfied |
| Content Analysis | CONT-01 through CONT-06 | All satisfied |
| Benchmarking | BENCH-01, BENCH-03 | Satisfied |
| AI Intelligence | INTL-01 through INTL-05 | All satisfied |
| Data Pipeline | DATA-01 through DATA-06 | All satisfied |
| UI Polish | UI-01 through UI-06 | All satisfied |

### Unsatisfied (3/41) — Critical Gaps

| Requirement | Phase | Issue |
|-------------|-------|-------|
| **COMP-01**: User can add competitor by pasting @handle | Phase 2/3 | Server action `addCompetitor` is fully implemented but no UI form/dialog exists on the dashboard to call it. The empty state CTA button has no onClick handler. Users cannot add any competitor. |
| **COMP-05**: User can remove a tracked competitor | Phase 2/3 | Server action `removeCompetitor` is fully implemented but never imported by any component. No remove button exists anywhere in the UI. |
| **BENCH-02**: Self-benchmarking against own TikTok stats | Phase 5 | `compare/page.tsx` line 138 queries `.eq("id", user.id)` instead of `.eq("user_id", user.id)`. Result: userHandle is always null, "You" option never appears in selector. One-line fix. |

### Partial (1/41)

| Requirement | Issue |
|-------------|-------|
| COMP-01 (partial) | The `addCompetitor` action IS callable from comparison page self-tracking, so adding via that path works. The dashboard entry point is broken. |

## Phase Verification Status

| Phase | Verification | Status | Score |
|-------|-------------|--------|-------|
| 1. Data Foundation | **MISSING** | Unverified | - |
| 2. Competitor Management | 02-VERIFICATION.md | human_needed | 4/4 automated |
| 3. Competitor Dashboard | 03-VERIFICATION.md | passed | 4/4 |
| 4. Detail Page & Analytics | 04-VERIFICATION.md | passed | 6/6 |
| 5. Benchmarking & Comparison | 05-VERIFICATION.md | passed | 11/11 |
| 6. AI Intelligence | 06-VERIFICATION.md | passed | 13/13 |
| 7. Polish & Edge Cases | 07-VERIFICATION.md | passed | 12/12 |

**Phase 1 note:** Phase 1 creates the database schema, scraping service, and Zod validation. All downstream phases depend on it and pass verification, so Phase 1 is implicitly validated. The missing verification is a process gap, not a functional gap.

## Cross-Phase Integration

| Connection Type | Count | Status |
|----------------|-------|--------|
| Connected exports | 22 | Properly wired |
| Orphaned exports | 3 | Not called from UI |
| Missing connections | 2 | Form → action wiring gaps |

### Orphaned Exports

1. **`removeCompetitor`** — `src/app/actions/competitors/remove.ts` — zero imports
2. **`addCompetitor` (from dashboard)** — only called from compare page for self-tracking
3. **`CompetitorTableSkeleton`** — defined but never imported (minor)

## E2E Flow Status

| Flow | Status | Break Point |
|------|--------|-------------|
| 1. Add Competitor | **BROKEN** | No UI form to accept @handle |
| 2. Daily Refresh | ✓ Complete | - |
| 3. Detail Drill-Down | ✓ Complete | - |
| 4. Comparison (2 competitors) | ✓ Complete | - |
| 5. Self-Benchmarking | **BROKEN** | Wrong column in DB query |
| 6. AI Generation | ✓ Complete | - |
| 7. Error Recovery | ✓ Complete | - |
| 8. Remove Competitor | **BROKEN** | Action never called from UI |

## Tech Debt

| Phase | Item | Severity |
|-------|------|----------|
| 01 | Missing VERIFICATION.md | Low (implicitly validated) |
| 02 | Human-needed items never formally resolved | Low (resolved by Phase 3) |
| 03 | CompetitorTableSkeleton unused | Low |
| 05 | addCompetitor return value ignored in compare/page.tsx | Low |

## Critical Path to Close Gaps

### Fix 1: Self-benchmarking bug (1 line)
Change `compare/page.tsx` line 138: `.eq("id", user.id)` → `.eq("user_id", user.id)`

### Fix 2: Add Competitor UI (new component)
Create an add-competitor dialog/form with handle input + submit that calls `addCompetitor(handle)`. Wire to:
- Empty state CTA button in `competitor-empty-state.tsx`
- Dashboard header "Add" button in `competitors-client.tsx`

### Fix 3: Remove Competitor UI (component update)
Add remove button/context menu to `CompetitorCard` and/or `CompetitorTable` that calls `removeCompetitor(competitorId)` with confirmation dialog.

---
*Audited: 2026-02-17*
*Auditor: Claude (gsd-integration-checker + gsd-verifier)*
